var jt=Object.defineProperty;var Fe=Object.getOwnPropertySymbols;var Kt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var He=(a,e,t)=>e in a?jt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,me=(a,e)=>{for(var t in e||(e={}))Kt.call(e,t)&&He(a,t,e[t]);if(Fe)for(var t of Fe(e))Mt.call(e,t)&&He(a,t,e[t]);return a};import{X as Bt,S as Q,i as $,s as x,e as w,t as K,c as y,a as C,h as M,d as _,b as k,g as p,H as v,j as W,F as oe,k as V,m as N,R as te,Y as Ee,N as ae,f as I,J as fe,K as re,L as ce,q as T,o as A,W as Ce,V as It,G as zt,I as Tt,n as ne,p as ie,r as pe,D as Ot,v as Ft,Z as Pe,_ as De,l as R,$ as Ht,Q as q,w as G,x as J,y as Z,B as X,a0 as Le,a1 as je,a2 as Rt,a3 as Wt,O as Se,U as qt,a4 as Ut}from"../chunks/vendor-cfbb7ec8.js";import{a as Pt,b as Ke}from"../chunks/paths-396f020f.js";import{m as Re,c as Gt,a as We,b as Ie,l as ve,d as ke,e as Ve,v as Zt,f as Xt,t as Jt,g as Yt,p as Qt}from"../chunks/config-5c033f1c.js";import{c as be}from"../chunks/singletons-d1fb5791.js";const qe="https://raw.githubusercontent.com/jtrim-ons/key-pop-api-downloader/main/generated/";function $t(a){let e=[...a].sort((l,n)=>l.key.localeCompare(n.key));return{selString:a.length==0?"data":e.map((l,n)=>n<e.length-1?`${l.key}-${l.code}`:`${l.key}`).join("/"),lastCode:a.length>0?e[e.length-1].code:null}}async function Vt(a,e=[],t=window.fetch){if(e.length>0&&!e[0].newFormat)throw new Error("OLD FORMAT!");let{selString:l,lastCode:n}=$t(e),i={data:{}},s;if(e.length===0){let f=`${qe}${e.length}var_percent/${l}.json`;s=await(await t(f)).json()}else{let f=`${qe}${e.length}var-combined_percent/${l}.json`,r=await(await t(f)).json();s=r.bar_chart_data[n],i.mapData=r.map_data[n],i.total_pop=s.total_pop}for(let f of a){i.data[f.key]={};for(let o of f.tables)i.data[f.key][o.code]={values:s[o.code]}}return i}function xt(a,e,t){for(let l=1;l<e.length;l++)if(a<=e[l])return t[l-1]}async function en(a,e,t=window.fetch){let n=await(await t(a)).json();return await Bt(n,e)}function _e(a){return a.charAt(0).toUpperCase()+a.slice(1)}function Nt(a){if(!a)return 0;let e=0;for(let t=0;t<a.length;t++)e+=a[t];return e}function Ue(a){return a.replace(new RegExp(" \\([0-9]* categories\\)"),"")}function Ge(a){for(const e of a)if(e.var in Re)return Re[e.var][e.code];return null}function Ne(a,e,t){let l=t.all[a][e].values,n=t.selected[a][e].values,i=[];return Gt[e].forEach((s,f)=>{let o=s.label,r=l.percent[f],c=n.percent[f];t.selected.total_pop!=t.all.total_pop&&i.push({group:"This group",category:o,value:c}),i.push({group:"Whole population",category:o,value:r})}),i}function Ze(a,e){if(a===e)return"100";const t=(a/e*100).toFixed(1);return t!=="0.0"?t:"Less than 0.05"}function Xe(a,e,t){const l=a.slice();return l[9]=e[t],l}function Je(a){let e,t,l;return{c(){e=w("header"),t=w("h3"),l=K(a[2]),this.h()},l(n){e=y(n,"HEADER",{class:!0});var i=C(e);t=y(i,"H3",{class:!0});var s=C(t);l=M(s,a[2]),s.forEach(_),i.forEach(_),this.h()},h(){k(t,"class","margin-top--0 margin-right--0 margin-bottom--0 margin-left--0 svelte-1krn9ab"),k(e,"class","margin-top--1")},m(n,i){p(n,e,i),v(e,t),v(t,l)},p(n,i){i&4&&W(l,n[2])},d(n){n&&_(e)}}}function Ye(a){let e,t=a[3],l=[];for(let n=0;n<t.length;n+=1)l[n]=Qe(Xe(a,t,n));return{c(){e=w("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var i=C(e);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(_),this.h()},h(){k(e,"class","margin-top--2")},m(n,i){p(n,e,i);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,i){if(i&8){t=n[3];let s;for(s=0;s<t.length;s+=1){const f=Xe(n,t,s);l[s]?l[s].p(f,i):(l[s]=Qe(f),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&_(e),te(l,n)}}}function Qe(a){let e,t=a[9].label+"",l,n,i,s,f;return{c(){e=w("a"),l=K(t),n=V(),this.h()},l(o){e=y(o,"A",{href:!0,class:!0,"aria-label":!0,"data-gtm-label":!0});var r=C(e);l=M(r,t),n=N(r),r.forEach(_),this.h()},h(){k(e,"href",i=a[9].url),k(e,"class","tile__link"),k(e,"aria-label",s=a[9].label),k(e,"data-gtm-label",f=a[9].label)},m(o,r){p(o,e,r),v(e,l),v(e,n)},p(o,r){r&8&&t!==(t=o[9].label+"")&&W(l,t),r&8&&i!==(i=o[9].url)&&k(e,"href",i),r&8&&s!==(s=o[9].label)&&k(e,"aria-label",s),r&8&&f!==(f=o[9].label)&&k(e,"data-gtm-label",f)},d(o){o&&_(e)}}}function ln(a){let e,t,l,n,i=`span ${a[0]==1?1:a[0]>a[5]?a[5]:a[0]}`,s=`span ${a[1]}`,f,o=a[2]&&Je(a);const r=a[8].default,c=oe(r,a,a[7],null);let d=a[3]&&a[3][0]&&Ye(a);return{c(){e=w("div"),o&&o.c(),t=V(),c&&c.c(),l=V(),d&&d.c(),this.h()},l(u){e=y(u,"DIV",{class:!0});var h=C(e);o&&o.l(h),t=N(h),c&&c.l(h),l=N(h),d&&d.l(h),h.forEach(_),this.h()},h(){k(e,"class",n=Ee(a[4]?"":"tile tile__content")+" svelte-1krn9ab"),ae(e,"blank",a[4]),I(e,"grid-column",i,!1),I(e,"grid-row",s,!1)},m(u,h){p(u,e,h),o&&o.m(e,null),v(e,t),c&&c.m(e,null),v(e,l),d&&d.m(e,null),f=!0},p(u,[h]){u[2]?o?o.p(u,h):(o=Je(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),c&&c.p&&(!f||h&128)&&fe(c,r,u,u[7],f?ce(r,u[7],h,null):re(u[7]),null),u[3]&&u[3][0]?d?d.p(u,h):(d=Ye(u),d.c(),d.m(e,null)):d&&(d.d(1),d=null),(!f||h&16&&n!==(n=Ee(u[4]?"":"tile tile__content")+" svelte-1krn9ab"))&&k(e,"class",n),h&16&&ae(e,"blank",u[4]),h&33&&i!==(i=`span ${u[0]==1?1:u[0]>u[5]?u[5]:u[0]}`)&&I(e,"grid-column",i,!1),h&2&&s!==(s=`span ${u[1]}`)&&I(e,"grid-row",s,!1)},i(u){f||(T(c,u),f=!0)},o(u){A(c,u),f=!1},d(u){u&&_(e),o&&o.d(),c&&c.d(u),d&&d.d()}}}function tn(a,e,t){let l,{$$slots:n={},$$scope:i}=e,{colspan:s=1}=e,{rowspan:f=1}=e,{title:o=null}=e,{links:r=null}=e,{blank:c=!1}=e;const{cols:d}=Ce("tiles");return It(a,d,u=>t(5,l=u)),a.$$set=u=>{"colspan"in u&&t(0,s=u.colspan),"rowspan"in u&&t(1,f=u.rowspan),"title"in u&&t(2,o=u.title),"links"in u&&t(3,r=u.links),"blank"in u&&t(4,c=u.blank),"$$scope"in u&&t(7,i=u.$$scope)},[s,f,o,r,c,l,d,i,n]}class ge extends Q{constructor(e){super();$(this,e,tn,ln,x,{colspan:0,rowspan:1,title:2,links:3,blank:4})}}const nn=a=>({}),$e=a=>({});function xe(a){let e,t,l,n;const i=a[6].meta,s=oe(i,a,a[5],$e);return{c(){e=w("h2"),t=K(a[0]),l=V(),s&&s.c(),this.h()},l(f){e=y(f,"H2",{id:!0,class:!0});var o=C(e);t=M(o,a[0]),o.forEach(_),l=N(f),s&&s.l(f),this.h()},h(){k(e,"id","topics"),k(e,"class","svelte-1328dmd")},m(f,o){p(f,e,o),v(e,t),p(f,l,o),s&&s.m(f,o),n=!0},p(f,o){(!n||o&1)&&W(t,f[0]),s&&s.p&&(!n||o&32)&&fe(s,i,f,f[5],n?ce(i,f[5],o,nn):re(f[5]),$e)},i(f){n||(T(s,f),n=!0)},o(f){A(s,f),n=!1},d(f){f&&_(e),f&&_(l),s&&s.d(f)}}}function an(a){let e,t,l,n,i=`repeat(auto-fit, minmax(min(${a[1]}px, 100%), 1fr))`,s=`${a[2]}px`,f,o=a[0]&&xe(a);const r=a[6].default,c=oe(r,a,a[5],null);return{c(){e=w("div"),o&&o.c(),t=V(),l=w("div"),c&&c.c(),this.h()},l(d){e=y(d,"DIV",{class:!0});var u=C(e);o&&o.l(u),t=N(u),l=y(u,"DIV",{class:!0});var h=C(l);c&&c.l(h),h.forEach(_),u.forEach(_),this.h()},h(){k(l,"class","tiles-grid margin-bottom svelte-1328dmd"),zt(()=>a[7].call(l)),I(l,"grid-template-columns",i,!1),I(l,"grid-gap",s,!1),k(e,"class","tiles")},m(d,u){p(d,e,u),o&&o.m(e,null),v(e,t),v(e,l),c&&c.m(l,null),n=Tt(l,a[7].bind(l)),f=!0},p(d,[u]){d[0]?o?(o.p(d,u),u&1&&T(o,1)):(o=xe(d),o.c(),T(o,1),o.m(e,t)):o&&(ne(),A(o,1,1,()=>{o=null}),ie()),c&&c.p&&(!f||u&32)&&fe(c,r,d,d[5],f?ce(r,d[5],u,null):re(d[5]),null),u&2&&i!==(i=`repeat(auto-fit, minmax(min(${d[1]}px, 100%), 1fr))`)&&I(l,"grid-template-columns",i,!1),u&4&&s!==(s=`${d[2]}px`)&&I(l,"grid-gap",s,!1)},i(d){f||(T(o),T(c,d),f=!0)},o(d){A(o),A(c,d),f=!1},d(d){d&&_(e),o&&o.d(),c&&c.d(d),n()}}}function sn(a,e,t){let l,{$$slots:n={},$$scope:i}=e,{title:s=null}=e,{colwidth:f=280}=e,{gridgap:o=16}=e,r;const c=Ot(3);pe("tiles",{cols:c});function d(){r=this.clientWidth,t(3,r)}return a.$$set=u=>{"title"in u&&t(0,s=u.title),"colwidth"in u&&t(1,f=u.colwidth),"gridgap"in u&&t(2,o=u.gridgap),"$$scope"in u&&t(5,i=u.$$scope)},a.$$.update=()=>{a.$$.dirty&14&&t(4,l=r?Math.floor((r+o)/(f+o)):3),a.$$.dirty&16&&c.set(l)},[s,f,o,r,l,i,n,d]}class Be extends Q{constructor(e){super();$(this,e,sn,an,x,{title:0,colwidth:1,gridgap:2})}}function el(a){let e;const t=a[14].default,l=oe(t,a,a[13],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,i){l&&l.m(n,i),e=!0},p(n,i){l&&l.p&&(!e||i&8192)&&fe(l,t,n,n[13],e?ce(t,n[13],i,null):re(n[13]),null)},i(n){e||(T(l,n),e=!0)},o(n){A(l,n),e=!1},d(n){l&&l.d(n)}}}function on(a){let e,t,l=a[0]&&el(a);return{c(){e=w("div"),l&&l.c(),this.h()},l(n){e=y(n,"DIV",{id:!0,class:!0});var i=C(e);l&&l.l(i),i.forEach(_),this.h()},h(){k(e,"id",a[1]),k(e,"class","svelte-78euky")},m(n,i){p(n,e,i),l&&l.m(e,null),a[15](e),t=!0},p(n,[i]){n[0]?l?(l.p(n,i),i&1&&T(l,1)):(l=el(n),l.c(),T(l,1),l.m(e,null)):l&&(ne(),A(l,1,1,()=>{l=null}),ie()),(!t||i&2)&&k(e,"id",n[1])},i(n){t||(T(l),t=!0)},o(n){A(l),t=!1},d(n){n&&_(e),l&&l.d(),a[15](null)}}}function fn(a,e,t){let{$$slots:l={},$$scope:n}=e,{map:i}=e,{id:s="map"}=e,{location:f={bounds:[[-5.816,49.864],[1.863,55.872]]}}=e,{maxbounds:o=[[-13,48],[5,60]]}=e,{style:r="https://bothness.github.io/ons-basemaps/data/style-omt.json"}=e,{interactive:c=!0}=e,{minzoom:d=0}=e,{maxzoom:u=10}=e,{zoom:h=null}=e,{scrollzoom:m=!0}=e,{geolocate:b=!0}=e,{zoomcontrol:E=!0}=e,g,S;pe("map",{getMap:()=>i}),f.bounds?S={bounds:f.bounds}:f.lon&&f.lat&&(S={center:[f.lon,f.lat]},f.zoom&&(S.zoom=f.zoom)),o&&(S.maxBounds=o),Ft(()=>{t(0,i=new Pe.Map(me({container:g,style:r,minZoom:d,maxZoom:u,interactive:c},S))),E&&i.addControl(new Pe.NavigationControl({showCompass:!1})),m||i.scrollZoom.disable(),b&&i.addControl(new Pe.GeolocateControl),i.on("load",()=>{t(3,h=i.getZoom())}),i.on("zoom",()=>{t(3,h=i.getZoom())})});function j(z){De[z?"unshift":"push"](()=>{g=z,t(2,g)})}return a.$$set=z=>{"map"in z&&t(0,i=z.map),"id"in z&&t(1,s=z.id),"location"in z&&t(4,f=z.location),"maxbounds"in z&&t(5,o=z.maxbounds),"style"in z&&t(6,r=z.style),"interactive"in z&&t(7,c=z.interactive),"minzoom"in z&&t(8,d=z.minzoom),"maxzoom"in z&&t(9,u=z.maxzoom),"zoom"in z&&t(3,h=z.zoom),"scrollzoom"in z&&t(10,m=z.scrollzoom),"geolocate"in z&&t(11,b=z.geolocate),"zoomcontrol"in z&&t(12,E=z.zoomcontrol),"$$scope"in z&&t(13,n=z.$$scope)},[i,s,g,h,f,o,r,c,d,u,m,b,E,n,l,j]}class rn extends Q{constructor(e){super();$(this,e,fn,on,x,{map:0,id:1,location:4,maxbounds:5,style:6,interactive:7,minzoom:8,maxzoom:9,zoom:3,scrollzoom:10,geolocate:11,zoomcontrol:12})}}function ll(a){let e;const t=a[11].default,l=oe(t,a,a[10],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,i){l&&l.m(n,i),e=!0},p(n,i){l&&l.p&&(!e||i&1024)&&fe(l,t,n,n[10],e?ce(t,n[10],i,null):re(n[10]),null)},i(n){e||(T(l,n),e=!0)},o(n){A(l,n),e=!1},d(n){l&&l.d(n)}}}function cn(a){let e,t,l=a[0]&&ll(a);return{c(){l&&l.c(),e=R()},l(n){l&&l.l(n),e=R()},m(n,i){l&&l.m(n,i),p(n,e,i),t=!0},p(n,[i]){n[0]?l?(l.p(n,i),i&1&&T(l,1)):(l=ll(n),l.c(),T(l,1),l.m(e.parentNode,e)):l&&(ne(),A(l,1,1,()=>{l=null}),ie())},i(n){t||(T(l),t=!0)},o(n){A(l),t=!1},d(n){l&&l.d(n),n&&_(e)}}}function un(a,e,t){let{$$slots:l={},$$scope:n}=e,{id:i}=e,{type:s}=e,{url:f=null}=e,{props:o={}}=e,{data:r=null}=e,{layer:c=null}=e,{promoteId:d=null}=e,{minzoom:u=null}=e,{maxzoom:h=null}=e,m=!1;const{getMap:b}=Ce("map"),E=b();pe("source",{source:i,sourceLayer:c}),E.getSource(i)&&E.removeSource(i);function g(){E.isSourceLoaded(i)?t(0,m=!0):setTimeout(()=>{g()},500)}function S(){E.isStyleLoaded(i)?(j(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{S()},500)}u&&(o.minzoom=u),h&&(o.maxzoom=h),c&&d?(o.promoteId={},o.promoteId[c]=d):d&&(o.promoteId=d);function j(){s=="geojson"?r?(E.addSource(i,me({type:s,data:r},o)),g()):f&&(E.addSource(i,me({type:s,data:f},o)),g()):s=="vector"&&(E.addSource(i,me({type:s,tiles:[f]},o)),g())}S();function z(){E.getSource(i).setData(r)}return a.$$set=L=>{"id"in L&&t(2,i=L.id),"type"in L&&t(3,s=L.type),"url"in L&&t(4,f=L.url),"props"in L&&t(1,o=L.props),"data"in L&&t(5,r=L.data),"layer"in L&&t(6,c=L.layer),"promoteId"in L&&t(7,d=L.promoteId),"minzoom"in L&&t(8,u=L.minzoom),"maxzoom"in L&&t(9,h=L.maxzoom),"$$scope"in L&&t(10,n=L.$$scope)},a.$$.update=()=>{a.$$.dirty&33&&m&&r&&z()},[m,o,i,s,f,r,c,d,u,h,n,l]}class hn extends Q{constructor(e){super();$(this,e,un,cn,x,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function _n(a,e,t){const l=Ht(),n=new Pe.Popup({closeButton:!1,closeOnClick:!1});let{id:i}=e,{type:s}=e,{filter:f=null}=e,{layout:o={}}=e,{paint:r={}}=e,{data:c=null}=e,{geoCode:d=null}=e,{colorCode:u=null}=e,{nameCode:h=null}=e,{valueCode:m=null}=e,{click:b=!1}=e,{ignoreClick:E=!1}=e,{clickCenter:g=!1}=e,{selected:S=null}=e,{hover:j=!1}=e,{hovered:z=null}=e,{highlight:L=!1}=e,{highlightKey:D="highlighted"}=e,{highlighted:O=[]}=e,{order:H=null}=e,{maxzoom:P=null}=e,{minzoom:F=null}=e,{tooltip:Y=!1}=e;const{source:U,sourceLayer:ee}=Ce("source"),{getMap:ue}=Ce("map"),le=ue();let he=null,de=null,we=[];le.getLayer(i)&&le.removeLayer(i);let ye={id:i,type:s,source:U,paint:r,layout:o};f&&(ye.filter=f),ee&&(ye["source-layer"]=ee),P&&(ye.maxzoom=P),F&&(ye.minzoom=F),le.addLayer(ye,H);function Lt(){c.forEach(B=>{le.setFeatureState({source:U,sourceLayer:ee,id:B[d]},{color:u?B[u]:null,name:h?B[h]:null,value:m?B[m]:null})})}return b&&le.on("click",i,B=>{if(B.features.length>0&&!E){if(t(0,S=B.features[0].id),l("select",{code:S}),he&&le.setFeatureState({source:U,sourceLayer:ee,id:he},{selected:!1}),le.setFeatureState({source:U,sourceLayer:ee,id:S},{selected:!0}),g){let se=centroid(B.features[0].toJSON().geometry);le.flyTo({center:se.geometry.coordinates})}t(23,he=S)}}),j&&(le.on("mousemove",i,B=>{if(B.features.length>0){z&&le.setFeatureState({source:U,sourceLayer:ee,id:z},{hovered:!1}),t(1,z=t(24,de=B.features[0].id)),le.setFeatureState({source:U,sourceLayer:ee,id:z},{hovered:!0}),le.getCanvas().style.cursor="pointer";let se=le.getFeatureState({source:U,sourceLayer:ee,id:z});Y&&se.name&&n.setLngLat(B.lngLat).setHTML(`<strong>${se.name}</strong>${se.value!=null?"<br/>"+se.value.toFixed(1)+"%":"<br/>Data not available"}`).addTo(le)}}),le.on("mouseleave",i,B=>{z&&le.setFeatureState({source:U,sourceLayer:ee,id:z},{hovered:!1}),t(1,z=t(24,de=null)),le.getCanvas().style.cursor="",Y&&n.remove()})),a.$$set=B=>{"id"in B&&t(2,i=B.id),"type"in B&&t(3,s=B.type),"filter"in B&&t(4,f=B.filter),"layout"in B&&t(5,o=B.layout),"paint"in B&&t(6,r=B.paint),"data"in B&&t(7,c=B.data),"geoCode"in B&&t(8,d=B.geoCode),"colorCode"in B&&t(9,u=B.colorCode),"nameCode"in B&&t(10,h=B.nameCode),"valueCode"in B&&t(11,m=B.valueCode),"click"in B&&t(12,b=B.click),"ignoreClick"in B&&t(13,E=B.ignoreClick),"clickCenter"in B&&t(14,g=B.clickCenter),"selected"in B&&t(0,S=B.selected),"hover"in B&&t(15,j=B.hover),"hovered"in B&&t(1,z=B.hovered),"highlight"in B&&t(16,L=B.highlight),"highlightKey"in B&&t(17,D=B.highlightKey),"highlighted"in B&&t(18,O=B.highlighted),"order"in B&&t(19,H=B.order),"maxzoom"in B&&t(20,P=B.maxzoom),"minzoom"in B&&t(21,F=B.minzoom),"tooltip"in B&&t(22,Y=B.tooltip)},a.$$.update=()=>{a.$$.dirty[0]&640&&(c||u)&&Lt(),a.$$.dirty[0]&34013184&&L&&O!=we&&(we[0]&&we.forEach(B=>{let se={};se[D]=!1,le.setFeatureState({source:U,sourceLayer:ee,id:B},se)}),t(25,we=O),O[0]&&O.forEach(B=>{let se={};se[D]=!0,le.setFeatureState({source:U,sourceLayer:ee,id:B},se)})),a.$$.dirty[0]&8392705&&b&&S!=he&&(he&&le.setFeatureState({source:U,sourceLayer:ee,id:he},{selected:!1}),S&&le.setFeatureState({source:U,sourceLayer:ee,id:S},{selected:!0}),t(23,he=S)),a.$$.dirty[0]&16809986&&j&&z!=de&&(de&&le.setFeatureState({source:U,sourceLayer:ee,id:de},{hovered:!1}),z&&le.setFeatureState({source:U,sourceLayer:ee,id:z},{hovered:!0}),t(24,de=z))},[S,z,i,s,f,o,r,c,d,u,h,m,b,E,g,j,L,D,O,H,P,F,Y,he,de,we]}class tl extends Q{constructor(e){super();$(this,e,_n,null,x,{id:2,type:3,filter:4,layout:5,paint:6,data:7,geoCode:8,colorCode:9,nameCode:10,valueCode:11,click:12,ignoreClick:13,clickCenter:14,selected:0,hover:15,hovered:1,highlight:16,highlightKey:17,highlighted:18,order:19,maxzoom:20,minzoom:21,tooltip:22},null,[-1,-1])}}function nl(a,e,t){const l=a.slice();return l[10]=e[t],l[12]=t,l}function il(a){let e,t,l,n,i,s=a[6](a[4][a[12]])+"",f;return{c(){e=w("div"),t=V(),l=w("div"),n=V(),i=w("div"),f=K(s),this.h()},l(o){e=y(o,"DIV",{class:!0,style:!0}),C(e).forEach(_),t=N(o),l=y(o,"DIV",{class:!0,style:!0}),C(l).forEach(_),n=N(o),i=y(o,"DIV",{class:!0,style:!0});var r=C(i);f=M(r,s),r.forEach(_),this.h()},h(){k(e,"class","block svelte-j1hxpu"),I(e,"width",100/(a[4].length-1)+"%"),I(e,"left",a[12]*(100/(a[4].length-1))+"%"),I(e,"background-color",a[5][a[12]]),k(l,"class","line svelte-j1hxpu"),I(l,"left",a[12]*(100/(a[4].length-1))+"%"),k(i,"class","tick svelte-j1hxpu"),I(i,"left",a[12]*(100/(a[4].length-1))+"%"),ae(i,"tick-start",a[12]==0)},m(o,r){p(o,e,r),p(o,t,r),p(o,l,r),p(o,n,r),p(o,i,r),v(i,f)},p(o,r){r&16&&I(e,"width",100/(o[4].length-1)+"%"),r&16&&I(e,"left",o[12]*(100/(o[4].length-1))+"%"),r&32&&I(e,"background-color",o[5][o[12]]),r&16&&I(l,"left",o[12]*(100/(o[4].length-1))+"%"),r&80&&s!==(s=o[6](o[4][o[12]])+"")&&W(f,s),r&16&&I(i,"left",o[12]*(100/(o[4].length-1))+"%")},d(o){o&&_(e),o&&_(t),o&&_(l),o&&_(n),o&&_(i)}}}function al(a){let e,t,l,n=a[7](a[1])+"",i,s;return{c(){e=w("div"),t=V(),l=w("div"),i=K(n),s=K(a[8]),this.h()},l(f){e=y(f,"DIV",{class:!0,style:!0}),C(e).forEach(_),t=N(f),l=y(f,"DIV",{class:!0,style:!0});var o=C(l);i=M(o,n),s=M(o,a[8]),o.forEach(_),this.h()},h(){k(e,"class","marker svelte-j1hxpu"),I(e,"width",a[2]+"px"),I(e,"left","calc("+a[9](a[1],a[4])+"% - "+a[2]/2+"px)"),k(l,"class","value svelte-j1hxpu"),I(l,"left",a[9](a[1],a[4])+"%")},m(f,o){p(f,e,o),p(f,t,o),p(f,l,o),v(l,i),v(l,s)},p(f,o){o&4&&I(e,"width",f[2]+"px"),o&22&&I(e,"left","calc("+f[9](f[1],f[4])+"% - "+f[2]/2+"px)"),o&130&&n!==(n=f[7](f[1])+"")&&W(i,n),o&256&&W(s,f[8]),o&18&&I(l,"left",f[9](f[1],f[4])+"%")},d(f){f&&_(e),f&&_(t),f&&_(l)}}}function sl(a){let e,t,l,n=a[7](a[0])+"",i,s;return{c(){e=w("div"),t=V(),l=w("div"),i=K(n),s=K(a[8]),this.h()},l(f){e=y(f,"DIV",{class:!0,style:!0}),C(e).forEach(_),t=N(f),l=y(f,"DIV",{class:!0,style:!0});var o=C(l);i=M(o,n),s=M(o,a[8]),o.forEach(_),this.h()},h(){k(e,"class","marker marker-hovered svelte-j1hxpu"),I(e,"width",a[2]+"px"),I(e,"left","calc("+a[9](a[0],a[4])+"% - "+a[2]/2+"px)"),k(l,"class","value svelte-j1hxpu"),I(l,"left",a[9](a[0],a[4])+"%")},m(f,o){p(f,e,o),p(f,t,o),p(f,l,o),v(l,i),v(l,s)},p(f,o){o&4&&I(e,"width",f[2]+"px"),o&21&&I(e,"left","calc("+f[9](f[0],f[4])+"% - "+f[2]/2+"px)"),o&129&&n!==(n=f[7](f[0])+"")&&W(i,n),o&256&&W(s,f[8]),o&17&&I(l,"left",f[9](f[0],f[4])+"%")},d(f){f&&_(e),f&&_(t),f&&_(l)}}}function dn(a){let e,t,l,n,i,s=a[6](a[4][a[4].length-1])+"",f,o,r,c,d=a[4].slice(1),u=[];for(let b=0;b<d.length;b+=1)u[b]=il(nl(a,d,b));let h=a[1]&&al(a),m=a[0]&&sl(a);return{c(){e=w("div");for(let b=0;b<u.length;b+=1)u[b].c();t=V(),l=w("div"),n=V(),i=w("div"),f=K(s),o=K(a[8]),r=V(),h&&h.c(),c=V(),m&&m.c(),this.h()},l(b){e=y(b,"DIV",{class:!0,style:!0});var E=C(e);for(let S=0;S<u.length;S+=1)u[S].l(E);t=N(E),l=y(E,"DIV",{class:!0,style:!0}),C(l).forEach(_),n=N(E),i=y(E,"DIV",{class:!0,style:!0});var g=C(i);f=M(g,s),o=M(g,a[8]),g.forEach(_),r=N(E),h&&h.l(E),c=N(E),m&&m.l(E),E.forEach(_),this.h()},h(){k(l,"class","line svelte-j1hxpu"),I(l,"left","100%"),k(i,"class","tick tick-end svelte-j1hxpu"),I(i,"left","100%"),k(e,"class","container svelte-j1hxpu"),I(e,"height",a[3]+"px")},m(b,E){p(b,e,E);for(let g=0;g<u.length;g+=1)u[g].m(e,null);v(e,t),v(e,l),v(e,n),v(e,i),v(i,f),v(i,o),v(e,r),h&&h.m(e,null),v(e,c),m&&m.m(e,null)},p(b,[E]){if(E&112){d=b[4].slice(1);let g;for(g=0;g<d.length;g+=1){const S=nl(b,d,g);u[g]?u[g].p(S,E):(u[g]=il(S),u[g].c(),u[g].m(e,t))}for(;g<u.length;g+=1)u[g].d(1);u.length=d.length}E&80&&s!==(s=b[6](b[4][b[4].length-1])+"")&&W(f,s),E&256&&W(o,b[8]),b[1]?h?h.p(b,E):(h=al(b),h.c(),h.m(e,c)):h&&(h.d(1),h=null),b[0]?m?m.p(b,E):(m=sl(b),m.c(),m.m(e,null)):m&&(m.d(1),m=null),E&8&&I(e,"height",b[3]+"px")},i:q,o:q,d(b){b&&_(e),te(u,b),h&&h.d(),m&&m.d()}}}function mn(a,e,t){let{hovered:l=null}=e,{selected:n=null}=e,{lineWidth:i=3}=e,{height:s=15}=e,{breaks:f=[0,20,40,60,80,100]}=e,{colors:o=["rgba(234,236,177,.8)","rgba(169,216,145,.8)","rgba(0,167,186,.8)","rgba(0,78,166,.8)","rgba(0,13,84,.8)"]}=e,{formatTick:r=h=>h.toFixed(1)}=e,{formatVal:c=h=>h.toFixed(1)}=e,{suffix:d="%"}=e;const u=(h,m)=>{let b=0;for(;h>m[b+1];)b+=1;let E=100/(m.length-1),g=(h-m[b])/(m[b+1]-m[b]);return(b+g)*E};return a.$$set=h=>{"hovered"in h&&t(0,l=h.hovered),"selected"in h&&t(1,n=h.selected),"lineWidth"in h&&t(2,i=h.lineWidth),"height"in h&&t(3,s=h.height),"breaks"in h&&t(4,f=h.breaks),"colors"in h&&t(5,o=h.colors),"formatTick"in h&&t(6,r=h.formatTick),"formatVal"in h&&t(7,c=h.formatVal),"suffix"in h&&t(8,d=h.suffix)},[l,n,i,s,f,o,r,c,d,u]}class gn extends Q{constructor(e){super();$(this,e,mn,dn,x,{hovered:0,selected:1,lineWidth:2,height:3,breaks:4,colors:5,formatTick:6,formatVal:7,suffix:8})}}function ol(a,e,t){const l=a.slice();return l[2]=e[t],l[4]=t,l}function fl(a){let e,t,l,n=a[2].name+"",i,s,f,o=a[2].value.toFixed(1)+"",r,c,d;return{c(){e=w("tr"),t=w("td"),l=w("strong"),i=K(n),s=V(),f=w("td"),r=K(o),c=K("%"),d=V(),this.h()},l(u){e=y(u,"TR",{});var h=C(e);t=y(h,"TD",{});var m=C(t);l=y(m,"STRONG",{});var b=C(l);i=M(b,n),b.forEach(_),m.forEach(_),s=N(h),f=y(h,"TD",{class:!0});var E=C(f);r=M(E,o),c=M(E,"%"),E.forEach(_),d=N(h),h.forEach(_),this.h()},h(){k(f,"class","text-right svelte-vtsuxa")},m(u,h){p(u,e,h),v(e,t),v(t,l),v(l,i),v(e,s),v(e,f),v(f,r),v(f,c),v(e,d)},p(u,h){h&1&&n!==(n=u[2].name+"")&&W(i,n),h&1&&o!==(o=u[2].value.toFixed(1)+"")&&W(r,o)},d(u){u&&_(e)}}}function bn(a){let e,t,l=a[0],n=[];for(let i=0;i<l.length;i+=1)n[i]=fl(ol(a,l,i));return{c(){e=w("table"),t=w("tbody");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=y(i,"TABLE",{class:!0});var s=C(e);t=y(s,"TBODY",{});var f=C(t);for(let o=0;o<n.length;o+=1)n[o].l(f);f.forEach(_),s.forEach(_),this.h()},h(){k(e,"class","table-rank text-small svelte-vtsuxa")},m(i,s){p(i,e,s),v(e,t);for(let f=0;f<n.length;f+=1)n[f].m(t,null)},p(i,[s]){if(s&1){l=i[0];let f;for(f=0;f<l.length;f+=1){const o=ol(i,l,f);n[f]?n[f].p(o,s):(n[f]=fl(o),n[f].c(),n[f].m(t,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=l.length}},i:q,o:q,d(i){i&&_(e),te(n,i)}}}function vn(a,e,t){let{data:l}=e,{offset:n=1}=e;return a.$$set=i=>{"data"in i&&t(0,l=i.data),"offset"in i&&t(1,n=i.offset)},[l,n]}class At extends Q{constructor(e){super();$(this,e,vn,bn,x,{data:0,offset:1})}}function kn(a){let e,t;return{c(){e=w("p"),t=K(`For each lower-tier local authority area in England and Wales, the map
      shows the count of people in the categories chosen above as a percentage
      of the area's total population.`),this.h()},l(l){e=y(l,"P",{class:!0});var n=C(e);t=M(n,`For each lower-tier local authority area in England and Wales, the map
      shows the count of people in the categories chosen above as a percentage
      of the area's total population.`),n.forEach(_),this.h()},h(){k(e,"class","subtitle svelte-1ijey3s")},m(l,n){p(l,e,n),v(e,t)},d(l){l&&_(e)}}}function rl(a){let e,t;return e=new hn({props:{id:"lad",type:"geojson",data:a[0].geojson,promoteId:a[2].code,$$slots:{default:[pn]},$$scope:{ctx:a}}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n&1&&(i.data=l[0].geojson),n&4&&(i.promoteId=l[2].code),n&545&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function pn(a){let e,t,l,n,i;function s(o){a[6](o)}let f={id:"lad-fill",data:a[0].geoPerc,geoCode:"code",nameCode:"name",colorCode:"color",valueCode:"value",hover:!0,tooltip:!0,type:"fill",paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"],"fill-opacity":.8},order:"highway_name_other"};return a[5]!==void 0&&(f.hovered=a[5]),e=new tl({props:f}),De.push(()=>Le(e,"hovered",s)),n=new tl({props:{id:"lad-line",type:"line",paint:{"line-color":"orange","line-width":2,"line-opacity":["case",["==",["feature-state","hovered"],!0],1,0]},order:"highway_name_other"}}),{c(){G(e.$$.fragment),l=V(),G(n.$$.fragment)},l(o){J(e.$$.fragment,o),l=N(o),J(n.$$.fragment,o)},m(o,r){Z(e,o,r),p(o,l,r),Z(n,o,r),i=!0},p(o,r){const c={};r&1&&(c.data=o[0].geoPerc),!t&&r&32&&(t=!0,c.hovered=o[5],je(()=>t=!1)),e.$set(c)},i(o){i||(T(e.$$.fragment,o),T(n.$$.fragment,o),i=!0)},o(o){A(e.$$.fragment,o),A(n.$$.fragment,o),i=!1},d(o){X(e,o),o&&_(l),X(n,o)}}}function wn(a){let e,t,l=a[0].geojson&&a[0].geoPerc&&rl(a);return{c(){l&&l.c(),e=R()},l(n){l&&l.l(n),e=R()},m(n,i){l&&l.m(n,i),p(n,e,i),t=!0},p(n,i){n[0].geojson&&n[0].geoPerc?l?(l.p(n,i),i&1&&T(l,1)):(l=rl(n),l.c(),T(l,1),l.m(e.parentNode,e)):l&&(ne(),A(l,1,1,()=>{l=null}),ie())},i(n){t||(T(l),t=!0)},o(n){A(l),t=!1},d(n){l&&l.d(n),n&&_(e)}}}function cl(a){let e,t,l;return t=new gn({props:{breaks:a[0].geoBreaks,hovered:a[5]&&a[0].geoPerc.find(a[7])?a[0].geoPerc.find(a[8]).value:null,colors:a[0].geoBreaks[1]==100?[a[4].seq[4]]:a[4].seq}}),{c(){e=w("div"),G(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{});var i=C(e);J(t.$$.fragment,i),i.forEach(_),this.h()},h(){I(e,"height","38px",!1),I(e,"width","100%",!1)},m(n,i){p(n,e,i),Z(t,e,null),l=!0},p(n,i){const s={};i&1&&(s.breaks=n[0].geoBreaks),i&33&&(s.hovered=n[5]&&n[0].geoPerc.find(n[7])?n[0].geoPerc.find(n[8]).value:null),i&17&&(s.colors=n[0].geoBreaks[1]==100?[n[4].seq[4]]:n[4].seq),t.$set(s)},i(n){l||(T(t.$$.fragment,n),l=!0)},o(n){A(t.$$.fragment,n),l=!1},d(n){n&&_(e),X(t)}}}function yn(a){let e,t,l,n,i;t=new rn({props:{style:a[1],$$slots:{default:[wn]},$$scope:{ctx:a}}});let s=a[0].geoBreaks&&a[0].geoPerc&&cl(a);return{c(){e=w("div"),G(t.$$.fragment),l=V(),s&&s.c(),n=R(),this.h()},l(f){e=y(f,"DIV",{});var o=C(e);J(t.$$.fragment,o),o.forEach(_),l=N(f),s&&s.l(f),n=R(),this.h()},h(){I(e,"height","450px",!1)},m(f,o){p(f,e,o),Z(t,e,null),p(f,l,o),s&&s.m(f,o),p(f,n,o),i=!0},p(f,o){const r={};o&2&&(r.style=f[1]),o&549&&(r.$$scope={dirty:o,ctx:f}),t.$set(r),f[0].geoBreaks&&f[0].geoPerc?s?(s.p(f,o),o&1&&T(s,1)):(s=cl(f),s.c(),T(s,1),s.m(n.parentNode,n)):s&&(ne(),A(s,1,1,()=>{s=null}),ie())},i(f){i||(T(t.$$.fragment,f),T(s),i=!0)},o(f){A(t.$$.fragment,f),A(s),i=!1},d(f){f&&_(e),X(t),f&&_(l),s&&s.d(f),f&&_(n)}}}function En(a){let e,t;return{c(){e=w("span"),t=K("Make a selection to see rankings."),this.h()},l(l){e=y(l,"SPAN",{class:!0});var n=C(e);t=M(n,"Make a selection to see rankings."),n.forEach(_),this.h()},h(){k(e,"class","muted svelte-1ijey3s")},m(l,n){p(l,e,n),v(e,t)},p:q,i:q,o:q,d(l){l&&_(e)}}}function Cn(a){let e,t;return e=new At({props:{data:[...a[0].geoPerc].filter(ul).sort(hl).slice(0,5)}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n&1&&(i.data=[...l[0].geoPerc].filter(ul).sort(hl).slice(0,5)),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Dn(a){let e,t,l,n;const i=[Cn,En],s=[];function f(o,r){return o[0].geoPerc&&o[3][0]?0:1}return e=f(a),t=s[e]=i[e](a),{c(){t.c(),l=R()},l(o){t.l(o),l=R()},m(o,r){s[e].m(o,r),p(o,l,r),n=!0},p(o,r){let c=e;e=f(o),e===c?s[e].p(o,r):(ne(),A(s[c],1,1,()=>{s[c]=null}),ie(),t=s[e],t?t.p(o,r):(t=s[e]=i[e](o),t.c()),T(t,1),t.m(l.parentNode,l))},i(o){n||(T(t),n=!0)},o(o){A(t),n=!1},d(o){s[e].d(o),o&&_(l)}}}function Sn(a){let e,t;return{c(){e=w("span"),t=K("Make a selection to see rankings."),this.h()},l(l){e=y(l,"SPAN",{class:!0});var n=C(e);t=M(n,"Make a selection to see rankings."),n.forEach(_),this.h()},h(){k(e,"class","muted svelte-1ijey3s")},m(l,n){p(l,e,n),v(e,t)},p:q,i:q,o:q,d(l){l&&_(e)}}}function In(a){let e,t;return e=new At({props:{data:a[0].geoPerc.filter(_l).sort(dl).slice(-5),offset:a[0].geoPerc.filter(ml).length-4}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n&1&&(i.data=l[0].geoPerc.filter(_l).sort(dl).slice(-5)),n&1&&(i.offset=l[0].geoPerc.filter(ml).length-4),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function zn(a){let e,t,l,n;const i=[In,Sn],s=[];function f(o,r){return o[0].geoPerc&&o[3][0]?0:1}return e=f(a),t=s[e]=i[e](a),{c(){t.c(),l=R()},l(o){t.l(o),l=R()},m(o,r){s[e].m(o,r),p(o,l,r),n=!0},p(o,r){let c=e;e=f(o),e===c?s[e].p(o,r):(ne(),A(s[c],1,1,()=>{s[c]=null}),ie(),t=s[e],t?t.p(o,r):(t=s[e]=i[e](o),t.c()),T(t,1),t.m(l.parentNode,l))},i(o){n||(T(t),n=!0)},o(o){A(t),n=!1},d(o){s[e].d(o),o&&_(l)}}}function Tn(a){let e,t,l,n,i,s,f,o;return e=new ge({props:{colspan:3,rowspan:1,blank:!0,$$slots:{default:[kn]},$$scope:{ctx:a}}}),l=new ge({props:{colspan:2,rowspan:2,blank:!0,$$slots:{default:[yn]},$$scope:{ctx:a}}}),i=new ge({props:{title:"Areas with high %",$$slots:{default:[Dn]},$$scope:{ctx:a}}}),f=new ge({props:{title:"Areas with low %",$$slots:{default:[zn]},$$scope:{ctx:a}}}),{c(){G(e.$$.fragment),t=V(),G(l.$$.fragment),n=V(),G(i.$$.fragment),s=V(),G(f.$$.fragment)},l(r){J(e.$$.fragment,r),t=N(r),J(l.$$.fragment,r),n=N(r),J(i.$$.fragment,r),s=N(r),J(f.$$.fragment,r)},m(r,c){Z(e,r,c),p(r,t,c),Z(l,r,c),p(r,n,c),Z(i,r,c),p(r,s,c),Z(f,r,c),o=!0},p(r,c){const d={};c&512&&(d.$$scope={dirty:c,ctx:r}),e.$set(d);const u={};c&567&&(u.$$scope={dirty:c,ctx:r}),l.$set(u);const h={};c&521&&(h.$$scope={dirty:c,ctx:r}),i.$set(h);const m={};c&521&&(m.$$scope={dirty:c,ctx:r}),f.$set(m)},i(r){o||(T(e.$$.fragment,r),T(l.$$.fragment,r),T(i.$$.fragment,r),T(f.$$.fragment,r),o=!0)},o(r){A(e.$$.fragment,r),A(l.$$.fragment,r),A(i.$$.fragment,r),A(f.$$.fragment,r),o=!1},d(r){X(e,r),r&&_(t),X(l,r),r&&_(n),X(i,r),r&&_(s),X(f,r)}}}function Pn(a){let e,t;return e=new Be({props:{title:"Population by area",$$slots:{default:[Tn]},$$scope:{ctx:a}}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,[n]){const i={};n&575&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}const ul=a=>a.value!=null,hl=(a,e)=>e.value-a.value,_l=a=>a.value!=null,dl=(a,e)=>e.value-a.value,ml=a=>a.value!=null;function Vn(a,e,t){let{data:l}=e,{mapStyle:n}=e,{ladBounds:i}=e,{selected:s}=e,{colors:f}=e,o;function r(u){o=u,t(5,o)}const c=u=>u.code==o,d=u=>u.code==o;return a.$$set=u=>{"data"in u&&t(0,l=u.data),"mapStyle"in u&&t(1,n=u.mapStyle),"ladBounds"in u&&t(2,i=u.ladBounds),"selected"in u&&t(3,s=u.selected),"colors"in u&&t(4,f=u.colors)},[l,n,i,s,f,o,r,c,d]}class Nn extends Q{constructor(e){super();$(this,e,Vn,Pn,x,{data:0,mapStyle:1,ladBounds:2,selected:3,colors:4})}}function An(a){let e,t,l;var n=a[3];function i(s){return{props:{data:s[2].selected&&Ne("residents",s[1].code,s[2])}}}return n&&(e=new n(i(a))),{c(){e&&G(e.$$.fragment),t=R()},l(s){e&&J(e.$$.fragment,s),t=R()},m(s,f){e&&Z(e,s,f),p(s,t,f),l=!0},p(s,f){const o={};if(f&6&&(o.data=s[2].selected&&Ne("residents",s[1].code,s[2])),n!==(n=s[3])){if(e){ne();const r=e;A(r.$$.fragment,1,0,()=>{X(r,1)}),ie()}n?(e=new n(i(s)),G(e.$$.fragment),T(e.$$.fragment,1),Z(e,t.parentNode,t)):e=null}else n&&e.$set(o)},i(s){l||(e&&T(e.$$.fragment,s),l=!0)},o(s){e&&A(e.$$.fragment,s),l=!1},d(s){s&&_(t),e&&X(e,s)}}}function Ln(a){let e,t=Ie.nodata+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-1yn8adz")},m(n,i){p(n,e,i),v(e,l)},p:q,i:q,o:q,d(n){n&&_(e)}}}function jn(a){let e,t=Ie.blocked+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-1yn8adz")},m(n,i){p(n,e,i),v(e,l)},p:q,i:q,o:q,d(n){n&&_(e)}}}function Kn(a){let e,t,l,n,i,s=We[a[1].code]+"",f,o;const r=[jn,Ln,An],c=[];function d(u,h){return u[2].selected.residents[u[1].code].values==="blocked"?0:u[2].selected.residents[u[1].code].values.percent[0]==null?1:2}return e=d(a),t=c[e]=r[e](a),{c(){t.c(),l=V(),n=w("span"),i=K("% of "),f=K(s),this.h()},l(u){t.l(u),l=N(u),n=y(u,"SPAN",{class:!0});var h=C(n);i=M(h,"% of "),f=M(h,s),h.forEach(_),this.h()},h(){k(n,"class","num-desc svelte-1yn8adz")},m(u,h){c[e].m(u,h),p(u,l,h),p(u,n,h),v(n,i),v(n,f),o=!0},p(u,h){let m=e;e=d(u),e===m?c[e].p(u,h):(ne(),A(c[m],1,1,()=>{c[m]=null}),ie(),t=c[e],t?t.p(u,h):(t=c[e]=r[e](u),t.c()),T(t,1),t.m(l.parentNode,l)),(!o||h&2)&&s!==(s=We[u[1].code]+"")&&W(f,s)},i(u){o||(T(t),o=!0)},o(u){A(t),o=!1},d(u){c[e].d(u),u&&_(l),u&&_(n)}}}function Mn(a){let e,t;return e=new ge({props:{title:a[0],$$slots:{default:[Kn]},$$scope:{ctx:a}}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,[n]){const i={};n&1&&(i.title=l[0]),n&30&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Bn(a,e,t){let{title:l}=e,{table:n}=e,{data:i}=e,{chart_type:s}=e;return a.$$set=f=>{"title"in f&&t(0,l=f.title),"table"in f&&t(1,n=f.table),"data"in f&&t(2,i=f.data),"chart_type"in f&&t(3,s=f.chart_type)},[l,n,i,s]}class On extends Q{constructor(e){super();$(this,e,Bn,Mn,x,{title:0,table:1,data:2,chart_type:3})}}function Fn(a){let e,t;const l=a[5].default,n=oe(l,a,a[4],null);return{c(){e=w("mark"),n&&n.c(),this.h()},l(i){e=y(i,"MARK",{class:!0,style:!0,role:!0});var s=C(e);n&&n.l(s),s.forEach(_),this.h()},h(){k(e,"class","em svelte-1602h77"),I(e,"background-color",a[0]),I(e,"color",a[2]),k(e,"role","presentation"),ae(e,"nowrap",a[1])},m(i,s){p(i,e,s),n&&n.m(e,null),t=!0},p(i,[s]){n&&n.p&&(!t||s&16)&&fe(n,l,i,i[4],t?ce(l,i[4],s,null):re(i[4]),null),(!t||s&1)&&I(e,"background-color",i[0]),(!t||s&4)&&I(e,"color",i[2]),s&2&&ae(e,"nowrap",i[1])},i(i){t||(T(n,i),t=!0)},o(i){A(n,i),t=!1},d(i){i&&_(e),n&&n.d(i)}}}function Hn(a,e,t){let l,{$$slots:n={},$$scope:i}=e,{color:s="lightgrey"}=e,{nowrap:f=!0}=e;function o(c){return(c[0]*299+c[1]*587+c[2]*114)/1e3>125?"black":"white"}let r="black";return a.$$set=c=>{"color"in c&&t(0,s=c.color),"nowrap"in c&&t(1,f=c.nowrap),"$$scope"in c&&t(4,i=c.$$scope)},a.$$.update=()=>{a.$$.dirty&1&&t(3,l=Rt(s).rgb),a.$$.dirty&8&&l&&t(2,r=o(l))},[s,f,r,l,i,n]}class Rn extends Q{constructor(e){super();$(this,e,Hn,Fn,x,{color:0,nowrap:1})}}function Wn(a){let e,t=a[0].selected.total_pop.toLocaleString()+"",l,n,i,s,f,o,r,c=Ze(a[0].selected.total_pop,a[0].all.total_pop)+"",d,u,h;return r=new Rn({props:{color:"lightgrey"}}),{c(){e=w("div"),l=K(t),n=V(),i=w("div"),s=K("people (TODO: calculate this percentage in Python)"),f=V(),o=w("div"),G(r.$$.fragment),d=K(c),u=K("% of the total population of England and Wales"),this.h()},l(m){e=y(m,"DIV",{class:!0});var b=C(e);l=M(b,t),b.forEach(_),n=N(m),i=y(m,"DIV",{class:!0});var E=C(i);s=M(E,"people (TODO: calculate this percentage in Python)"),E.forEach(_),f=N(m),o=y(m,"DIV",{class:!0});var g=C(o);J(r.$$.fragment,g),d=M(g,c),u=M(g,"% of the total population of England and Wales"),g.forEach(_),this.h()},h(){k(e,"class","num-big svelte-12pd6wz"),k(i,"class","num-suffix svelte-12pd6wz"),k(o,"class","num-desc svelte-12pd6wz")},m(m,b){p(m,e,b),v(e,l),p(m,n,b),p(m,i,b),v(i,s),p(m,f,b),p(m,o,b),Z(r,o,null),v(o,d),v(o,u),h=!0},p(m,b){(!h||b&1)&&t!==(t=m[0].selected.total_pop.toLocaleString()+"")&&W(l,t),(!h||b&1)&&c!==(c=Ze(m[0].selected.total_pop,m[0].all.total_pop)+"")&&W(d,c)},i(m){h||(T(r.$$.fragment,m),h=!0)},o(m){A(r.$$.fragment,m),h=!1},d(m){m&&_(e),m&&_(n),m&&_(i),m&&_(f),m&&_(o),X(r)}}}function qn(a){let e,t=Ie.nodata+"",l;return{c(){e=w("div"),l=K(t),this.h()},l(n){e=y(n,"DIV",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-12pd6wz")},m(n,i){p(n,e,i),v(e,l)},p:q,i:q,o:q,d(n){n&&_(e)}}}function Un(a){let e,t,l,n;const i=[qn,Wn],s=[];function f(o,r){return o[0].selected.total_pop==0?0:1}return e=f(a),t=s[e]=i[e](a),{c(){t.c(),l=R()},l(o){t.l(o),l=R()},m(o,r){s[e].m(o,r),p(o,l,r),n=!0},p(o,r){let c=e;e=f(o),e===c?s[e].p(o,r):(ne(),A(s[c],1,1,()=>{s[c]=null}),ie(),t=s[e],t?t.p(o,r):(t=s[e]=i[e](o),t.c()),T(t,1),t.m(l.parentNode,l))},i(o){n||(T(t),n=!0)},o(o){A(t),n=!1},d(o){s[e].d(o),o&&_(l)}}}function Gn(a){let e,t;return e=new ge({props:{title:"Population",$$slots:{default:[Un]},$$scope:{ctx:a}}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,[n]){const i={};n&3&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Zn(a,e,t){let{data:l}=e;return a.$$set=n=>{"data"in n&&t(0,l=n.data)},[l]}class Xn extends Q{constructor(e){super();$(this,e,Zn,Gn,x,{data:0})}}function Jn(a){let e,t,l,n,i=`translateX(${a[3]/a[1]+(a[1]-a[4])}px)`,s,f=`${a[2]}px`,o=`${a[4]}px`;return{c(){e=w("div"),t=K(a[0]),l=V(),n=w("div"),this.h()},l(r){e=y(r,"DIV",{class:!0});var c=C(e);t=M(c,a[0]),l=N(c),n=y(c,"DIV",{class:!0}),C(n).forEach(_),c.forEach(_),this.h()},h(){k(n,"class","caret svelte-1491tb3"),I(n,"transform",i,!1),k(e,"class","tooltip svelte-1491tb3"),zt(()=>a[6].call(e)),I(e,"top",f,!1),I(e,"left",o,!1)},m(r,c){p(r,e,c),v(e,t),v(e,l),v(e,n),s=Tt(e,a[6].bind(e))},p(r,[c]){c&1&&W(t,r[0]),c&26&&i!==(i=`translateX(${r[3]/r[1]+(r[1]-r[4])}px)`)&&I(n,"transform",i,!1),c&4&&f!==(f=`${r[2]}px`)&&I(e,"top",f,!1),c&16&&o!==(o=`${r[4]}px`)&&I(e,"left",o,!1)},i:q,o:q,d(r){r&&_(e),s()}}}const ze=4;function Yn(a,e,t){let l,{title:n}=e,{x:i}=e,{y:s}=e,{width:f}=e,o;function r(){o=this.clientWidth,t(3,o)}return a.$$set=c=>{"title"in c&&t(0,n=c.title),"x"in c&&t(1,i=c.x),"y"in c&&t(2,s=c.y),"width"in c&&t(5,f=c.width)},a.$$.update=()=>{a.$$.dirty&42&&t(4,l=o&&i+o/2>f-ze?f-o/2-ze:o&&i-o/2<0+ze?o/2+ze:i)},[n,i,s,o,l,f,r]}class Qn extends Q{constructor(e){super();$(this,e,Yn,Jn,x,{title:0,x:1,y:2,width:5})}}function $n(a){let e,t;function l(i){e=a.getAttribute("title"),a.removeAttribute("title");let s=document.body.getBoundingClientRect(),f=a.getBoundingClientRect(),o=f.bottom,r=(f.left+f.right)/2;t=new Qn({props:{title:e,x:r,y:o-s.y,width:s.width},target:document.body})}function n(){t.$destroy(),a.setAttribute("title",e)}return a.addEventListener("mouseover",l),a.addEventListener("mouseout",n),{destroy(){t&&t.$destroy(),a.removeEventListener("mouseover",l),a.removeEventListener("mouseout",n)}}}function gl(a,e,t){const l=a.slice();return l[19]=e[t],l[21]=t,l}function bl(a,e,t){const l=a.slice();return l[22]=e[t],l[24]=t,l}function vl(a,e,t){const l=a.slice();return l[22]=e[t],l[24]=t,l}function kl(a,e,t){const l=a.slice();return l[26]=e[t],l[21]=t,l}function pl(a){let e,t=a[11],l=[];for(let n=0;n<t.length;n+=1)l[n]=wl(kl(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);p(n,e,i)},p(n,i){if(i&2064){t=n[11];let s;for(s=0;s<t.length;s+=1){const f=kl(n,t,s);l[s]?l[s].p(f,i):(l[s]=wl(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){te(l,n),n&&_(e)}}}function wl(a){let e,t,l=`${a[21]==0?0:a[4]}px`,n,i,s=a[26]+"",f,o,r;return{c(){e=w("li"),t=w("div"),n=V(),i=w("span"),f=K(s),r=V(),this.h()},l(c){e=y(c,"LI",{class:!0});var d=C(e);t=y(d,"DIV",{class:!0}),C(t).forEach(_),n=N(d),i=y(d,"SPAN",{class:!0});var u=C(i);f=M(u,s),u.forEach(_),r=N(d),d.forEach(_),this.h()},h(){k(t,"class","legend-vis "+(a[21]==0?"bar":"marker-vis")+" svelte-1hf4ghf"),I(t,"border-bottom-width",l,!1),k(i,"class",o=Ee(a[21]==0?"bold":"brackets")+" svelte-1hf4ghf"),k(e,"class","svelte-1hf4ghf")},m(c,d){p(c,e,d),v(e,t),v(e,n),v(e,i),v(i,f),v(e,r)},p(c,d){d&16&&l!==(l=`${c[21]==0?0:c[4]}px`)&&I(t,"border-bottom-width",l,!1),d&2048&&s!==(s=c[26]+"")&&W(f,s)},d(c){c&&_(e)}}}function xn(a){let e,t=a[19].values,l=[];for(let n=0;n<t.length;n+=1)l[n]=yl(bl(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);p(n,e,i)},p(n,i){if(i&5650){t=n[19].values;let s;for(s=0;s<t.length;s+=1){const f=bl(n,t,s);l[s]?l[s].p(f,i):(l[s]=yl(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){te(l,n),n&&_(e)}}}function ei(a){let e,t=a[19].values,l=[];for(let n=0;n<t.length;n+=1)l[n]=El(vl(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);p(n,e,i)},p(n,i){if(i&5639){t=n[19].values;let s;for(s=0;s<t.length;s+=1){const f=vl(n,t,s);l[s]?l[s].p(f,i):(l[s]=El(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){te(l,n),n&&_(e)}}}function yl(a){let e,t=`calc(${a[10](a[22][a[1]])}% - ${a[4]/2}px)`,l=`${a[24]/a[12].length*100}%`,n=`calc(${1/a[12].length*100}% - 2px)`,i=`${a[4]}px`;return{c(){e=w("div"),this.h()},l(s){e=y(s,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","marker svelte-1hf4ghf"),I(e,"bottom",t,!1),I(e,"height","0px",!1),I(e,"left",l,!1),I(e,"width",n,!1),I(e,"border-bottom-width",i,!1)},m(s,f){p(s,e,f)},p(s,f){f&1554&&t!==(t=`calc(${s[10](s[22][s[1]])}% - ${s[4]/2}px)`)&&I(e,"bottom",t,!1),f&4096&&l!==(l=`${s[24]/s[12].length*100}%`)&&I(e,"left",l,!1),f&4096&&n!==(n=`calc(${1/s[12].length*100}% - 2px)`)&&I(e,"width",n,!1),f&16&&i!==(i=`${s[4]}px`)&&I(e,"border-bottom-width",i,!1)},d(s){s&&_(e)}}}function El(a){let e,t,l,n=`${a[10](a[22][a[1]])}%`,i=`calc(${a[24]/a[12].length*100}%)`,s=`calc(${1/a[12].length*100}% - 2px)`,f,o;return{c(){e=w("div"),this.h()},l(r){e=y(r,"DIV",{title:!0,class:!0}),C(e).forEach(_),this.h()},h(){k(e,"title",t=`${a[22][a[0]]}: ${a[2](a[22][a[1]])}%`+(a[9].length>1?` (${a[2](a[9][a[21]+1].values[a[24]][a[1]])}%)`:"")),k(e,"class","bar svelte-1hf4ghf"),I(e,"bottom","0",!1),I(e,"height",n,!1),I(e,"left",i,!1),I(e,"width",s,!1)},m(r,c){p(r,e,c),f||(o=Wt(l=$n.call(null,e)),f=!0)},p(r,c){c&519&&t!==(t=`${r[22][r[0]]}: ${r[2](r[22][r[1]])}%`+(r[9].length>1?` (${r[2](r[9][r[21]+1].values[r[24]][r[1]])}%)`:""))&&k(e,"title",t),c&1538&&n!==(n=`${r[10](r[22][r[1]])}%`)&&I(e,"height",n,!1),c&4096&&i!==(i=`calc(${r[24]/r[12].length*100}%)`)&&I(e,"left",i,!1),c&4096&&s!==(s=`calc(${1/r[12].length*100}% - 2px)`)&&I(e,"width",s,!1)},d(r){r&&_(e),f=!1,o()}}}function Cl(a){let e;function t(i,s){return i[21]==0?ei:xn}let n=t(a)(a);return{c(){n.c(),e=R()},l(i){n.l(i),e=R()},m(i,s){n.m(i,s),p(i,e,s)},p(i,s){n.p(i,s)},d(i){n.d(i),i&&_(e)}}}function Dl(a){let e,t,l=a[6][0]!=0&&Sl(a),n=a[6][1]!=18&&Il(a);return{c(){l&&l.c(),e=V(),n&&n.c(),t=R()},l(i){l&&l.l(i),e=N(i),n&&n.l(i),t=R()},m(i,s){l&&l.m(i,s),p(i,e,s),n&&n.m(i,s),p(i,t,s)},p(i,s){i[6][0]!=0?l?l.p(i,s):(l=Sl(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),i[6][1]!=18?n?n.p(i,s):(n=Il(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(i){l&&l.d(i),i&&_(e),n&&n.d(i),i&&_(t)}}}function Sl(a){let e,t=`${a[14](a[9])}%`;return{c(){e=w("div"),this.h()},l(l){e=y(l,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","mask svelte-1hf4ghf"),I(e,"bottom","0",!1),I(e,"height",t,!1),I(e,"left","0",!1),I(e,"width",a[13](a[6][0]),!1)},m(l,n){p(l,e,n)},p(l,n){n&512&&t!==(t=`${l[14](l[9])}%`)&&I(e,"height",t,!1),n&64&&I(e,"width",l[13](l[6][0]),!1)},d(l){l&&_(e)}}}function Il(a){let e,t=`${a[14](a[9])}%`;return{c(){e=w("div"),this.h()},l(l){e=y(l,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","mask svelte-1hf4ghf"),I(e,"bottom","0",!1),I(e,"height",t,!1),I(e,"left",a[13](a[6][1]),!1),I(e,"right","2px",!1)},m(l,n){p(l,e,n)},p(l,n){n&512&&t!==(t=`${l[14](l[9])}%`)&&I(e,"height",t,!1),n&64&&I(e,"left",l[13](l[6][1]),!1)},d(l){l&&_(e)}}}function zl(a){let e,t,l;return{c(){e=w("small"),t=K(a[7]),l=K(a[8]),this.h()},l(n){e=y(n,"SMALL",{class:!0});var i=C(e);t=M(i,a[7]),l=M(i,a[8]),i.forEach(_),this.h()},h(){k(e,"class","svelte-1hf4ghf")},m(n,i){p(n,e,i),v(e,t),v(e,l)},p(n,i){i&128&&W(t,n[7]),i&256&&W(l,n[8])},d(n){n&&_(e)}}}function li(a){let e,t,l,n,i=`${a[3]}px`,s,f,o,r=a[5][0]+"",c,d,u,h=a[5][1]+"",m,b,E,g=a[11][1]&&pl(a),S=a[9],j=[];for(let D=0;D<S.length;D+=1)j[D]=Cl(gl(a,S,D));let z=a[6]!=null&&Dl(a),L=a[7]&&zl(a);return{c(){e=w("ul"),g&&g.c(),t=V(),l=w("div");for(let D=0;D<j.length;D+=1)j[D].c();n=V(),z&&z.c(),s=V(),f=w("div"),o=w("div"),c=K(r),d=V(),u=w("div"),m=K(h),b=V(),L&&L.c(),E=R(),this.h()},l(D){e=y(D,"UL",{class:!0});var O=C(e);g&&g.l(O),O.forEach(_),t=N(D),l=y(D,"DIV",{class:!0});var H=C(l);for(let U=0;U<j.length;U+=1)j[U].l(H);n=N(H),z&&z.l(H),H.forEach(_),s=N(D),f=y(D,"DIV",{class:!0});var P=C(f);o=y(P,"DIV",{class:!0});var F=C(o);c=M(F,r),F.forEach(_),d=N(P),u=y(P,"DIV",{class:!0});var Y=C(u);m=M(Y,h),Y.forEach(_),P.forEach(_),b=N(D),L&&L.l(D),E=R(),this.h()},h(){k(e,"class","legend-block svelte-1hf4ghf"),k(l,"class","bar-group svelte-1hf4ghf"),I(l,"height",i,!1),k(o,"class","svelte-1hf4ghf"),I(o,"left","0",!1),k(u,"class","svelte-1hf4ghf"),I(u,"right","0",!1),k(f,"class","x-scale svelte-1hf4ghf"),I(f,"height","1rem",!1)},m(D,O){p(D,e,O),g&&g.m(e,null),p(D,t,O),p(D,l,O);for(let H=0;H<j.length;H+=1)j[H].m(l,null);v(l,n),z&&z.m(l,null),p(D,s,O),p(D,f,O),v(f,o),v(o,c),v(f,d),v(f,u),v(u,m),p(D,b,O),L&&L.m(D,O),p(D,E,O)},p(D,[O]){if(D[11][1]?g?g.p(D,O):(g=pl(D),g.c(),g.m(e,null)):g&&(g.d(1),g=null),O&5655){S=D[9];let H;for(H=0;H<S.length;H+=1){const P=gl(D,S,H);j[H]?j[H].p(P,O):(j[H]=Cl(P),j[H].c(),j[H].m(l,n))}for(;H<j.length;H+=1)j[H].d(1);j.length=S.length}D[6]!=null?z?z.p(D,O):(z=Dl(D),z.c(),z.m(l,null)):z&&(z.d(1),z=null),O&8&&i!==(i=`${D[3]}px`)&&I(l,"height",i,!1),O&32&&r!==(r=D[5][0]+"")&&W(c,r),O&32&&h!==(h=D[5][1]+"")&&W(m,h),D[7]?L?L.p(D,O):(L=zl(D),L.c(),L.m(E.parentNode,E)):L&&(L.d(1),L=null)},i:q,o:q,d(D){D&&_(e),g&&g.d(),D&&_(t),D&&_(l),te(j,D),z&&z.d(),D&&_(s),D&&_(f),D&&_(b),L&&L.d(D),D&&_(E)}}}function ti(a,e,t){let l,n,i,s,f,{data:o}=e,{xKey:r="category"}=e,{yKey:c="value"}=e,{zKey:d="areanm"}=e,{formatTick:u=D=>D.toFixed(1)}=e,{height:h=100}=e,{markerWidth:m=2.5}=e,{minmax:b=["0 years","85+"]}=e,{maskRange:E=null}=e,{base:g=null}=e,{base_ext:S=", 5 year age bands"}=e;function j(D,O){let H={};for(const F of D)H[F[O]]||(H[F[O]]={label:F[O],values:[]}),H[F[O]].values.push(F);let P=[];for(const F in H)P.push(H[F]);return P}function z(D){return D%1===0?`calc(${D/l.length*100}% - 1px)`:`calc(${Math.floor(D)/l.length*100}% +(${1/l.length*100}% - 2px) * ${D%1})`}function L(D){return Math.max(...D.map(O=>Math.max(...O.values.map(H=>s(H[c])))))}return a.$$set=D=>{"data"in D&&t(15,o=D.data),"xKey"in D&&t(0,r=D.xKey),"yKey"in D&&t(1,c=D.yKey),"zKey"in D&&t(16,d=D.zKey),"formatTick"in D&&t(2,u=D.formatTick),"height"in D&&t(3,h=D.height),"markerWidth"in D&&t(4,m=D.markerWidth),"minmax"in D&&t(5,b=D.minmax),"maskRange"in D&&t(6,E=D.maskRange),"base"in D&&t(7,g=D.base),"base_ext"in D&&t(8,S=D.base_ext)},a.$$.update=()=>{a.$$.dirty&32769&&t(12,l=o.map(D=>D[r]).filter((D,O,H)=>H.indexOf(D)===O)),a.$$.dirty&32770&&t(17,n=[0,Math.max(...o.map(D=>D[c]))]),a.$$.dirty&98304&&t(11,i=o.map(D=>D[d]).filter((D,O,H)=>H.indexOf(D)===O)),a.$$.dirty&131072&&t(10,s=D=>Math.abs(D/n[1])*100),a.$$.dirty&98304&&t(9,f=j(o,d))},[r,c,u,h,m,b,E,g,S,f,s,i,l,z,L,o,d,n]}class ni extends Q{constructor(e){super();$(this,e,ti,li,x,{data:15,xKey:0,yKey:1,zKey:16,formatTick:2,height:3,markerWidth:4,minmax:5,maskRange:6,base:7,base_ext:8})}}function ii(a){let e,t;return e=new ni({props:{data:a[0].selected&&Ne("residents","resident_age_18b",a[0]),zKey:"group",maskRange:Ge(a[1])}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n&1&&(i.data=l[0].selected&&Ne("residents","resident_age_18b",l[0])),n&2&&(i.maskRange=Ge(l[1])),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function ai(a){let e,t=Ie.nodata+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-uj0r62")},m(n,i){p(n,e,i),v(e,l)},p:q,i:q,o:q,d(n){n&&_(e)}}}function si(a){let e,t=Ie.nodata+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-uj0r62")},m(n,i){p(n,e,i),v(e,l)},p:q,i:q,o:q,d(n){n&&_(e)}}}function oi(a){let e,t,l,n;const i=[si,ai,ii],s=[];function f(o,r){return o[0].selected.residents.resident_age_18b.values==="blocked"?0:o[0].selected.residents.resident_age_18b.values.percent[0]==null?1:2}return e=f(a),t=s[e]=i[e](a),{c(){t.c(),l=R()},l(o){t.l(o),l=R()},m(o,r){s[e].m(o,r),p(o,l,r),n=!0},p(o,r){let c=e;e=f(o),e===c?s[e].p(o,r):(ne(),A(s[c],1,1,()=>{s[c]=null}),ie(),t=s[e],t?t.p(o,r):(t=s[e]=i[e](o),t.c()),T(t,1),t.m(l.parentNode,l))},i(o){n||(T(t),n=!0)},o(o){A(t),n=!1},d(o){s[e].d(o),o&&_(l)}}}function fi(a){let e,t;return e=new ge({props:{title:"Age profile",$$slots:{default:[oi]},$$scope:{ctx:a}}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,[n]){const i={};n&7&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function ri(a,e,t){let{data:l}=e,{selected:n}=e;return a.$$set=i=>{"data"in i&&t(0,l=i.data),"selected"in i&&t(1,n=i.selected)},[l,n]}class ci extends Q{constructor(e){super();$(this,e,ri,fi,x,{data:0,selected:1})}}be.disable_scroll_handling;const Me=be.goto;be.invalidate;be.prefetch;be.prefetch_routes;be.before_navigate;const ui=be.after_navigate;function Tl(a,e,t){const l=a.slice();return l[2]=e[t],l}function hi(a){let e=a[2].label+"",t;return{c(){t=K(e)},l(l){t=M(l,e)},m(l,n){p(l,t,n)},p(l,n){n&1&&e!==(e=l[2].label+"")&&W(t,e)},d(l){l&&_(t)}}}function _i(a){let e,t=a[2].label+"",l,n;return{c(){e=w("a"),l=K(t),this.h()},l(i){e=y(i,"A",{class:!0,href:!0});var s=C(e);l=M(s,t),s.forEach(_),this.h()},h(){k(e,"class","breadcrumb__link"),k(e,"href",n=a[2].url)},m(i,s){p(i,e,s),v(e,l)},p(i,s){s&1&&t!==(t=i[2].label+"")&&W(l,t),s&1&&n!==(n=i[2].url)&&k(e,"href",n)},d(i){i&&_(e)}}}function Pl(a){let e,t;function l(s,f){return s[2].url?_i:hi}let n=l(a),i=n(a);return{c(){e=w("li"),i.c(),t=V(),this.h()},l(s){e=y(s,"LI",{class:!0});var f=C(e);i.l(f),t=N(f),f.forEach(_),this.h()},h(){k(e,"class","breadcrumb__item")},m(s,f){p(s,e,f),i.m(e,null),v(e,t)},p(s,f){n===(n=l(s))&&i?i.p(s,f):(i.d(1),i=n(s),i&&(i.c(),i.m(e,t)))},d(s){s&&_(e),i.d()}}}function di(a){let e,t,l,n,i,s,f,o,r=a[0],c=[];for(let d=0;d<r.length;d+=1)c[d]=Pl(Tl(a,r,d));return{c(){e=w("nav"),t=w("div"),l=w("ol"),n=w("li"),i=w("a"),s=K("Home"),f=V();for(let d=0;d<c.length;d+=1)c[d].c();this.h()},l(d){e=y(d,"NAV",{"aria-label":!0});var u=C(e);t=y(u,"DIV",{class:!0});var h=C(t);l=y(h,"OL",{class:!0});var m=C(l);n=y(m,"LI",{class:!0});var b=C(n);i=y(b,"A",{class:!0,href:!0});var E=C(i);s=M(E,"Home"),E.forEach(_),b.forEach(_),f=N(m);for(let g=0;g<c.length;g+=1)c[g].l(m);m.forEach(_),h.forEach(_),u.forEach(_),this.h()},h(){k(i,"class","breadcrumb__link"),k(i,"href","/"),k(n,"class","breadcrumb__item"),k(l,"class","breadcrumb__list"),k(t,"class",o=(a[1]=="neutral"?"breadcrumb-neutral":"breadcrumb")+" print--hide"),k(e,"aria-label","Breadcrumbs")},m(d,u){p(d,e,u),v(e,t),v(t,l),v(l,n),v(n,i),v(i,s),v(l,f);for(let h=0;h<c.length;h+=1)c[h].m(l,null)},p(d,[u]){if(u&1){r=d[0];let h;for(h=0;h<r.length;h+=1){const m=Tl(d,r,h);c[h]?c[h].p(m,u):(c[h]=Pl(m),c[h].c(),c[h].m(l,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=r.length}u&2&&o!==(o=(d[1]=="neutral"?"breadcrumb-neutral":"breadcrumb")+" print--hide")&&k(t,"class",o)},i:q,o:q,d(d){d&&_(e),te(c,d)}}}function mi(a,e,t){let{links:l=[]}=e,{mode:n="neutral"}=e;return a.$$set=i=>{"links"in i&&t(0,l=i.links),"mode"in i&&t(1,n=i.mode)},[l,n]}class gi extends Q{constructor(e){super();$(this,e,mi,di,x,{links:0,mode:1})}}function Vl(a,e,t){const l=a.slice();return l[2]=e[t],l}function Nl(a){let e,t,l=a[2].label+"",n,i,s,f;return{c(){e=w("li"),t=w("a"),n=K(l),f=V(),this.h()},l(o){e=y(o,"LI",{});var r=C(e);t=y(r,"A",{href:!0,"data-gtm-title":!0,"data-gtm-type":!0});var c=C(t);n=M(c,l),c.forEach(_),f=N(r),r.forEach(_),this.h()},h(){k(t,"href",i=a[2].url),k(t,"data-gtm-title",s=a[2].label),k(t,"data-gtm-type","highlighted-links")},m(o,r){p(o,e,r),v(e,t),v(t,n),v(e,f)},p(o,r){r&2&&l!==(l=o[2].label+"")&&W(n,l),r&2&&i!==(i=o[2].url)&&k(t,"href",i),r&2&&s!==(s=o[2].label)&&k(t,"data-gtm-title",s)},d(o){o&&_(e)}}}function bi(a){let e,t,l,n,i,s=a[1],f=[];for(let o=0;o<s.length;o+=1)f[o]=Nl(Vl(a,s,o));return{c(){e=w("div"),t=w("h2"),l=K(a[0]),n=V(),i=w("ul");for(let o=0;o<f.length;o+=1)f[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0});var r=C(e);t=y(r,"H2",{class:!0});var c=C(t);l=M(c,a[0]),c.forEach(_),n=N(r),i=y(r,"UL",{class:!0});var d=C(i);for(let u=0;u<f.length;u+=1)f[u].l(d);d.forEach(_),r.forEach(_),this.h()},h(){k(t,"class","margin-top-lg--1"),k(i,"class","list--neutral margin-top--negative-one-fix"),k(e,"class","nav-secondary--border-left-lg col col--md-47 col--lg-19 col--lg-offset-2 padding-left margin-top-lg--3")},m(o,r){p(o,e,r),v(e,t),v(t,l),v(e,n),v(e,i);for(let c=0;c<f.length;c+=1)f[c].m(i,null)},p(o,[r]){if(r&1&&W(l,o[0]),r&2){s=o[1];let c;for(c=0;c<s.length;c+=1){const d=Vl(o,s,c);f[c]?f[c].p(d,r):(f[c]=Nl(d),f[c].c(),f[c].m(i,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=s.length}},i:q,o:q,d(o){o&&_(e),te(f,o)}}}function vi(a,e,t){let{title:l="Highlighted content"}=e,{links:n=[]}=e;return a.$$set=i=>{"title"in i&&t(0,l=i.title),"links"in i&&t(1,n=i.links)},[l,n]}class ki extends Q{constructor(e){super();$(this,e,vi,bi,x,{title:0,links:1})}}function Al(a,e,t){const l=a.slice();return l[2]=e[t],l}function pi(a){let e,t=a[2].label+"",l;return{c(){e=w("li"),l=K(t),this.h()},l(n){e=y(n,"LI",{class:!0,"aria-current":!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","ons-list__item svelte-1dyzlhu"),k(e,"aria-current","true")},m(n,i){p(n,e,i),v(e,l)},p(n,i){i&2&&t!==(t=n[2].label+"")&&W(l,t)},d(n){n&&_(e)}}}function wi(a){let e,t,l=a[2].label+"",n,i,s;return{c(){e=w("li"),t=w("a"),n=K(l),s=V(),this.h()},l(f){e=y(f,"LI",{class:!0});var o=C(e);t=y(o,"A",{href:!0,class:!0});var r=C(t);n=M(r,l),r.forEach(_),s=N(o),o.forEach(_),this.h()},h(){k(t,"href",i=a[2].url),k(t,"class","ons-list__link"),k(e,"class","ons-list__item svelte-1dyzlhu")},m(f,o){p(f,e,o),v(e,t),v(t,n),v(e,s)},p(f,o){o&2&&l!==(l=f[2].label+"")&&W(n,l),o&2&&i!==(i=f[2].url)&&k(t,"href",i)},d(f){f&&_(e)}}}function Ll(a){let e;function t(i,s){return i[2].url?wi:pi}let l=t(a),n=l(a);return{c(){n.c(),e=R()},l(i){n.l(i),e=R()},m(i,s){n.m(i,s),p(i,e,s)},p(i,s){l===(l=t(i))&&n?n.p(i,s):(n.d(1),n=l(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){n.d(i),i&&_(e)}}}function yi(a){let e,t,l,n,i,s=a[1],f=[];for(let o=0;o<s.length;o+=1)f[o]=Ll(Al(a,s,o));return{c(){e=w("nav"),t=w("h2"),l=K(a[0]),n=V(),i=w("ol");for(let o=0;o<f.length;o+=1)f[o].c();this.h()},l(o){e=y(o,"NAV",{class:!0,"aria-label":!0});var r=C(e);t=y(r,"H2",{class:!0});var c=C(t);l=M(c,a[0]),c.forEach(_),n=N(r),i=y(r,"OL",{class:!0});var d=C(i);for(let u=0;u<f.length;u+=1)f[u].l(d);d.forEach(_),r.forEach(_),this.h()},h(){k(t,"class","ons-toc__title ons-u-fs-r--b ons-u-mb-s svelte-1dyzlhu"),k(i,"class","ons-list ons-u-mb-m ons-list--dashed svelte-1dyzlhu"),k(e,"class","ons-toc svelte-1dyzlhu"),k(e,"aria-label","Pages in this guide")},m(o,r){p(o,e,r),v(e,t),v(t,l),v(e,n),v(e,i);for(let c=0;c<f.length;c+=1)f[c].m(i,null)},p(o,[r]){if(r&1&&W(l,o[0]),r&2){s=o[1];let c;for(c=0;c<s.length;c+=1){const d=Al(o,s,c);f[c]?f[c].p(d,r):(f[c]=Ll(d),f[c].c(),f[c].m(i,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=s.length}},i:q,o:q,d(o){o&&_(e),te(f,o)}}}function Ei(a,e,t){let{label:l="Contents"}=e,{links:n=[]}=e;return a.$$set=i=>{"label"in i&&t(0,l=i.label),"links"in i&&t(1,n=i.links)},[l,n]}class Ci extends Q{constructor(e){super();$(this,e,Ei,yi,x,{label:0,links:1})}}function Di(a){let e,t,l,n,i,s,f,o,r;return{c(){e=w("div"),t=w("div"),l=w("dl"),n=w("div"),i=w("dt"),s=K(a[1]),f=K(":"),o=V(),r=w("dd"),this.h()},l(c){e=y(c,"DIV",{class:!0});var d=C(e);t=y(d,"DIV",{class:!0});var u=C(t);l=y(u,"DL",{class:!0});var h=C(l);n=y(h,"DIV",{class:!0});var m=C(n);i=y(m,"DT",{class:!0});var b=C(i);s=M(b,a[1]),f=M(b,":"),b.forEach(_),o=N(m),r=y(m,"DD",{class:!0});var E=C(r);E.forEach(_),m.forEach(_),h.forEach(_),u.forEach(_),d.forEach(_),this.h()},h(){k(i,"class","meta__term inline"),k(r,"class","inline"),k(n,"class","col padding-left--0 meta__item meta__item--no-border"),k(l,"class","col-wrap"),k(t,"class","wrapper"),k(e,"class","meta-wrap--thin"),ae(e,"meta-wrap",a[0]=="grey")},m(c,d){p(c,e,d),v(e,t),v(t,l),v(l,n),v(n,i),v(i,s),v(i,f),v(n,o),v(n,r),r.innerHTML=a[2]},p(c,[d]){d&2&&W(s,c[1]),d&4&&(r.innerHTML=c[2]),d&1&&ae(e,"meta-wrap",c[0]=="grey")},i:q,o:q,d(c){c&&_(e)}}}function Si(a,e,t){let{background:l="grey"}=e,{label:n="Last updated"}=e,{value:i="date"}=e;return a.$$set=s=>{"background"in s&&t(0,l=s.background),"label"in s&&t(1,n=s.label),"value"in s&&t(2,i=s.value)},[l,n,i]}class Ii extends Q{constructor(e){super();$(this,e,Si,Di,x,{background:0,label:1,value:2})}}const zi=a=>({}),jl=a=>({});function Kl(a){let e,t;return e=new gi({props:{links:a[2],mode:a[0]}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n&4&&(i.links=l[2]),n&1&&(i.mode=l[0]),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Ml(a){let e,t;return{c(){e=w("p"),t=K(a[6]),this.h()},l(l){e=y(l,"P",{class:!0});var n=C(e);t=M(n,a[6]),n.forEach(_),this.h()},h(){k(e,"class","page-neutral-intro__meta margin-top--0 margin-bottom--3")},m(l,n){p(l,e,n),v(e,t)},p(l,n){n&64&&W(t,l[6])},d(l){l&&_(e)}}}function Bl(a){let e,t;return e=new Ci({props:{links:a[3],label:"Contents"}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n&8&&(i.links=l[3]),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Ol(a){let e,t;return e=new ki({props:{links:a[4]}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n&16&&(i.links=l[4]),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Fl(a){let e,t;return e=new Ii({props:{label:"Last updated",value:a[5],background:a[1]}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n&32&&(i.value=l[5]),n&2&&(i.background=l[1]),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Hl(a){let e,t,l,n;return{c(){e=w("div"),t=w("div"),l=w("div"),n=w("hr"),this.h()},l(i){e=y(i,"DIV",{class:!0});var s=C(e);t=y(s,"DIV",{class:!0});var f=C(t);l=y(f,"DIV",{class:!0});var o=C(l);n=y(o,"HR",{style:!0}),o.forEach(_),f.forEach(_),s.forEach(_),this.h()},h(){I(n,"border","0"),I(n,"height","0"),I(n,"border-top","1px solid #808080"),k(l,"class","col"),k(t,"class","col-wrap"),k(e,"class","wrapper")},m(i,s){p(i,e,s),v(e,t),v(t,l),v(l,n)},d(i){i&&_(e)}}}function Ti(a){let e,t,l,n,i,s,f,o,r,c,d,u,h,m,b=a[2]&&Kl(a);const E=a[8].default,g=oe(E,a,a[7],null);let S=a[6]&&Ml(a),j=a[3]&&Bl(a),z=a[4]&&Ol(a);const L=a[8].meta,D=oe(L,a,a[7],jl);let O=a[5]&&Fl(a),H=a[1]=="none"&&Hl();return{c(){e=w("div"),t=w("div"),l=w("div"),n=w("div"),b&&b.c(),i=V(),s=w("div"),g&&g.c(),f=V(),S&&S.c(),o=V(),j&&j.c(),r=V(),z&&z.c(),c=V(),D&&D.c(),d=V(),O&&O.c(),u=V(),H&&H.c(),this.h()},l(P){e=y(P,"DIV",{class:!0});var F=C(e);t=y(F,"DIV",{class:!0});var Y=C(t);l=y(Y,"DIV",{class:!0});var U=C(l);n=y(U,"DIV",{class:!0});var ee=C(n);b&&b.l(ee),i=N(ee),s=y(ee,"DIV",{class:!0});var ue=C(s);g&&g.l(ue),f=N(ue),S&&S.l(ue),o=N(ue),j&&j.l(ue),ue.forEach(_),r=N(ee),z&&z.l(ee),ee.forEach(_),U.forEach(_),Y.forEach(_),c=N(F),D&&D.l(F),d=N(F),O&&O.l(F),u=N(F),H&&H.l(F),F.forEach(_),this.h()},h(){k(s,"class","col col--md-47"),ae(s,"col--lg-38",a[4]),ae(s,"col--lg-48",!a[4]),k(n,"class","col"),k(l,"class","col-wrap"),k(t,"class","wrapper"),k(e,"class",h="page-neutral-intro "+(a[1]=="grey"?"background--gallery":""))},m(P,F){p(P,e,F),v(e,t),v(t,l),v(l,n),b&&b.m(n,null),v(n,i),v(n,s),g&&g.m(s,null),v(s,f),S&&S.m(s,null),v(s,o),j&&j.m(s,null),v(n,r),z&&z.m(n,null),v(e,c),D&&D.m(e,null),v(e,d),O&&O.m(e,null),v(e,u),H&&H.m(e,null),m=!0},p(P,[F]){P[2]?b?(b.p(P,F),F&4&&T(b,1)):(b=Kl(P),b.c(),T(b,1),b.m(n,i)):b&&(ne(),A(b,1,1,()=>{b=null}),ie()),g&&g.p&&(!m||F&128)&&fe(g,E,P,P[7],m?ce(E,P[7],F,null):re(P[7]),null),P[6]?S?S.p(P,F):(S=Ml(P),S.c(),S.m(s,o)):S&&(S.d(1),S=null),P[3]?j?(j.p(P,F),F&8&&T(j,1)):(j=Bl(P),j.c(),T(j,1),j.m(s,null)):j&&(ne(),A(j,1,1,()=>{j=null}),ie()),F&16&&ae(s,"col--lg-38",P[4]),F&16&&ae(s,"col--lg-48",!P[4]),P[4]?z?(z.p(P,F),F&16&&T(z,1)):(z=Ol(P),z.c(),T(z,1),z.m(n,null)):z&&(ne(),A(z,1,1,()=>{z=null}),ie()),D&&D.p&&(!m||F&128)&&fe(D,L,P,P[7],m?ce(L,P[7],F,zi):re(P[7]),jl),P[5]?O?(O.p(P,F),F&32&&T(O,1)):(O=Fl(P),O.c(),T(O,1),O.m(e,u)):O&&(ne(),A(O,1,1,()=>{O=null}),ie()),P[1]=="none"?H||(H=Hl(),H.c(),H.m(e,null)):H&&(H.d(1),H=null),(!m||F&2&&h!==(h="page-neutral-intro "+(P[1]=="grey"?"background--gallery":"")))&&k(e,"class",h)},i(P){m||(T(b),T(g,P),T(j),T(z),T(D,P),T(O),m=!0)},o(P){A(b),A(g,P),A(j),A(z),A(D,P),A(O),m=!1},d(P){P&&_(e),b&&b.d(),g&&g.d(P),S&&S.d(),j&&j.d(),z&&z.d(),D&&D.d(P),O&&O.d(),H&&H.d()}}}function Pi(a,e,t){let{$$slots:l={},$$scope:n}=e,{mode:i="neutral"}=e,{background:s="grey"}=e,{breadcrumb:f=null}=e,{contents:o=null}=e,{highlighted:r=null}=e,{updated:c=null}=e,{date:d=null}=e;return pe("mode",i),pe("background",s),a.$$set=u=>{"mode"in u&&t(0,i=u.mode),"background"in u&&t(1,s=u.background),"breadcrumb"in u&&t(2,f=u.breadcrumb),"contents"in u&&t(3,o=u.contents),"highlighted"in u&&t(4,r=u.highlighted),"updated"in u&&t(5,c=u.updated),"date"in u&&t(6,d=u.date),"$$scope"in u&&t(7,n=u.$$scope)},[i,s,f,o,r,c,d,n,l]}class Vi extends Q{constructor(e){super();$(this,e,Pi,Ti,x,{mode:0,background:1,breadcrumb:2,contents:3,highlighted:4,updated:5,date:6})}}function Ni(a){let e,t,l;const n=a[2].default,i=oe(n,a,a[1],null);return{c(){e=w("h1"),i&&i.c(),this.h()},l(s){e=y(s,"H1",{class:!0});var f=C(e);i&&i.l(f),f.forEach(_),this.h()},h(){k(e,"class",t=a[0]=="neutral"?"page-neutral-intro__title":"page-intro__title")},m(s,f){p(s,e,f),i&&i.m(e,null),l=!0},p(s,[f]){i&&i.p&&(!l||f&2)&&fe(i,n,s,s[1],l?ce(n,s[1],f,null):re(s[1]),null),(!l||f&1&&t!==(t=s[0]=="neutral"?"page-neutral-intro__title":"page-intro__title"))&&k(e,"class",t)},i(s){l||(T(i,s),l=!0)},o(s){A(i,s),l=!1},d(s){s&&_(e),i&&i.d(s)}}}function Ai(a,e,t){let{$$slots:l={},$$scope:n}=e,{mode:i=Ce("mode")}=e;return a.$$set=s=>{"mode"in s&&t(0,i=s.mode),"$$scope"in s&&t(1,n=s.$$scope)},[i,n,l]}class Li extends Q{constructor(e){super();$(this,e,Ai,Ni,x,{mode:0})}}function Rl(a,e,t){const l=a.slice();return l[14]=e[t],l}function Wl(a,e,t){const l=a.slice();return l[17]=e[t],l[19]=t,l}function ql(a,e,t){const l=a.slice();return l[17]=e[t],l[19]=t,l}function Ul(a,e,t){const l=a.slice();return l[14]=e[t],l[19]=t,l}function Gl(a){let e,t=a[8],l=[];for(let n=0;n<t.length;n+=1)l[n]=Zl(Ul(a,t,n));return{c(){e=w("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"UL",{class:!0});var i=C(e);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(_),this.h()},h(){k(e,"class","legend-block svelte-1sx4bpf")},m(n,i){p(n,e,i);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,i){if(i&288){t=n[8];let s;for(s=0;s<t.length;s+=1){const f=Ul(n,t,s);l[s]?l[s].p(f,i):(l[s]=Zl(f),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&_(e),te(l,n)}}}function Zl(a){let e,t,l,n,i=a[14]+"",s,f,o;return{c(){e=w("li"),t=w("div"),l=V(),n=w("span"),s=K(i),o=V(),this.h()},l(r){e=y(r,"LI",{class:!0});var c=C(e);t=y(c,"DIV",{class:!0}),C(t).forEach(_),l=N(c),n=y(c,"SPAN",{class:!0});var d=C(n);s=M(d,i),d.forEach(_),o=N(c),c.forEach(_),this.h()},h(){k(t,"class","legend-vis "+(a[19]==0?"bar":"marker")+" svelte-1sx4bpf"),I(t,"height","1rem",!1),I(t,"width",a[19]==0?"1rem":a[5]+"px",!1),k(n,"class",f=Ee(a[19]==0?"bold":"brackets")+" svelte-1sx4bpf"),k(e,"class","svelte-1sx4bpf"),ae(e,"ew",a[19]!=0)},m(r,c){p(r,e,c),v(e,t),v(e,l),v(e,n),v(n,s),v(e,o)},p(r,c){c&32&&I(t,"width",r[19]==0?"1rem":r[5]+"px",!1),c&256&&i!==(i=r[14]+"")&&W(s,i)},d(r){r&&_(e)}}}function Xl(a){let e,t=a[1](a[17][a[0]])+"",l,n,i;return{c(){e=w("span"),l=K(t),n=K(a[2]),this.h()},l(s){e=y(s,"SPAN",{class:!0});var f=C(e);l=M(f,t),n=M(f,a[2]),f.forEach(_),this.h()},h(){k(e,"class",i="label "+(a[19]==0?"bold":"sml brackets")+" svelte-1sx4bpf")},m(s,f){p(s,e,f),v(e,l),v(e,n)},p(s,f){f&67&&t!==(t=s[1](s[17][s[0]])+"")&&W(l,t),f&4&&W(n,s[2])},d(s){s&&_(e)}}}function ji(a){let e,t=`calc(${a[7](a[17][a[0]])}% - ${a[5]/2}px)`,l=`${a[5]}px`;return{c(){e=w("div"),this.h()},l(n){e=y(n,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","marker svelte-1sx4bpf"),I(e,"left",t,!1),I(e,"border-left-width",l,!1)},m(n,i){p(n,e,i)},p(n,i){i&225&&t!==(t=`calc(${n[7](n[17][n[0]])}% - ${n[5]/2}px)`)&&I(e,"left",t,!1),i&32&&l!==(l=`${n[5]}px`)&&I(e,"border-left-width",l,!1)},d(n){n&&_(e)}}}function Ki(a){let e,t=`${a[7](a[17][a[0]])}%`;return{c(){e=w("div"),this.h()},l(l){e=y(l,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","bar svelte-1sx4bpf"),I(e,"left","0",!1),I(e,"width",t,!1)},m(l,n){p(l,e,n)},p(l,n){n&193&&t!==(t=`${l[7](l[17][l[0]])}%`)&&I(e,"width",t,!1)},d(l){l&&_(e)}}}function Jl(a){let e;function t(i,s){return i[19]==0?Ki:ji}let n=t(a)(a);return{c(){n.c(),e=R()},l(i){n.l(i),e=R()},m(i,s){n.m(i,s),p(i,e,s)},p(i,s){n.p(i,s)},d(i){n.d(i),i&&_(e)}}}function Yl(a){let e,t=a[14].label+"",l,n,i,s,f,o=`${a[4]}px`,r=a[14].values,c=[];for(let h=0;h<r.length;h+=1)c[h]=Xl(ql(a,r,h));let d=a[14].values,u=[];for(let h=0;h<d.length;h+=1)u[h]=Jl(Wl(a,d,h));return{c(){e=w("div"),l=K(t),n=V(),i=w("span");for(let h=0;h<c.length;h+=1)c[h].c();s=V(),f=w("div");for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){e=y(h,"DIV",{class:!0});var m=C(e);l=M(m,t),n=N(m),i=y(m,"SPAN",{class:!0});var b=C(i);for(let g=0;g<c.length;g+=1)c[g].l(b);b.forEach(_),m.forEach(_),s=N(h),f=y(h,"DIV",{class:!0});var E=C(f);for(let g=0;g<u.length;g+=1)u[g].l(E);E.forEach(_),this.h()},h(){k(i,"class","nowrap svelte-1sx4bpf"),k(e,"class","label-group svelte-1sx4bpf"),k(f,"class","bar-group svelte-1sx4bpf"),I(f,"height",o,!1)},m(h,m){p(h,e,m),v(e,l),v(e,n),v(e,i);for(let b=0;b<c.length;b+=1)c[b].m(i,null);p(h,s,m),p(h,f,m);for(let b=0;b<u.length;b+=1)u[b].m(f,null)},p(h,m){if(m&64&&t!==(t=h[14].label+"")&&W(l,t),m&71){r=h[14].values;let b;for(b=0;b<r.length;b+=1){const E=ql(h,r,b);c[b]?c[b].p(E,m):(c[b]=Xl(E),c[b].c(),c[b].m(i,null))}for(;b<c.length;b+=1)c[b].d(1);c.length=r.length}if(m&225){d=h[14].values;let b;for(b=0;b<d.length;b+=1){const E=Wl(h,d,b);u[b]?u[b].p(E,m):(u[b]=Jl(E),u[b].c(),u[b].m(f,null))}for(;b<u.length;b+=1)u[b].d(1);u.length=d.length}m&16&&o!==(o=`${h[4]}px`)&&I(f,"height",o,!1)},d(h){h&&_(e),te(c,h),h&&_(s),h&&_(f),te(u,h)}}}function Ql(a){let e,t;return{c(){e=w("small"),t=K(a[3]),this.h()},l(l){e=y(l,"SMALL",{class:!0});var n=C(e);t=M(n,a[3]),n.forEach(_),this.h()},h(){k(e,"class","svelte-1sx4bpf")},m(l,n){p(l,e,n),v(e,t)},p(l,n){n&8&&W(t,l[3])},d(l){l&&_(e)}}}function Mi(a){let e,t,l,n=a[8][1]&&Gl(a),i=a[6],s=[];for(let o=0;o<i.length;o+=1)s[o]=Yl(Rl(a,i,o));let f=a[3]&&Ql(a);return{c(){n&&n.c(),e=V();for(let o=0;o<s.length;o+=1)s[o].c();t=V(),f&&f.c(),l=R()},l(o){n&&n.l(o),e=N(o);for(let r=0;r<s.length;r+=1)s[r].l(o);t=N(o),f&&f.l(o),l=R()},m(o,r){n&&n.m(o,r),p(o,e,r);for(let c=0;c<s.length;c+=1)s[c].m(o,r);p(o,t,r),f&&f.m(o,r),p(o,l,r)},p(o,[r]){if(o[8][1]?n?n.p(o,r):(n=Gl(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),r&247){i=o[6];let c;for(c=0;c<i.length;c+=1){const d=Rl(o,i,c);s[c]?s[c].p(d,r):(s[c]=Yl(d),s[c].c(),s[c].m(t.parentNode,t))}for(;c<s.length;c+=1)s[c].d(1);s.length=i.length}o[3]?f?f.p(o,r):(f=Ql(o),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null)},i:q,o:q,d(o){n&&n.d(o),o&&_(e),te(s,o),o&&_(t),f&&f.d(o),o&&_(l)}}}function Bi(a,e,t){let l,n,i,s,{data:f}=e,{xKey:o="value"}=e,{yKey:r="category"}=e,{zKey:c="areanm"}=e,{formatTick:d=g=>g.toFixed(1)}=e,{suffix:u="%"}=e,{base:h=null}=e,{barHeight:m=25}=e,{markerWidth:b=3}=e;function E(g,S){let j={},z=[];for(const D of g)j[D[S]]||(j[D[S]]={label:D[S],values:[]},z.push(D[S])),j[D[S]].values.push(D);let L=[];return z.forEach(D=>{L.push(j[D])}),L}return a.$$set=g=>{"data"in g&&t(9,f=g.data),"xKey"in g&&t(0,o=g.xKey),"yKey"in g&&t(10,r=g.yKey),"zKey"in g&&t(11,c=g.zKey),"formatTick"in g&&t(1,d=g.formatTick),"suffix"in g&&t(2,u=g.suffix),"base"in g&&t(3,h=g.base),"barHeight"in g&&t(4,m=g.barHeight),"markerWidth"in g&&t(5,b=g.markerWidth)},a.$$.update=()=>{a.$$.dirty&513&&t(12,l=Math.max(...f.map(g=>g[o]))),a.$$.dirty&2560&&t(8,n=f.map(g=>g[c]).filter((g,S,j)=>j.indexOf(g)===S)),a.$$.dirty&4096&&t(7,i=g=>g/l*100),a.$$.dirty&1536&&t(6,s=E(f,r))},[o,d,u,h,m,b,s,i,n,f,r,c,l]}class $l extends Q{constructor(e){super();$(this,e,Bi,Mi,x,{data:9,xKey:0,yKey:10,zKey:11,formatTick:1,suffix:2,base:3,barHeight:4,markerWidth:5})}}function xl(a,e,t){const l=a.slice();return l[14]=e[t],l}function et(a,e,t){const l=a.slice();return l[17]=e[t],l[19]=t,l}function lt(a,e,t){const l=a.slice();return l[14]=e[t],l[19]=t,l}function tt(a){let e,t=a[7],l=[];for(let n=0;n<t.length;n+=1)l[n]=nt(lt(a,t,n));return{c(){e=w("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"UL",{class:!0});var i=C(e);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(_),this.h()},h(){k(e,"class","legend-block svelte-7hzvwr")},m(n,i){p(n,e,i);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,i){if(i&128){t=n[7];let s;for(s=0;s<t.length;s+=1){const f=lt(n,t,s);l[s]?l[s].p(f,i):(l[s]=nt(f),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&_(e),te(l,n)}}}function nt(a){let e,t,l,n,i=a[14]+"",s,f;return{c(){e=w("li"),t=w("div"),l=V(),n=w("span"),s=K(i),f=V(),this.h()},l(o){e=y(o,"LI",{class:!0});var r=C(e);t=y(r,"DIV",{class:!0}),C(t).forEach(_),l=N(r),n=y(r,"SPAN",{class:!0});var c=C(n);s=M(c,i),c.forEach(_),f=N(r),r.forEach(_),this.h()},h(){k(t,"class","legend-vis "+(a[19]==0?"bar":"bar2")+" svelte-7hzvwr"),k(n,"class","svelte-7hzvwr"),ae(n,"bold",a[19]==0),k(e,"class","svelte-7hzvwr")},m(o,r){p(o,e,r),v(e,t),v(e,l),v(e,n),v(n,s),v(e,f)},p(o,r){r&128&&i!==(i=o[14]+"")&&W(s,i)},d(o){o&&_(e)}}}function it(a){let e,t=`${a[6](a[17][a[0]])}%`,l,n,i=a[1](a[17][a[0]])+"",s,f,o=`calc(${a[6](a[17][a[0]])}% + 2px)`;return{c(){e=w("div"),l=V(),n=w("div"),s=K(i),f=K(a[2]),this.h()},l(r){e=y(r,"DIV",{class:!0}),C(e).forEach(_),l=N(r),n=y(r,"DIV",{class:!0});var c=C(n);s=M(c,i),f=M(c,a[2]),c.forEach(_),this.h()},h(){k(e,"class",Ee(a[19]==0?"bar":"bar2")+" svelte-7hzvwr"),I(e,"left","0",!1),I(e,"width",t,!1),I(e,"top",a[19]==0?"0":"50%",!1),I(e,"height",a[7][1]?"50%":"100%",!1),k(n,"class","label svelte-7hzvwr"),ae(n,"bold",a[19]==0),I(n,"left",o,!1),I(n,"top",a[19]==0?"0":"50%",!1),I(n,"height","50%",!1)},m(r,c){p(r,e,c),p(r,l,c),p(r,n,c),v(n,s),v(n,f)},p(r,c){c&97&&t!==(t=`${r[6](r[17][r[0]])}%`)&&I(e,"width",t,!1),c&128&&I(e,"height",r[7][1]?"50%":"100%",!1),c&35&&i!==(i=r[1](r[17][r[0]])+"")&&W(s,i),c&4&&W(f,r[2]),c&97&&o!==(o=`calc(${r[6](r[17][r[0]])}% + 2px)`)&&I(n,"left",o,!1)},d(r){r&&_(e),r&&_(l),r&&_(n)}}}function at(a){let e,t=a[14].label+"",l,n,i,s,f=`${a[7][1]?a[3]*2:a[3]}px`,o=`calc(100% - ${a[4]}px)`,r=a[14].values,c=[];for(let d=0;d<r.length;d+=1)c[d]=it(et(a,r,d));return{c(){e=w("div"),l=K(t),n=V(),i=w("div");for(let d=0;d<c.length;d+=1)c[d].c();s=V(),this.h()},l(d){e=y(d,"DIV",{class:!0});var u=C(e);l=M(u,t),u.forEach(_),n=N(d),i=y(d,"DIV",{class:!0});var h=C(i);for(let m=0;m<c.length;m+=1)c[m].l(h);s=N(h),h.forEach(_),this.h()},h(){k(e,"class","label-group svelte-7hzvwr"),k(i,"class","bar-group svelte-7hzvwr"),I(i,"height",f,!1),I(i,"width",o,!1)},m(d,u){p(d,e,u),v(e,l),p(d,n,u),p(d,i,u);for(let h=0;h<c.length;h+=1)c[h].m(i,null);v(i,s)},p(d,u){if(u&32&&t!==(t=d[14].label+"")&&W(l,t),u&231){r=d[14].values;let h;for(h=0;h<r.length;h+=1){const m=et(d,r,h);c[h]?c[h].p(m,u):(c[h]=it(m),c[h].c(),c[h].m(i,s))}for(;h<c.length;h+=1)c[h].d(1);c.length=r.length}u&136&&f!==(f=`${d[7][1]?d[3]*2:d[3]}px`)&&I(i,"height",f,!1),u&16&&o!==(o=`calc(100% - ${d[4]}px)`)&&I(i,"width",o,!1)},d(d){d&&_(e),d&&_(n),d&&_(i),te(c,d)}}}function Oi(a){let e,t,l=a[7][1]&&tt(a),n=a[5],i=[];for(let s=0;s<n.length;s+=1)i[s]=at(xl(a,n,s));return{c(){l&&l.c(),e=V();for(let s=0;s<i.length;s+=1)i[s].c();t=R()},l(s){l&&l.l(s),e=N(s);for(let f=0;f<i.length;f+=1)i[f].l(s);t=R()},m(s,f){l&&l.m(s,f),p(s,e,f);for(let o=0;o<i.length;o+=1)i[o].m(s,f);p(s,t,f)},p(s,[f]){if(s[7][1]?l?l.p(s,f):(l=tt(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),f&255){n=s[5];let o;for(o=0;o<n.length;o+=1){const r=xl(s,n,o);i[o]?i[o].p(r,f):(i[o]=at(r),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:q,o:q,d(s){l&&l.d(s),s&&_(e),te(i,s),s&&_(t)}}}function Fi(a,e,t){let l,n,i,s,{data:f}=e,{xKey:o="value"}=e,{yKey:r="category"}=e,{zKey:c="group"}=e,{formatTick:d=E=>Math.round(E)}=e,{suffix:u="%"}=e,{barHeight:h=20}=e,{margin:m=30}=e;function b(E,g){let S={};for(const z of E)S[z[g]]||(S[z[g]]={label:z[g],values:[]}),S[z[g]].values.push(z);let j=[];for(const z in S)j.push(S[z]);return j}return a.$$set=E=>{"data"in E&&t(8,f=E.data),"xKey"in E&&t(0,o=E.xKey),"yKey"in E&&t(9,r=E.yKey),"zKey"in E&&t(10,c=E.zKey),"formatTick"in E&&t(1,d=E.formatTick),"suffix"in E&&t(2,u=E.suffix),"barHeight"in E&&t(3,h=E.barHeight),"margin"in E&&t(4,m=E.margin)},a.$$.update=()=>{a.$$.dirty&257&&t(11,l=[0,Math.max(...f.map(E=>E[o]))]),a.$$.dirty&768&&f.map(E=>E[r]).filter((E,g,S)=>S.indexOf(E)===g),a.$$.dirty&1280&&t(7,n=f.map(E=>E[c]).filter((E,g,S)=>S.indexOf(E)===g)),a.$$.dirty&2048&&t(6,i=E=>E/l[1]*100),a.$$.dirty&768&&t(5,s=b(f,r))},[o,d,u,h,m,s,i,n,f,r,c,l]}class Hi extends Q{constructor(e){super();$(this,e,Fi,Oi,x,{data:8,xKey:0,yKey:9,zKey:10,formatTick:1,suffix:2,barHeight:3,margin:4})}}function Ri(a){let e,t,l;const n=a[1].default,i=oe(n,a,a[0],null);return{c(){e=w("div"),t=w("div"),i&&i.c(),this.h()},l(s){e=y(s,"DIV",{class:!0});var f=C(e);t=y(f,"DIV",{class:!0});var o=C(t);i&&i.l(o),o.forEach(_),f.forEach(_),this.h()},h(){k(t,"class","wrapper"),k(e,"class","page-content")},m(s,f){p(s,e,f),v(e,t),i&&i.m(t,null),l=!0},p(s,[f]){i&&i.p&&(!l||f&1)&&fe(i,n,s,s[0],l?ce(n,s[0],f,null):re(s[0]),null)},i(s){l||(T(i,s),l=!0)},o(s){A(i,s),l=!1},d(s){s&&_(e),i&&i.d(s)}}}function Wi(a,e,t){let{$$slots:l={},$$scope:n}=e;return a.$$set=i=>{"$$scope"in i&&t(0,n=i.$$scope)},[n,l]}class qi extends Q{constructor(e){super();$(this,e,Wi,Ri,x,{})}}function st(a,e,t){const l=a.slice();return l[11]=e[t],l[15]=t,l}function ot(a,e,t){const l=a.slice();return l[11]=e[t],l}function Ui(a){let e,t=a[1],l=[];for(let n=0;n<t.length;n+=1)l[n]=rt(st(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);p(n,e,i)},p(n,i){if(i&94){t=n[1];let s;for(s=0;s<t.length;s+=1){const f=st(n,t,s);l[s]?l[s].p(f,i):(l[s]=rt(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){te(l,n),n&&_(e)}}}function Gi(a){let e,t=a[1],l=[];for(let n=0;n<t.length;n+=1)l[n]=ut(ot(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);p(n,e,i)},p(n,i){if(i&87){t=n[1];let s;for(s=0;s<t.length;s+=1){const f=ot(n,t,s);l[s]?l[s].p(f,i):(l[s]=ut(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){te(l,n),n&&_(e)}}}function ft(a){let e,t,l,n;function i(){return a[10](a[11])}return{c(){e=w("button"),t=K("Remove"),this.h()},l(s){e=y(s,"BUTTON",{style:!0});var f=C(e);t=M(f,"Remove"),f.forEach(_),this.h()},h(){I(e,"float","right")},m(s,f){p(s,e,f),v(e,t),l||(n=Se(e,"click",i),l=!0)},p(s,f){a=s},d(s){s&&_(e),l=!1,n()}}}function rt(a){let e,t,l,n,i,s,f=a[6](a[11])+"",o,r,c,d=Te(a[11],a[4]),u,h,m;function b(){return a[9](a[11])}let E=d&&ft(a);return{c(){e=w("p"),t=w("input"),i=V(),s=w("label"),o=K(f),c=V(),E&&E.c(),u=V(),this.h()},l(g){e=y(g,"P",{class:!0});var S=C(e);t=y(S,"INPUT",{type:!0,id:!0,name:!0,class:!0}),i=N(S),s=y(S,"LABEL",{for:!0,class:!0});var j=C(s);o=M(j,f),j.forEach(_),c=N(S),E&&E.l(S),u=N(S),S.forEach(_),this.h()},h(){k(t,"type","radio"),k(t,"id",l="category-option-"+a[15]),k(t,"name","selected-category"),t.checked=n=Te(a[11],a[4]),k(t,"class","svelte-1o54qbl"),k(s,"for",r="category-option-"+a[15]),k(s,"class","svelte-1o54qbl"),k(e,"class","svelte-1o54qbl")},m(g,S){p(g,e,S),v(e,t),v(e,i),v(e,s),v(s,o),v(e,c),E&&E.m(e,null),v(e,u),h||(m=Se(t,"click",b),h=!0)},p(g,S){a=g,S&18&&n!==(n=Te(a[11],a[4]))&&(t.checked=n),S&66&&f!==(f=a[6](a[11])+"")&&W(o,f),S&18&&(d=Te(a[11],a[4])),d?E?E.p(a,S):(E=ft(a),E.c(),E.m(e,u)):E&&(E.d(1),E=null)},d(g){g&&_(e),E&&E.d(),h=!1,m()}}}function ct(a){let e,t,l,n,i=Ae(a[11],a[4])+"",s;return{c(){e=w("br"),t=V(),l=w("div"),n=K("Currently selected: "),s=K(i),this.h()},l(f){e=y(f,"BR",{}),t=N(f),l=y(f,"DIV",{class:!0});var o=C(l);n=M(o,"Currently selected: "),s=M(o,i),o.forEach(_),this.h()},h(){k(l,"class","svelte-1o54qbl")},m(f,o){p(f,e,o),p(f,t,o),p(f,l,o),v(l,n),v(l,s)},p(f,o){o&18&&i!==(i=Ae(f[11],f[4])+"")&&W(s,i)},d(f){f&&_(e),f&&_(t),f&&_(l)}}}function ut(a){let e,t=a[6](a[11])+"",l,n,i,s,f,o=Ae(a[11],a[4]),r,c,d,u=o&&ct(a);function h(){return a[8](a[11])}return{c(){e=w("button"),l=K(t),n=V(),i=w("span"),s=K("\u203A"),f=V(),u&&u.c(),r=V(),this.h()},l(m){e=y(m,"BUTTON",{class:!0});var b=C(e);l=M(b,t),n=N(b),i=y(b,"SPAN",{class:!0});var E=C(i);s=M(E,"\u203A"),E.forEach(_),f=N(b),u&&u.l(b),r=N(b),b.forEach(_),this.h()},h(){k(i,"class","right-chevron svelte-1o54qbl"),k(e,"class","svelte-1o54qbl"),ae(e,"plain-button",!0),ae(e,"selected",a[11]===a[0])},m(m,b){p(m,e,b),v(e,l),v(e,n),v(e,i),v(i,s),v(e,f),u&&u.m(e,null),v(e,r),c||(d=Se(e,"click",h),c=!0)},p(m,b){a=m,b&66&&t!==(t=a[6](a[11])+"")&&W(l,t),b&18&&(o=Ae(a[11],a[4])),o?u?u.p(a,b):(u=ct(a),u.c(),u.m(e,r)):u&&(u.d(1),u=null),b&3&&ae(e,"selected",a[11]===a[0])},d(m){m&&_(e),u&&u.d(),c=!1,d()}}}function Zi(a){let e,t,l,n;function i(o,r){return o[7]?Gi:Ui}let s=i(a),f=s(a);return{c(){e=w("div"),t=w("h5"),l=K(a[5]),n=V(),f.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var r=C(e);t=y(r,"H5",{class:!0});var c=C(t);l=M(c,a[5]),c.forEach(_),n=N(r),f.l(r),r.forEach(_),this.h()},h(){k(t,"class","column-title svelte-1o54qbl"),k(e,"class","column svelte-1o54qbl")},m(o,r){p(o,e,r),v(e,t),v(t,l),v(e,n),f.m(e,null)},p(o,[r]){r&32&&W(l,o[5]),s===(s=i(o))&&f?f.p(o,r):(f.d(1),f=s(o),f&&(f.c(),f.m(e,null)))},i:q,o:q,d(o){o&&_(e),f.d()}}}function ht(a){console.log("clicked",a)}function Ae(a,e){for(let t of e)if(t.topic===a.label)return t.label;return!1}function Te(a,e){for(const t of e)if(t.var===a.var&&t.code===a.code)return console.log(t,a),!0;return console.log("f"),!1}function Xi(a,e,t){let{options:l=[]}=e,{clickCallback:n=ht}=e,{removeCatCallback:i=ht}=e,{globalSelectedCategories:s=[]}=e,{columnTitle:f="column title"}=e,{labeller:o=m=>m.label}=e,{selected:r=null}=e,{hasChildren:c=!0}=e;const d=m=>{t(0,r=m),n(m)},u=m=>n(m),h=m=>i(m);return a.$$set=m=>{"options"in m&&t(1,l=m.options),"clickCallback"in m&&t(2,n=m.clickCallback),"removeCatCallback"in m&&t(3,i=m.removeCatCallback),"globalSelectedCategories"in m&&t(4,s=m.globalSelectedCategories),"columnTitle"in m&&t(5,f=m.columnTitle),"labeller"in m&&t(6,o=m.labeller),"selected"in m&&t(0,r=m.selected),"hasChildren"in m&&t(7,c=m.hasChildren)},a.$$.update=()=>{a.$$.dirty&2&&console.log(l),a.$$.dirty&16&&console.log(s)},[r,l,n,i,s,f,o,c,d,u,h]}class Oe extends Q{constructor(e){super();$(this,e,Xi,Zi,x,{options:1,clickCallback:2,removeCatCallback:3,globalSelectedCategories:4,columnTitle:5,labeller:6,selected:0,hasChildren:7})}}function _t(a){let e,t,l,n,i;function s(r){a[9](r)}let f={columnTitle:"Select a classification",labeller:$i,options:a[4].vars};a[5]!==void 0&&(f.selected=a[5]),e=new Oe({props:f}),De.push(()=>Le(e,"selected",s));let o=a[5]!=null&&dt(a);return{c(){G(e.$$.fragment),l=V(),o&&o.c(),n=R()},l(r){J(e.$$.fragment,r),l=N(r),o&&o.l(r),n=R()},m(r,c){Z(e,r,c),p(r,l,c),o&&o.m(r,c),p(r,n,c),i=!0},p(r,c){const d={};c&16&&(d.options=r[4].vars),!t&&c&32&&(t=!0,d.selected=r[5],je(()=>t=!1)),e.$set(d),r[5]!=null?o?(o.p(r,c),c&32&&T(o,1)):(o=dt(r),o.c(),T(o,1),o.m(n.parentNode,n)):o&&(ne(),A(o,1,1,()=>{o=null}),ie())},i(r){i||(T(e.$$.fragment,r),T(o),i=!0)},o(r){A(e.$$.fragment,r),A(o),i=!1},d(r){X(e,r),r&&_(l),o&&o.d(r),r&&_(n)}}}function dt(a){let e,t,l;function n(s){a[12](s)}let i={columnTitle:"Select a category",options:a[5].cats,clickCallback:a[10],removeCatCallback:a[11],hasChildren:!1,globalSelectedCategories:a[3]};return a[6]!==void 0&&(i.selected=a[6]),e=new Oe({props:i}),De.push(()=>Le(e,"selected",n)),{c(){G(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,f){Z(e,s,f),l=!0},p(s,f){const o={};f&32&&(o.options=s[5].cats),f&34&&(o.clickCallback=s[10]),f&36&&(o.removeCatCallback=s[11]),f&8&&(o.globalSelectedCategories=s[3]),!t&&f&64&&(t=!0,o.selected=s[6],je(()=>t=!1)),e.$set(o)},i(s){l||(T(e.$$.fragment,s),l=!0)},o(s){A(e.$$.fragment,s),l=!1},d(s){X(e,s)}}}function Ji(a){let e,t,l,n,i,s,f;function o(d){a[8](d)}let r={columnTitle:"Select a variable",clickCallback:a[7],options:a[0],globalSelectedCategories:a[3]};a[4]!==void 0&&(r.selected=a[4]),t=new Oe({props:r}),De.push(()=>Le(t,"selected",o));let c=a[4]!=null&&_t(a);return{c(){e=w("div"),G(t.$$.fragment),n=V(),c&&c.c(),i=V(),s=R(),this.h()},l(d){e=y(d,"DIV",{class:!0});var u=C(e);J(t.$$.fragment,u),n=N(u),c&&c.l(u),u.forEach(_),i=N(d),s=R(),this.h()},h(){k(e,"class","container svelte-3hmhst")},m(d,u){p(d,e,u),Z(t,e,null),v(e,n),c&&c.m(e,null),p(d,i,u),p(d,s,u),f=!0},p(d,[u]){const h={};u&32&&(h.clickCallback=d[7]),u&1&&(h.options=d[0]),u&8&&(h.globalSelectedCategories=d[3]),!l&&u&16&&(l=!0,h.selected=d[4],je(()=>l=!1)),t.$set(h),d[4]!=null?c?(c.p(d,u),u&16&&T(c,1)):(c=_t(d),c.c(),T(c,1),c.m(e,null)):c&&(ne(),A(c,1,1,()=>{c=null}),ie())},i(d){f||(T(t.$$.fragment,d),T(c),f=!0)},o(d){A(t.$$.fragment,d),A(c),f=!1},d(d){d&&_(e),X(t),c&&c.d(),d&&_(i),d&&_(s)}}}function Yi(a,e){console.log(a,e)}function Qi(a,e){console.log(a,e)}const $i=a=>`${a.cats.length+" categories"}`;function xi(a,e,t){let{options:l=[]}=e,{clickCallback:n=Yi}=e,{removeCatCallback:i=Qi}=e,{globalSelectedCategories:s=[]}=e,f=null,o=null,r=null;const c=()=>{t(5,o=null)};function d(g){f=g,t(4,f)}function u(g){o=g,t(5,o)}const h=g=>n(o,g),m=g=>i(o,g);function b(g){r=g,t(6,r)}const E=(g,S)=>n(g,S);return a.$$set=g=>{"options"in g&&t(0,l=g.options),"clickCallback"in g&&t(1,n=g.clickCallback),"removeCatCallback"in g&&t(2,i=g.removeCatCallback),"globalSelectedCategories"in g&&t(3,s=g.globalSelectedCategories)},[l,n,i,s,f,o,r,c,d,u,h,m,b,E]}class ea extends Q{constructor(e){super();$(this,e,xi,Ji,x,{options:0,clickCallback:1,removeCatCallback:2,globalSelectedCategories:3})}}function mt(a,e,t){const l=a.slice();return l[24]=e[t],l}function gt(a,e,t){const l=a.slice();return l[27]=e[t],l}function bt(a,e,t){const l=a.slice();return l[30]=e[t],l}function vt(a,e,t){const l=a.slice();return l[33]=e[t],l[35]=t,l}function la(a){let e;return{c(){e=K("Create a population group profile")},l(t){e=M(t,"Create a population group profile")},m(t,l){p(t,e,l)},d(t){t&&_(e)}}}function ta(a){let e,t,l,n,i,s,f,o,r,c,d;return e=new Li({props:{$$slots:{default:[la]},$$scope:{ctx:a}}}),{c(){G(e.$$.fragment),t=V(),l=w("p"),n=K(`Select one or more identity characteristics to define a population group to
    compare with the whole population of England and Wales. For example, see `),i=w("a"),s=K("Sikhs born in the UK"),f=K(`
    or
    `),o=w("a"),r=K("people aged 65+ born in Ireland"),c=K("."),this.h()},l(u){J(e.$$.fragment,u),t=N(u),l=y(u,"P",{class:!0});var h=C(l);n=M(h,`Select one or more identity characteristics to define a population group to
    compare with the whole population of England and Wales. For example, see `),i=y(h,"A",{href:!0,class:!0});var m=C(i);s=M(m,"Sikhs born in the UK"),m.forEach(_),f=M(h,`
    or
    `),o=y(h,"A",{href:!0,class:!0});var b=C(o);r=M(b,"people aged 65+ born in Ireland"),b.forEach(_),c=M(h,"."),h.forEach(_),this.h()},h(){k(i,"href","?religion_tb=7&country_of_birth_3a=1"),k(i,"class","svelte-1mw9gv4"),k(o,"href","?resident_age_3a=3&country_of_birth_8a=2"),k(o,"class","svelte-1mw9gv4"),k(l,"class","subtitle svelte-1mw9gv4")},m(u,h){Z(e,u,h),p(u,t,h),p(u,l,h),v(l,n),v(l,i),v(i,s),v(l,f),v(l,o),v(o,r),v(l,c),d=!0},p(u,h){const m={};h[1]&32&&(m.$$scope={dirty:h,ctx:u}),e.$set(m)},i(u){d||(T(e.$$.fragment,u),d=!0)},o(u){A(e.$$.fragment,u),d=!1},d(u){X(e,u),u&&_(t),u&&_(l)}}}function kt(a){let e,t,l,n=a[0],i=[];for(let s=0;s<n.length;s+=1)i[s]=pt(vt(a,n,s));return{c(){e=w("br"),t=V();for(let s=0;s<i.length;s+=1)i[s].c();l=R()},l(s){e=y(s,"BR",{}),t=N(s);for(let f=0;f<i.length;f+=1)i[f].l(s);l=R()},m(s,f){p(s,e,f),p(s,t,f);for(let o=0;o<i.length;o+=1)i[o].m(s,f);p(s,l,f)},p(s,f){if(f[0]&259){n=s[0];let o;for(o=0;o<n.length;o+=1){const r=vt(s,n,o);i[o]?i[o].p(r,f):(i[o]=pt(r),i[o].c(),i[o].m(l.parentNode,l))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(s){s&&_(e),s&&_(t),te(i,s),s&&_(l)}}}function na(a){let e,t,l=_e(a[33].topic)+"",n,i,s=_e(a[33].label)+"",f,o,r,c,d,u;function h(){return a[14](a[33])}return{c(){e=w("div"),t=w("span"),n=K(l),i=K(": "),f=K(s),o=V(),r=w("button"),c=V(),this.h()},l(m){e=y(m,"DIV",{class:!0});var b=C(e);t=y(b,"SPAN",{class:!0});var E=C(t);n=M(E,l),i=M(E,": "),f=M(E,s),E.forEach(_),o=N(b),r=y(b,"BUTTON",{class:!0}),C(r).forEach(_),c=N(b),b.forEach(_),this.h()},h(){k(t,"class","svelte-1mw9gv4"),k(r,"class","svelte-1mw9gv4"),k(e,"class","chip svelte-1mw9gv4")},m(m,b){p(m,e,b),v(e,t),v(t,n),v(t,i),v(t,f),v(e,o),v(e,r),v(e,c),d||(u=Se(r,"click",h),d=!0)},p(m,b){a=m,b[0]&1&&l!==(l=_e(a[33].topic)+"")&&W(n,l),b[0]&1&&s!==(s=_e(a[33].label)+"")&&W(f,s)},d(m){m&&_(e),d=!1,u()}}}function ia(a){let e,t,l=_e(a[33].topic)+"",n,i,s=_e(a[33].label)+"",f,o,r,c;return{c(){e=w("div"),t=w("span"),n=K(l),i=K(": "),f=K(s),o=V(),r=w("div"),c=V(),this.h()},l(d){e=y(d,"DIV",{class:!0});var u=C(e);t=y(u,"SPAN",{class:!0});var h=C(t);n=M(h,l),i=M(h,": "),f=M(h,s),h.forEach(_),o=N(u),r=y(u,"DIV",{class:!0}),C(r).forEach(_),c=N(u),u.forEach(_),this.h()},h(){k(t,"class","svelte-1mw9gv4"),k(r,"class","chip-loader svelte-1mw9gv4"),k(e,"class","chip chip-pending svelte-1mw9gv4")},m(d,u){p(d,e,u),v(e,t),v(t,n),v(t,i),v(t,f),v(e,o),v(e,r),v(e,c)},p(d,u){u[0]&1&&l!==(l=_e(d[33].topic)+"")&&W(n,l),u[0]&1&&s!==(s=_e(d[33].label)+"")&&W(f,s)},d(d){d&&_(e)}}}function pt(a){let e;function t(i,s){return i[1]=="loading"&&i[35]==i[0].length-1?ia:na}let l=t(a),n=l(a);return{c(){n.c(),e=R()},l(i){n.l(i),e=R()},m(i,s){n.m(i,s),p(i,e,s)},p(i,s){l===(l=t(i))&&n?n.p(i,s):(n.d(1),n=l(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){n.d(i),i&&_(e)}}}function wt(a){let e,t,l,n=a[1]=="failed"&&yt(),i=a[2]==!0&&Et();return{c(){e=w("div"),t=K(`Some datasets not available for selected variables.
        `),n&&n.c(),l=V(),i&&i.c(),this.h()},l(s){e=y(s,"DIV",{class:!0});var f=C(e);t=M(f,`Some datasets not available for selected variables.
        `),n&&n.l(f),l=N(f),i&&i.l(f),f.forEach(_),this.h()},h(){k(e,"class","warning svelte-1mw9gv4")},m(s,f){p(s,e,f),v(e,t),n&&n.m(e,null),v(e,l),i&&i.m(e,null)},p(s,f){s[1]=="failed"?n||(n=yt(),n.c(),n.m(e,l)):n&&(n.d(1),n=null),s[2]==!0?i||(i=Et(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(s){s&&_(e),n&&n.d(),i&&i.d()}}}function yt(a){let e;return{c(){e=K("Try removing a variable to see more datasets.")},l(t){e=M(t,"Try removing a variable to see more datasets.")},m(t,l){p(t,e,l)},d(t){t&&_(e)}}}function Et(a){let e;return{c(){e=K(`Economic indicators (employment, social status etc) not available for
          ages 0 to 15.`)},l(t){e=M(t,`Economic indicators (employment, social status etc) not available for
          ages 0 to 15.`)},m(t,l){p(t,e,l)},d(t){t&&_(e)}}}function aa(a){let e,t,l,n,i,s=a[0][0]&&kt(a),f=(a[1]=="failed"||a[2]==!0)&&wt(a);return n=new ea({props:{options:Zt,clickCallback:a[6],removeCatCallback:a[7],globalSelectedCategories:a[0]}}),{c(){e=w("div"),s&&s.c(),t=V(),f&&f.c(),l=V(),G(n.$$.fragment),this.h()},l(o){e=y(o,"DIV",{slot:!0,class:!0});var r=C(e);s&&s.l(r),t=N(r),f&&f.l(r),l=N(r),J(n.$$.fragment,r),r.forEach(_),this.h()},h(){k(e,"slot","meta"),k(e,"class","wrapper")},m(o,r){p(o,e,r),s&&s.m(e,null),v(e,t),f&&f.m(e,null),v(e,l),Z(n,e,null),i=!0},p(o,r){o[0][0]?s?s.p(o,r):(s=kt(o),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o[1]=="failed"||o[2]==!0?f?f.p(o,r):(f=wt(o),f.c(),f.m(e,l)):f&&(f.d(1),f=null);const c={};r[0]&1&&(c.globalSelectedCategories=o[0]),n.$set(c)},i(o){i||(T(n.$$.fragment,o),i=!0)},o(o){A(n.$$.fragment,o),i=!1},d(o){o&&_(e),s&&s.d(),f&&f.d(),X(n)}}}function sa(a){let e,t,l,n;return e=new Xn({props:{data:a[4]}}),l=new ci({props:{data:a[4],selected:a[0]}}),{c(){G(e.$$.fragment),t=V(),G(l.$$.fragment)},l(i){J(e.$$.fragment,i),t=N(i),J(l.$$.fragment,i)},m(i,s){Z(e,i,s),p(i,t,s),Z(l,i,s),n=!0},p(i,s){const f={};s[0]&16&&(f.data=i[4]),e.$set(f);const o={};s[0]&16&&(o.data=i[4]),s[0]&1&&(o.selected=i[0]),l.$set(o)},i(i){n||(T(e.$$.fragment,i),T(l.$$.fragment,i),n=!0)},o(i){A(e.$$.fragment,i),A(l.$$.fragment,i),n=!1},d(i){X(e,i),i&&_(t),X(l,i)}}}function Ct(a){let e,t,l,n=a[30].name+"",i,s,f;return{c(){e=w("label"),t=w("input"),i=K(n),this.h()},l(o){e=y(o,"LABEL",{});var r=C(e);t=y(r,"INPUT",{type:!0,name:!0}),i=M(r,n),r.forEach(_),this.h()},h(){k(t,"type","radio"),k(t,"name","chart-type"),t.__value=l=a[30].component,t.value=t.__value,a[16][0].push(t)},m(o,r){p(o,e,r),v(e,t),t.checked=t.__value===a[3],v(e,i),s||(f=Se(t,"change",a[15]),s=!0)},p(o,r){r[0]&8&&(t.checked=t.__value===o[3])},d(o){o&&_(e),a[16][0].splice(a[16][0].indexOf(t),1),s=!1,f()}}}function Dt(a){let e,t;return e=new On({props:{title:Ue(a[27].key),table:a[27],data:a[4],chart_type:a[3]}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n[0]&16&&(i.title=Ue(l[27].key)),n[0]&16&&(i.table=l[27]),n[0]&16&&(i.data=l[4]),n[0]&8&&(i.chart_type=l[3]),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function oa(a){let e,t,l=a[24].tables.filter(a[17]),n=[];for(let s=0;s<l.length;s+=1)n[s]=Dt(gt(a,l,s));const i=s=>A(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=V()},l(s){for(let f=0;f<n.length;f+=1)n[f].l(s);e=N(s)},m(s,f){for(let o=0;o<n.length;o+=1)n[o].m(s,f);p(s,e,f),t=!0},p(s,f){if(f[0]&24){l=s[24].tables.filter(s[17]);let o;for(o=0;o<l.length;o+=1){const r=gt(s,l,o);n[o]?(n[o].p(r,f),T(n[o],1)):(n[o]=Dt(r),n[o].c(),T(n[o],1),n[o].m(e.parentNode,e))}for(ne(),o=l.length;o<n.length;o+=1)i(o);ie()}},i(s){if(!t){for(let f=0;f<l.length;f+=1)T(n[f]);t=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)A(n[f]);t=!1},d(s){te(n,s),s&&_(e)}}}function St(a){let e,t;return e=new Be({props:{title:a[24].categoryName,$$slots:{default:[oa]},$$scope:{ctx:a}}}),{c(){G(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,n){Z(e,l,n),t=!0},p(l,n){const i={};n[0]&24|n[1]&32&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function fa(a){let e,t,l,n,i,s,f,o,r,c,d;e=new Be({props:{title:"Demographics",$$slots:{default:[sa]},$$scope:{ctx:a}}}),l=new Nn({props:{data:a[4],mapStyle:Xt,ladBounds:ve,selected:a[0],colors:ke}});let u=a[5],h=[];for(let g=0;g<u.length;g+=1)h[g]=Ct(bt(a,u,g));let m=Ve[0].tablesCategorised,b=[];for(let g=0;g<m.length;g+=1)b[g]=St(mt(a,m,g));const E=g=>A(b[g],1,1,()=>{b[g]=null});return{c(){G(e.$$.fragment),t=V(),G(l.$$.fragment),n=V(),i=w("span"),s=w("strong"),f=K("Chart type:"),o=V();for(let g=0;g<h.length;g+=1)h[g].c();r=V();for(let g=0;g<b.length;g+=1)b[g].c();c=R()},l(g){J(e.$$.fragment,g),t=N(g),J(l.$$.fragment,g),n=N(g),i=y(g,"SPAN",{});var S=C(i);s=y(S,"STRONG",{});var j=C(s);f=M(j,"Chart type:"),j.forEach(_),o=N(S);for(let z=0;z<h.length;z+=1)h[z].l(S);S.forEach(_),r=N(g);for(let z=0;z<b.length;z+=1)b[z].l(g);c=R()},m(g,S){Z(e,g,S),p(g,t,S),Z(l,g,S),p(g,n,S),p(g,i,S),v(i,s),v(s,f),v(i,o);for(let j=0;j<h.length;j+=1)h[j].m(i,null);p(g,r,S);for(let j=0;j<b.length;j+=1)b[j].m(g,S);p(g,c,S),d=!0},p(g,S){const j={};S[0]&17|S[1]&32&&(j.$$scope={dirty:S,ctx:g}),e.$set(j);const z={};if(S[0]&16&&(z.data=g[4]),S[0]&1&&(z.selected=g[0]),l.$set(z),S[0]&40){u=g[5];let L;for(L=0;L<u.length;L+=1){const D=bt(g,u,L);h[L]?h[L].p(D,S):(h[L]=Ct(D),h[L].c(),h[L].m(i,null))}for(;L<h.length;L+=1)h[L].d(1);h.length=u.length}if(S[0]&24){m=Ve[0].tablesCategorised;let L;for(L=0;L<m.length;L+=1){const D=mt(g,m,L);b[L]?(b[L].p(D,S),T(b[L],1)):(b[L]=St(D),b[L].c(),T(b[L],1),b[L].m(c.parentNode,c))}for(ne(),L=m.length;L<b.length;L+=1)E(L);ie()}},i(g){if(!d){T(e.$$.fragment,g),T(l.$$.fragment,g);for(let S=0;S<m.length;S+=1)T(b[S]);d=!0}},o(g){A(e.$$.fragment,g),A(l.$$.fragment,g),b=b.filter(Boolean);for(let S=0;S<b.length;S+=1)A(b[S]);d=!1},d(g){X(e,g),g&&_(t),X(l,g),g&&_(n),g&&_(i),te(h,g),g&&_(r),te(b,g),g&&_(c)}}}function ra(a){let e,t,l,n,i,s,f,o,r,c,d,u;return r=new Vi({props:{background:"none",breadcrumb:[{label:"Census",url:"/census"},{label:"Create a population group profile"}],$$slots:{meta:[aa],default:[ta]},$$scope:{ctx:a}}}),d=new qi({props:{$$slots:{default:[fa]},$$scope:{ctx:a}}}),{c(){e=w("meta"),t=w("meta"),l=w("meta"),n=w("meta"),i=w("meta"),s=w("meta"),f=w("meta"),o=V(),G(r.$$.fragment),c=V(),G(d.$$.fragment),this.h()},l(h){const m=qt('[data-svelte="svelte-1yphpwa"]',document.head);e=y(m,"META",{name:!0,content:!0}),t=y(m,"META",{property:!0,content:!0}),l=y(m,"META",{property:!0,content:!0}),n=y(m,"META",{property:!0,content:!0}),i=y(m,"META",{property:!0,content:!0}),s=y(m,"META",{property:!0,content:!0}),f=y(m,"META",{name:!0,content:!0}),m.forEach(_),o=N(h),J(r.$$.fragment,h),c=N(h),J(d.$$.fragment,h),this.h()},h(){document.title="Create a population group profile",k(e,"name","description"),k(e,"content",""),k(t,"property","og:title"),k(t,"content","Create a population group profile"),k(l,"property","og:type"),k(l,"content","website"),k(n,"property","og:url"),k(n,"content",Pt+"/"),k(i,"property","og:image:type"),k(i,"content","image/jpeg"),k(s,"property","og:description"),k(s,"content",""),k(f,"name","description"),k(f,"content","")},m(h,m){v(document.head,e),v(document.head,t),v(document.head,l),v(document.head,n),v(document.head,i),v(document.head,s),v(document.head,f),p(h,o,m),Z(r,h,m),p(h,c,m),Z(d,h,m),u=!0},p(h,m){const b={};m[0]&7|m[1]&32&&(b.$$scope={dirty:m,ctx:h}),r.$set(b);const E={};m[0]&25|m[1]&32&&(E.$$scope={dirty:m,ctx:h}),d.$set(E)},i(h){u||(T(r.$$.fragment,h),T(d.$$.fragment,h),u=!0)},o(h){A(r.$$.fragment,h),A(d.$$.fragment,h),u=!1},d(h){_(e),_(t),_(l),_(n),_(i),_(s),_(f),h&&_(o),X(r,h),h&&_(c),X(d,h)}}}const va=!1;async function ka({fetch:a}){let e=await en(Pt+ve.url,ve.layer,a),t={};e.features.forEach(s=>t[s.properties[ve.code]]=s.properties[ve.name]);let l=(await Vt(Ve,[],a)).data;l.total_pop=Nt(l.residents.sex.values.count);let n=[],i=e.features.map(s=>s.properties[ve.code]);return i.forEach(s=>{n.push({code:s,name:t[s],value:100})}),n.forEach(s=>s.color=ke.seq[4]),{props:{geojson:e,geoLookup:t,dataAll:l,geoCodes:i,geoPerc:n}}}let ca="light";function ua(a){let e=[];a.forEach(l=>e.push(l[0]));const t=a.flat().pop();return(a.length===1||t!=e[e.length-1])&&e.push(t),e}function ha(a,e,t){let l;It(a,Qt,P=>t(19,l=P));let{geojson:n,geoLookup:i,dataAll:s,geoCodes:f,geoPerc:o}=e;pe("theme",Jt[ca]);let r=[{name:"Comparison marker",component:$l},{name:"Grouped bar",component:Hi}],c=[],d="success",u=!1,h=$l,m={all:s,selected:s,geojson:n,geoLookup:i,geoCodes:f,geoPerc:o,geoBreaks:[0,100]};function b(P,F){t(0,c=[...c.filter(Y=>Y.topic!==P.shortLabel),me({topic:P.shortLabel,key:P.key},F)]),Me(`${Ke}?${c.map(Y=>`${Y.key}=${Y.code}`).join("&")}`,{noscroll:!0})}function E(P,F){t(0,c=c.filter(Y=>Y.label!==F.label)),Me(`${Ke}?${c.map(Y=>`${Y.key}=${Y.code}`).join("&")}`,{noscroll:!0})}function g(P){t(0,c=c.filter(F=>F.topic!=P)),Me(`${Ke}?${c.map(F=>`${F.key}=${F.code}`).join("&")}`,{noscroll:!0})}function S(P){t(4,m.selected=P.data,m),t(4,m.selected.total_pop=c.length===0?Nt(s.residents.sex.values.count):P.total_pop,m),t(4,m.geoPerc=[],m);let F=null;{m.geoCodes.forEach(U=>{let ee=c.length===0?100:P.mapData[U]!=null?P.mapData[U][1]:null;m.geoPerc.push({code:U,name:m.geoLookup[U],value:ee})});let Y=m.geoPerc.map(U=>U.value).filter(U=>U!=null);F=Y.length===0?null:Ut(Y,Math.min(5,Y.length))}if(F==null)m.geoPerc.forEach(Y=>Y.color=ke.nodata),t(4,m.geoBreaks=[0,100],m);else if(c.length===0)m.geoPerc.forEach(Y=>Y.color=ke.seq[4]),t(4,m.geoBreaks=[100,100],m);else{let Y=ua(F);m.geoPerc.forEach(U=>U.color=U.value!=null?xt(U.value,Y,ke.seq):ke.nodata),t(4,m.geoBreaks=Y,m)}t(1,d="success")}function j(){t(1,d="loading"),t(2,u=c&&c.some(P=>["Aged 4 years and under","Aged 5 to 9 years","Aged 10 to 14 years","Aged 15 years and under"].includes(P.label))),Vt(Ve,c).then(S)}function z(){t(0,c=[]);for(let P of l.url.searchParams.entries()){let F=Yt.find(U=>U.key==P[0]);if(!F)continue;let Y=F.cats.find(U=>U.code==P[1]);!Y||c.push(me({topic:F.shortLabel,key:F.key},Y))}j()}ui(z);const L=[[]],D=P=>g(P.topic);function O(){h=this.__value,t(3,h)}const H=P=>!P.code.startsWith("resident_age")&&m.selected.residents[P.code].values!=="blocked"&&m.selected.residents[P.code].values!==void 0;return a.$$set=P=>{"geojson"in P&&t(9,n=P.geojson),"geoLookup"in P&&t(10,i=P.geoLookup),"dataAll"in P&&t(11,s=P.dataAll),"geoCodes"in P&&t(12,f=P.geoCodes),"geoPerc"in P&&t(13,o=P.geoPerc)},[c,d,u,h,m,r,b,E,g,n,i,s,f,o,D,O,L,H]}class pa extends Q{constructor(e){super();$(this,e,ha,ra,x,{geojson:9,geoLookup:10,dataAll:11,geoCodes:12,geoPerc:13},null,[-1,-1])}}export{pa as default,ka as load,va as prerender};
