var jt=Object.defineProperty;var qe=Object.getOwnPropertySymbols;var Kt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var Re=(i,e,t)=>e in i?jt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,De=(i,e)=>{for(var t in e||(e={}))Kt.call(e,t)&&Re(i,t,e[t]);if(qe)for(var t of qe(e))Mt.call(e,t)&&Re(i,t,e[t]);return i};import{X as Ft,S as ee,i as le,s as te,e as E,k as A,c as w,a as I,m as N,d,b as k,g as y,H as b,t as V,h as L,Q as H,R as $,j as O,l as G,N as fe,w as R,x as Y,y as U,q as T,o as j,B as Z,F as me,f as z,n as oe,p as re,J as ge,K as ve,L as be,r as ze,W as Te,G as Le,I as Oe,Y as Ve,Z as Bt,v as Ot,_ as je,$ as We,a0 as Wt,D as Ht,V as pt,a1 as Gt,U as qt,a2 as Ke,O as Pe,a3 as Rt,a4 as Ut,T as Et,a5 as Ue,a6 as Zt,a7 as wt,a8 as yt}from"../chunks/vendor-b0f368f7.js";import{a as Dt,b as Ze}from"../chunks/paths-396f020f.js";import{l as Se,c as Ee,n as Me,v as Yt,a as Xt,b as Ye,t as Jt,u as Qt,d as xt,s as $t,p as en,m as ln,e as Xe,f as Ae}from"../chunks/config-3c4e1ce9.js";import{c as Ie}from"../chunks/singletons-d1fb5791.js";const Ct="https://raw.githubusercontent.com/jtrim-ons/key-pop-api-downloader/main/generated/";`
fragment tableDimensions on Table {
  dimensions {
    categories {
      code
    }
  }
}
`.replace(/\s+/g," ");const tn="YWhtYWQuYmFyY2xheTplbG9wZS5wdWNrLmhhaWxzLmV4cGxvcmU=";new Headers({Accept:"application/json","Content-Type":"application/json",Authorization:"Basic "+tn});function It(i){let e=[...i].sort((l,n)=>l.key.localeCompare(n.key));return{selString:i.length==0?"data":e.map((l,n)=>n<e.length-1?`${l.key}-${l.code}`:`${l.key}`).join("/"),lastCode:i.length>0?e[e.length-1].code:null}}async function St(i,e=[],t=window.fetch){if(console.log({datasets:i,sel:e}),e.length==0||e[0].newFormat){console.log("NEW FORMAT!");let{selString:l,lastCode:n}=It(e);console.log(l);let a={data:{}};{let s=`${Ct}${e.length}var_percent/${l}.json`,o=await(await t(s)).json();console.log(s),e.length>0&&(o=o[n]),o.newFormat=!0,console.log({tmpjson:o});for(let u of i){a.data[u.key]={};for(let f of u.tables)a.data[u.key][f.code]={values:o[f.code]}}e.length>0&&(a.total_pop=o.total_pop),console.log({json:o,retval:a})}return a}throw"OLD FORMAT!"}async function nn(i=[],e=window.fetch){let{selString:t,lastCode:l}=It(i),n=`${Ct}${i.length}var-by-ltla_percent/${t}_by_geog.json`;console.log({url:n});let s=await(await e(n)).json();return i.length>0&&(s=s[l]),s}function an(i,e,t){for(let l=1;l<e.length;l++)if(i<=e[l])return t[l-1]}async function sn(i,e,t=window.fetch){let n=await(await t(i)).json();return await Ft(n,e)}function he(i){return i.charAt(0).toUpperCase()+i.slice(1)}function zt(i){if(!i)return 0;let e=0;for(let t=0;t<i.length;t++)e+=i[t];return e}function on(i){return!1}function Je(i){return i.replace(new RegExp(" \\([0-9]* categories\\)"),"")}Ie.disable_scroll_handling;const Qe=Ie.goto;Ie.invalidate;Ie.prefetch;Ie.prefetch_routes;Ie.before_navigate;const rn=Ie.after_navigate;function xe(i,e,t){const l=i.slice();return l[2]=e[t],l}function fn(i){let e=i[2].label+"",t;return{c(){t=V(e)},l(l){t=L(l,e)},m(l,n){y(l,t,n)},p(l,n){n&1&&e!==(e=l[2].label+"")&&O(t,e)},d(l){l&&d(t)}}}function un(i){let e,t=i[2].label+"",l,n;return{c(){e=E("a"),l=V(t),this.h()},l(a){e=w(a,"A",{class:!0,href:!0});var s=I(e);l=L(s,t),s.forEach(d),this.h()},h(){k(e,"class","breadcrumb__link"),k(e,"href",n=i[2].url)},m(a,s){y(a,e,s),b(e,l)},p(a,s){s&1&&t!==(t=a[2].label+"")&&O(l,t),s&1&&n!==(n=a[2].url)&&k(e,"href",n)},d(a){a&&d(e)}}}function $e(i){let e,t;function l(s,r){return s[2].url?un:fn}let n=l(i),a=n(i);return{c(){e=E("li"),a.c(),t=A(),this.h()},l(s){e=w(s,"LI",{class:!0});var r=I(e);a.l(r),t=N(r),r.forEach(d),this.h()},h(){k(e,"class","breadcrumb__item")},m(s,r){y(s,e,r),a.m(e,null),b(e,t)},p(s,r){n===(n=l(s))&&a?a.p(s,r):(a.d(1),a=n(s),a&&(a.c(),a.m(e,t)))},d(s){s&&d(e),a.d()}}}function cn(i){let e,t,l,n,a,s,r,o,u=i[0],f=[];for(let c=0;c<u.length;c+=1)f[c]=$e(xe(i,u,c));return{c(){e=E("nav"),t=E("div"),l=E("ol"),n=E("li"),a=E("a"),s=V("Home"),r=A();for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){e=w(c,"NAV",{"aria-label":!0});var h=I(e);t=w(h,"DIV",{class:!0});var _=I(t);l=w(_,"OL",{class:!0});var m=I(l);n=w(m,"LI",{class:!0});var g=I(n);a=w(g,"A",{class:!0,href:!0});var D=I(a);s=L(D,"Home"),D.forEach(d),g.forEach(d),r=N(m);for(let v=0;v<f.length;v+=1)f[v].l(m);m.forEach(d),_.forEach(d),h.forEach(d),this.h()},h(){k(a,"class","breadcrumb__link"),k(a,"href","/"),k(n,"class","breadcrumb__item"),k(l,"class","breadcrumb__list"),k(t,"class",o=(i[1]=="neutral"?"breadcrumb-neutral":"breadcrumb")+" print--hide"),k(e,"aria-label","Breadcrumbs")},m(c,h){y(c,e,h),b(e,t),b(t,l),b(l,n),b(n,a),b(a,s),b(l,r);for(let _=0;_<f.length;_+=1)f[_].m(l,null)},p(c,[h]){if(h&1){u=c[0];let _;for(_=0;_<u.length;_+=1){const m=xe(c,u,_);f[_]?f[_].p(m,h):(f[_]=$e(m),f[_].c(),f[_].m(l,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=u.length}h&2&&o!==(o=(c[1]=="neutral"?"breadcrumb-neutral":"breadcrumb")+" print--hide")&&k(t,"class",o)},i:H,o:H,d(c){c&&d(e),$(f,c)}}}function hn(i,e,t){let{links:l=[]}=e,{mode:n="neutral"}=e;return i.$$set=a=>{"links"in a&&t(0,l=a.links),"mode"in a&&t(1,n=a.mode)},[l,n]}class _n extends ee{constructor(e){super();le(this,e,hn,cn,te,{links:0,mode:1})}}function el(i,e,t){const l=i.slice();return l[2]=e[t],l}function ll(i){let e,t,l=i[2].label+"",n,a,s,r;return{c(){e=E("li"),t=E("a"),n=V(l),r=A(),this.h()},l(o){e=w(o,"LI",{});var u=I(e);t=w(u,"A",{href:!0,"data-gtm-title":!0,"data-gtm-type":!0});var f=I(t);n=L(f,l),f.forEach(d),r=N(u),u.forEach(d),this.h()},h(){k(t,"href",a=i[2].url),k(t,"data-gtm-title",s=i[2].label),k(t,"data-gtm-type","highlighted-links")},m(o,u){y(o,e,u),b(e,t),b(t,n),b(e,r)},p(o,u){u&2&&l!==(l=o[2].label+"")&&O(n,l),u&2&&a!==(a=o[2].url)&&k(t,"href",a),u&2&&s!==(s=o[2].label)&&k(t,"data-gtm-title",s)},d(o){o&&d(e)}}}function dn(i){let e,t,l,n,a,s=i[1],r=[];for(let o=0;o<s.length;o+=1)r[o]=ll(el(i,s,o));return{c(){e=E("div"),t=E("h2"),l=V(i[0]),n=A(),a=E("ul");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=w(o,"DIV",{class:!0});var u=I(e);t=w(u,"H2",{class:!0});var f=I(t);l=L(f,i[0]),f.forEach(d),n=N(u),a=w(u,"UL",{class:!0});var c=I(a);for(let h=0;h<r.length;h+=1)r[h].l(c);c.forEach(d),u.forEach(d),this.h()},h(){k(t,"class","margin-top-lg--1"),k(a,"class","list--neutral margin-top--negative-one-fix"),k(e,"class","nav-secondary--border-left-lg col col--md-47 col--lg-19 col--lg-offset-2 padding-left margin-top-lg--3")},m(o,u){y(o,e,u),b(e,t),b(t,l),b(e,n),b(e,a);for(let f=0;f<r.length;f+=1)r[f].m(a,null)},p(o,[u]){if(u&1&&O(l,o[0]),u&2){s=o[1];let f;for(f=0;f<s.length;f+=1){const c=el(o,s,f);r[f]?r[f].p(c,u):(r[f]=ll(c),r[f].c(),r[f].m(a,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=s.length}},i:H,o:H,d(o){o&&d(e),$(r,o)}}}function mn(i,e,t){let{title:l="Highlighted content"}=e,{links:n=[]}=e;return i.$$set=a=>{"title"in a&&t(0,l=a.title),"links"in a&&t(1,n=a.links)},[l,n]}class gn extends ee{constructor(e){super();le(this,e,mn,dn,te,{title:0,links:1})}}function tl(i,e,t){const l=i.slice();return l[2]=e[t],l}function vn(i){let e,t=i[2].label+"",l;return{c(){e=E("li"),l=V(t),this.h()},l(n){e=w(n,"LI",{class:!0,"aria-current":!0});var a=I(e);l=L(a,t),a.forEach(d),this.h()},h(){k(e,"class","ons-list__item svelte-1dyzlhu"),k(e,"aria-current","true")},m(n,a){y(n,e,a),b(e,l)},p(n,a){a&2&&t!==(t=n[2].label+"")&&O(l,t)},d(n){n&&d(e)}}}function bn(i){let e,t,l=i[2].label+"",n,a,s;return{c(){e=E("li"),t=E("a"),n=V(l),s=A(),this.h()},l(r){e=w(r,"LI",{class:!0});var o=I(e);t=w(o,"A",{href:!0,class:!0});var u=I(t);n=L(u,l),u.forEach(d),s=N(o),o.forEach(d),this.h()},h(){k(t,"href",a=i[2].url),k(t,"class","ons-list__link"),k(e,"class","ons-list__item svelte-1dyzlhu")},m(r,o){y(r,e,o),b(e,t),b(t,n),b(e,s)},p(r,o){o&2&&l!==(l=r[2].label+"")&&O(n,l),o&2&&a!==(a=r[2].url)&&k(t,"href",a)},d(r){r&&d(e)}}}function nl(i){let e;function t(a,s){return a[2].url?bn:vn}let l=t(i),n=l(i);return{c(){n.c(),e=G()},l(a){n.l(a),e=G()},m(a,s){n.m(a,s),y(a,e,s)},p(a,s){l===(l=t(a))&&n?n.p(a,s):(n.d(1),n=l(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){n.d(a),a&&d(e)}}}function kn(i){let e,t,l,n,a,s=i[1],r=[];for(let o=0;o<s.length;o+=1)r[o]=nl(tl(i,s,o));return{c(){e=E("nav"),t=E("h2"),l=V(i[0]),n=A(),a=E("ol");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=w(o,"NAV",{class:!0,"aria-label":!0});var u=I(e);t=w(u,"H2",{class:!0});var f=I(t);l=L(f,i[0]),f.forEach(d),n=N(u),a=w(u,"OL",{class:!0});var c=I(a);for(let h=0;h<r.length;h+=1)r[h].l(c);c.forEach(d),u.forEach(d),this.h()},h(){k(t,"class","ons-toc__title ons-u-fs-r--b ons-u-mb-s svelte-1dyzlhu"),k(a,"class","ons-list ons-u-mb-m ons-list--dashed svelte-1dyzlhu"),k(e,"class","ons-toc svelte-1dyzlhu"),k(e,"aria-label","Pages in this guide")},m(o,u){y(o,e,u),b(e,t),b(t,l),b(e,n),b(e,a);for(let f=0;f<r.length;f+=1)r[f].m(a,null)},p(o,[u]){if(u&1&&O(l,o[0]),u&2){s=o[1];let f;for(f=0;f<s.length;f+=1){const c=tl(o,s,f);r[f]?r[f].p(c,u):(r[f]=nl(c),r[f].c(),r[f].m(a,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=s.length}},i:H,o:H,d(o){o&&d(e),$(r,o)}}}function pn(i,e,t){let{label:l="Contents"}=e,{links:n=[]}=e;return i.$$set=a=>{"label"in a&&t(0,l=a.label),"links"in a&&t(1,n=a.links)},[l,n]}class En extends ee{constructor(e){super();le(this,e,pn,kn,te,{label:0,links:1})}}function wn(i){let e,t,l,n,a,s,r,o,u;return{c(){e=E("div"),t=E("div"),l=E("dl"),n=E("div"),a=E("dt"),s=V(i[1]),r=V(":"),o=A(),u=E("dd"),this.h()},l(f){e=w(f,"DIV",{class:!0});var c=I(e);t=w(c,"DIV",{class:!0});var h=I(t);l=w(h,"DL",{class:!0});var _=I(l);n=w(_,"DIV",{class:!0});var m=I(n);a=w(m,"DT",{class:!0});var g=I(a);s=L(g,i[1]),r=L(g,":"),g.forEach(d),o=N(m),u=w(m,"DD",{class:!0});var D=I(u);D.forEach(d),m.forEach(d),_.forEach(d),h.forEach(d),c.forEach(d),this.h()},h(){k(a,"class","meta__term inline"),k(u,"class","inline"),k(n,"class","col padding-left--0 meta__item meta__item--no-border"),k(l,"class","col-wrap"),k(t,"class","wrapper"),k(e,"class","meta-wrap--thin"),fe(e,"meta-wrap",i[0]=="grey")},m(f,c){y(f,e,c),b(e,t),b(t,l),b(l,n),b(n,a),b(a,s),b(a,r),b(n,o),b(n,u),u.innerHTML=i[2]},p(f,[c]){c&2&&O(s,f[1]),c&4&&(u.innerHTML=f[2]),c&1&&fe(e,"meta-wrap",f[0]=="grey")},i:H,o:H,d(f){f&&d(e)}}}function yn(i,e,t){let{background:l="grey"}=e,{label:n="Last updated"}=e,{value:a="date"}=e;return i.$$set=s=>{"background"in s&&t(0,l=s.background),"label"in s&&t(1,n=s.label),"value"in s&&t(2,a=s.value)},[l,n,a]}class Dn extends ee{constructor(e){super();le(this,e,yn,wn,te,{background:0,label:1,value:2})}}const Cn=i=>({}),al=i=>({});function il(i){let e,t;return e=new _n({props:{links:i[2],mode:i[0]}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n&4&&(a.links=l[2]),n&1&&(a.mode=l[0]),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function sl(i){let e,t;return{c(){e=E("p"),t=V(i[6]),this.h()},l(l){e=w(l,"P",{class:!0});var n=I(e);t=L(n,i[6]),n.forEach(d),this.h()},h(){k(e,"class","page-neutral-intro__meta margin-top--0 margin-bottom--3")},m(l,n){y(l,e,n),b(e,t)},p(l,n){n&64&&O(t,l[6])},d(l){l&&d(e)}}}function ol(i){let e,t;return e=new En({props:{links:i[3],label:"Contents"}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n&8&&(a.links=l[3]),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function rl(i){let e,t;return e=new gn({props:{links:i[4]}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n&16&&(a.links=l[4]),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function fl(i){let e,t;return e=new Dn({props:{label:"Last updated",value:i[5],background:i[1]}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n&32&&(a.value=l[5]),n&2&&(a.background=l[1]),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function ul(i){let e,t,l,n;return{c(){e=E("div"),t=E("div"),l=E("div"),n=E("hr"),this.h()},l(a){e=w(a,"DIV",{class:!0});var s=I(e);t=w(s,"DIV",{class:!0});var r=I(t);l=w(r,"DIV",{class:!0});var o=I(l);n=w(o,"HR",{style:!0}),o.forEach(d),r.forEach(d),s.forEach(d),this.h()},h(){z(n,"border","0"),z(n,"height","0"),z(n,"border-top","1px solid #808080"),k(l,"class","col"),k(t,"class","col-wrap"),k(e,"class","wrapper")},m(a,s){y(a,e,s),b(e,t),b(t,l),b(l,n)},d(a){a&&d(e)}}}function In(i){let e,t,l,n,a,s,r,o,u,f,c,h,_,m,g=i[2]&&il(i);const D=i[8].default,v=me(D,i,i[7],null);let S=i[6]&&sl(i),C=i[3]&&ol(i),p=i[4]&&rl(i);const P=i[8].meta,M=me(P,i,i[7],al);let W=i[5]&&fl(i),J=i[1]=="none"&&ul();return{c(){e=E("div"),t=E("div"),l=E("div"),n=E("div"),g&&g.c(),a=A(),s=E("div"),v&&v.c(),r=A(),S&&S.c(),o=A(),C&&C.c(),u=A(),p&&p.c(),f=A(),M&&M.c(),c=A(),W&&W.c(),h=A(),J&&J.c(),this.h()},l(F){e=w(F,"DIV",{class:!0});var q=I(e);t=w(q,"DIV",{class:!0});var ke=I(t);l=w(ke,"DIV",{class:!0});var ne=I(l);n=w(ne,"DIV",{class:!0});var Q=I(n);g&&g.l(Q),a=N(Q),s=w(Q,"DIV",{class:!0});var _e=I(s);v&&v.l(_e),r=N(_e),S&&S.l(_e),o=N(_e),C&&C.l(_e),_e.forEach(d),u=N(Q),p&&p.l(Q),Q.forEach(d),ne.forEach(d),ke.forEach(d),f=N(q),M&&M.l(q),c=N(q),W&&W.l(q),h=N(q),J&&J.l(q),q.forEach(d),this.h()},h(){k(s,"class","col col--md-47"),fe(s,"col--lg-38",i[4]),fe(s,"col--lg-48",!i[4]),k(n,"class","col"),k(l,"class","col-wrap"),k(t,"class","wrapper"),k(e,"class",_="page-neutral-intro "+(i[1]=="grey"?"background--gallery":""))},m(F,q){y(F,e,q),b(e,t),b(t,l),b(l,n),g&&g.m(n,null),b(n,a),b(n,s),v&&v.m(s,null),b(s,r),S&&S.m(s,null),b(s,o),C&&C.m(s,null),b(n,u),p&&p.m(n,null),b(e,f),M&&M.m(e,null),b(e,c),W&&W.m(e,null),b(e,h),J&&J.m(e,null),m=!0},p(F,[q]){F[2]?g?(g.p(F,q),q&4&&T(g,1)):(g=il(F),g.c(),T(g,1),g.m(n,a)):g&&(oe(),j(g,1,1,()=>{g=null}),re()),v&&v.p&&(!m||q&128)&&ge(v,D,F,F[7],m?be(D,F[7],q,null):ve(F[7]),null),F[6]?S?S.p(F,q):(S=sl(F),S.c(),S.m(s,o)):S&&(S.d(1),S=null),F[3]?C?(C.p(F,q),q&8&&T(C,1)):(C=ol(F),C.c(),T(C,1),C.m(s,null)):C&&(oe(),j(C,1,1,()=>{C=null}),re()),q&16&&fe(s,"col--lg-38",F[4]),q&16&&fe(s,"col--lg-48",!F[4]),F[4]?p?(p.p(F,q),q&16&&T(p,1)):(p=rl(F),p.c(),T(p,1),p.m(n,null)):p&&(oe(),j(p,1,1,()=>{p=null}),re()),M&&M.p&&(!m||q&128)&&ge(M,P,F,F[7],m?be(P,F[7],q,Cn):ve(F[7]),al),F[5]?W?(W.p(F,q),q&32&&T(W,1)):(W=fl(F),W.c(),T(W,1),W.m(e,h)):W&&(oe(),j(W,1,1,()=>{W=null}),re()),F[1]=="none"?J||(J=ul(),J.c(),J.m(e,null)):J&&(J.d(1),J=null),(!m||q&2&&_!==(_="page-neutral-intro "+(F[1]=="grey"?"background--gallery":"")))&&k(e,"class",_)},i(F){m||(T(g),T(v,F),T(C),T(p),T(M,F),T(W),m=!0)},o(F){j(g),j(v,F),j(C),j(p),j(M,F),j(W),m=!1},d(F){F&&d(e),g&&g.d(),v&&v.d(F),S&&S.d(),C&&C.d(),p&&p.d(),M&&M.d(F),W&&W.d(),J&&J.d()}}}function Sn(i,e,t){let{$$slots:l={},$$scope:n}=e,{mode:a="neutral"}=e,{background:s="grey"}=e,{breadcrumb:r=null}=e,{contents:o=null}=e,{highlighted:u=null}=e,{updated:f=null}=e,{date:c=null}=e;return ze("mode",a),ze("background",s),i.$$set=h=>{"mode"in h&&t(0,a=h.mode),"background"in h&&t(1,s=h.background),"breadcrumb"in h&&t(2,r=h.breadcrumb),"contents"in h&&t(3,o=h.contents),"highlighted"in h&&t(4,u=h.highlighted),"updated"in h&&t(5,f=h.updated),"date"in h&&t(6,c=h.date),"$$scope"in h&&t(7,n=h.$$scope)},[a,s,r,o,u,f,c,n,l]}class zn extends ee{constructor(e){super();le(this,e,Sn,In,te,{mode:0,background:1,breadcrumb:2,contents:3,highlighted:4,updated:5,date:6})}}function Pn(i){let e,t,l;const n=i[2].default,a=me(n,i,i[1],null);return{c(){e=E("h1"),a&&a.c(),this.h()},l(s){e=w(s,"H1",{class:!0});var r=I(e);a&&a.l(r),r.forEach(d),this.h()},h(){k(e,"class",t=i[0]=="neutral"?"page-neutral-intro__title":"page-intro__title")},m(s,r){y(s,e,r),a&&a.m(e,null),l=!0},p(s,[r]){a&&a.p&&(!l||r&2)&&ge(a,n,s,s[1],l?be(n,s[1],r,null):ve(s[1]),null),(!l||r&1&&t!==(t=s[0]=="neutral"?"page-neutral-intro__title":"page-intro__title"))&&k(e,"class",t)},i(s){l||(T(a,s),l=!0)},o(s){j(a,s),l=!1},d(s){s&&d(e),a&&a.d(s)}}}function Tn(i,e,t){let{$$slots:l={},$$scope:n}=e,{mode:a=Te("mode")}=e;return i.$$set=s=>{"mode"in s&&t(0,a=s.mode),"$$scope"in s&&t(1,n=s.$$scope)},[a,n,l]}class Vn extends ee{constructor(e){super();le(this,e,Tn,Pn,te,{mode:0})}}function Ln(i){let e,t,l,n,a=`translateX(${i[3]/i[1]+(i[1]-i[4])}px)`,s,r=`${i[2]}px`,o=`${i[4]}px`;return{c(){e=E("div"),t=V(i[0]),l=A(),n=E("div"),this.h()},l(u){e=w(u,"DIV",{class:!0});var f=I(e);t=L(f,i[0]),l=N(f),n=w(f,"DIV",{class:!0}),I(n).forEach(d),f.forEach(d),this.h()},h(){k(n,"class","caret svelte-1491tb3"),z(n,"transform",a,!1),k(e,"class","tooltip svelte-1491tb3"),Le(()=>i[6].call(e)),z(e,"top",r,!1),z(e,"left",o,!1)},m(u,f){y(u,e,f),b(e,t),b(e,l),b(e,n),s=Oe(e,i[6].bind(e))},p(u,[f]){f&1&&O(t,u[0]),f&26&&a!==(a=`translateX(${u[3]/u[1]+(u[1]-u[4])}px)`)&&z(n,"transform",a,!1),f&4&&r!==(r=`${u[2]}px`)&&z(e,"top",r,!1),f&16&&o!==(o=`${u[4]}px`)&&z(e,"left",o,!1)},i:H,o:H,d(u){u&&d(e),s()}}}const Ne=4;function An(i,e,t){let l,{title:n}=e,{x:a}=e,{y:s}=e,{width:r}=e,o;function u(){o=this.clientWidth,t(3,o)}return i.$$set=f=>{"title"in f&&t(0,n=f.title),"x"in f&&t(1,a=f.x),"y"in f&&t(2,s=f.y),"width"in f&&t(5,r=f.width)},i.$$.update=()=>{i.$$.dirty&42&&t(4,l=o&&a+o/2>r-Ne?r-o/2-Ne:o&&a-o/2<0+Ne?o/2+Ne:a)},[n,a,s,o,l,r,u]}class Nn extends ee{constructor(e){super();le(this,e,An,Ln,te,{title:0,x:1,y:2,width:5})}}function jn(i){let e,t;function l(a){e=i.getAttribute("title"),i.removeAttribute("title");let s=document.body.getBoundingClientRect(),r=i.getBoundingClientRect(),o=r.bottom,u=(r.left+r.right)/2;t=new Nn({props:{title:e,x:u,y:o-s.y,width:s.width},target:document.body})}function n(){t.$destroy(),i.setAttribute("title",e)}return i.addEventListener("mouseover",l),i.addEventListener("mouseout",n),{destroy(){t&&t.$destroy(),i.removeEventListener("mouseover",l),i.removeEventListener("mouseout",n)}}}function cl(i,e,t){const l=i.slice();return l[16]=e[t],l[18]=t,l}function hl(i,e,t){const l=i.slice();return l[19]=e[t],l[21]=t,l}function _l(i,e,t){const l=i.slice();return l[19]=e[t],l[21]=t,l}function dl(i,e,t){const l=i.slice();return l[23]=e[t],l[18]=t,l}function ml(i){let e,t=i[10],l=[];for(let n=0;n<t.length;n+=1)l[n]=gl(dl(i,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=G()},l(n){for(let a=0;a<l.length;a+=1)l[a].l(n);e=G()},m(n,a){for(let s=0;s<l.length;s+=1)l[s].m(n,a);y(n,e,a)},p(n,a){if(a&1040){t=n[10];let s;for(s=0;s<t.length;s+=1){const r=dl(n,t,s);l[s]?l[s].p(r,a):(l[s]=gl(r),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){$(l,n),n&&d(e)}}}function gl(i){let e,t,l=`${i[18]==0?0:i[4]}px`,n,a,s=i[23]+"",r,o,u;return{c(){e=E("li"),t=E("div"),n=A(),a=E("span"),r=V(s),u=A(),this.h()},l(f){e=w(f,"LI",{class:!0});var c=I(e);t=w(c,"DIV",{class:!0}),I(t).forEach(d),n=N(c),a=w(c,"SPAN",{class:!0});var h=I(a);r=L(h,s),h.forEach(d),u=N(c),c.forEach(d),this.h()},h(){k(t,"class","legend-vis "+(i[18]==0?"bar":"marker-vis")+" svelte-jnrirx"),z(t,"border-bottom-width",l,!1),k(a,"class",o=Ve(i[18]==0?"bold":"brackets")+" svelte-jnrirx"),k(e,"class","svelte-jnrirx")},m(f,c){y(f,e,c),b(e,t),b(e,n),b(e,a),b(a,r),b(e,u)},p(f,c){c&16&&l!==(l=`${f[18]==0?0:f[4]}px`)&&z(t,"border-bottom-width",l,!1),c&1024&&s!==(s=f[23]+"")&&O(r,s)},d(f){f&&d(e)}}}function Kn(i){let e,t=i[16].values,l=[];for(let n=0;n<t.length;n+=1)l[n]=vl(hl(i,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=G()},l(n){for(let a=0;a<l.length;a+=1)l[a].l(n);e=G()},m(n,a){for(let s=0;s<l.length;s+=1)l[s].m(n,a);y(n,e,a)},p(n,a){if(a&2834){t=n[16].values;let s;for(s=0;s<t.length;s+=1){const r=hl(n,t,s);l[s]?l[s].p(r,a):(l[s]=vl(r),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){$(l,n),n&&d(e)}}}function Mn(i){let e,t=i[16].values,l=[];for(let n=0;n<t.length;n+=1)l[n]=bl(_l(i,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=G()},l(n){for(let a=0;a<l.length;a+=1)l[a].l(n);e=G()},m(n,a){for(let s=0;s<l.length;s+=1)l[s].m(n,a);y(n,e,a)},p(n,a){if(a&2823){t=n[16].values;let s;for(s=0;s<t.length;s+=1){const r=_l(n,t,s);l[s]?l[s].p(r,a):(l[s]=bl(r),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){$(l,n),n&&d(e)}}}function vl(i){let e,t=`calc(${i[9](i[19][i[1]])}% - ${i[4]/2}px)`,l=`${i[21]/i[11].length*100}%`,n=`calc(${1/i[11].length*100}% - 2px)`,a=`${i[4]}px`;return{c(){e=E("div"),this.h()},l(s){e=w(s,"DIV",{class:!0}),I(e).forEach(d),this.h()},h(){k(e,"class","marker svelte-jnrirx"),z(e,"bottom",t,!1),z(e,"height","0px",!1),z(e,"left",l,!1),z(e,"width",n,!1),z(e,"border-bottom-width",a,!1)},m(s,r){y(s,e,r)},p(s,r){r&786&&t!==(t=`calc(${s[9](s[19][s[1]])}% - ${s[4]/2}px)`)&&z(e,"bottom",t,!1),r&2048&&l!==(l=`${s[21]/s[11].length*100}%`)&&z(e,"left",l,!1),r&2048&&n!==(n=`calc(${1/s[11].length*100}% - 2px)`)&&z(e,"width",n,!1),r&16&&a!==(a=`${s[4]}px`)&&z(e,"border-bottom-width",a,!1)},d(s){s&&d(e)}}}function bl(i){let e,t,l,n=`${i[9](i[19][i[1]])}%`,a=`calc(${i[21]/i[11].length*100}%)`,s=`calc(${(1-(i[21]+1)/i[11].length)*100}% + 2px)`,r,o;return{c(){e=E("div"),this.h()},l(u){e=w(u,"DIV",{title:!0,class:!0}),I(e).forEach(d),this.h()},h(){k(e,"title",t=`${i[19][i[0]]}: ${i[2](i[19][i[1]])}%`+(i[8].length>1?` (${i[2](i[8][i[18]+1].values[i[21]][i[1]])}%)`:"")),k(e,"class","bar svelte-jnrirx"),z(e,"bottom","0",!1),z(e,"height",n,!1),z(e,"left",a,!1),z(e,"right",s,!1)},m(u,f){y(u,e,f),r||(o=Bt(l=jn.call(null,e)),r=!0)},p(u,f){f&263&&t!==(t=`${u[19][u[0]]}: ${u[2](u[19][u[1]])}%`+(u[8].length>1?` (${u[2](u[8][u[18]+1].values[u[21]][u[1]])}%)`:""))&&k(e,"title",t),f&770&&n!==(n=`${u[9](u[19][u[1]])}%`)&&z(e,"height",n,!1),f&2048&&a!==(a=`calc(${u[21]/u[11].length*100}%)`)&&z(e,"left",a,!1),f&2048&&s!==(s=`calc(${(1-(u[21]+1)/u[11].length)*100}% + 2px)`)&&z(e,"right",s,!1)},d(u){u&&d(e),r=!1,o()}}}function kl(i){let e;function t(a,s){return a[18]==0?Mn:Kn}let n=t(i)(i);return{c(){n.c(),e=G()},l(a){n.l(a),e=G()},m(a,s){n.m(a,s),y(a,e,s)},p(a,s){n.p(a,s)},d(a){n.d(a),a&&d(e)}}}function pl(i){let e,t,l;return{c(){e=E("small"),t=V(i[6]),l=V(i[7]),this.h()},l(n){e=w(n,"SMALL",{class:!0});var a=I(e);t=L(a,i[6]),l=L(a,i[7]),a.forEach(d),this.h()},h(){k(e,"class","svelte-jnrirx")},m(n,a){y(n,e,a),b(e,t),b(e,l)},p(n,a){a&64&&O(t,n[6]),a&128&&O(l,n[7])},d(n){n&&d(e)}}}function Fn(i){let e,t,l,n=`${i[3]}px`,a,s,r,o=i[5][0]+"",u,f,c,h=i[5][1]+"",_,m,g,D=i[10][1]&&ml(i),v=i[8],S=[];for(let p=0;p<v.length;p+=1)S[p]=kl(cl(i,v,p));let C=i[6]&&pl(i);return{c(){e=E("ul"),D&&D.c(),t=A(),l=E("div");for(let p=0;p<S.length;p+=1)S[p].c();a=A(),s=E("div"),r=E("div"),u=V(o),f=A(),c=E("div"),_=V(h),m=A(),C&&C.c(),g=G(),this.h()},l(p){e=w(p,"UL",{class:!0});var P=I(e);D&&D.l(P),P.forEach(d),t=N(p),l=w(p,"DIV",{class:!0});var M=I(l);for(let q=0;q<S.length;q+=1)S[q].l(M);M.forEach(d),a=N(p),s=w(p,"DIV",{class:!0});var W=I(s);r=w(W,"DIV",{class:!0});var J=I(r);u=L(J,o),J.forEach(d),f=N(W),c=w(W,"DIV",{class:!0});var F=I(c);_=L(F,h),F.forEach(d),W.forEach(d),m=N(p),C&&C.l(p),g=G(),this.h()},h(){k(e,"class","legend-block svelte-jnrirx"),k(l,"class","bar-group svelte-jnrirx"),z(l,"height",n,!1),k(r,"class","svelte-jnrirx"),z(r,"left","0",!1),k(c,"class","svelte-jnrirx"),z(c,"right","0",!1),k(s,"class","x-scale svelte-jnrirx"),z(s,"height","1rem",!1)},m(p,P){y(p,e,P),D&&D.m(e,null),y(p,t,P),y(p,l,P);for(let M=0;M<S.length;M+=1)S[M].m(l,null);y(p,a,P),y(p,s,P),b(s,r),b(r,u),b(s,f),b(s,c),b(c,_),y(p,m,P),C&&C.m(p,P),y(p,g,P)},p(p,[P]){if(p[10][1]?D?D.p(p,P):(D=ml(p),D.c(),D.m(e,null)):D&&(D.d(1),D=null),P&2839){v=p[8];let M;for(M=0;M<v.length;M+=1){const W=cl(p,v,M);S[M]?S[M].p(W,P):(S[M]=kl(W),S[M].c(),S[M].m(l,null))}for(;M<S.length;M+=1)S[M].d(1);S.length=v.length}P&8&&n!==(n=`${p[3]}px`)&&z(l,"height",n,!1),P&32&&o!==(o=p[5][0]+"")&&O(u,o),P&32&&h!==(h=p[5][1]+"")&&O(_,h),p[6]?C?C.p(p,P):(C=pl(p),C.c(),C.m(g.parentNode,g)):C&&(C.d(1),C=null)},i:H,o:H,d(p){p&&d(e),D&&D.d(),p&&d(t),p&&d(l),$(S,p),p&&d(a),p&&d(s),p&&d(m),C&&C.d(p),p&&d(g)}}}function Bn(i,e,t){let l,n,a,s,r,{data:o}=e,{xKey:u="category"}=e,{yKey:f="value"}=e,{zKey:c="areanm"}=e,{formatTick:h=C=>C.toFixed(1)}=e,{height:_=100}=e,{markerWidth:m=2.5}=e,{minmax:g=["0 years","85+"]}=e,{base:D=null}=e,{base_ext:v=", 5 year age bands"}=e;function S(C,p){let P={};for(const W of C)P[W[p]]||(P[W[p]]={label:W[p],values:[]}),P[W[p]].values.push(W);let M=[];for(const W in P)M.push(P[W]);return console.log(M),M}return i.$$set=C=>{"data"in C&&t(12,o=C.data),"xKey"in C&&t(0,u=C.xKey),"yKey"in C&&t(1,f=C.yKey),"zKey"in C&&t(13,c=C.zKey),"formatTick"in C&&t(2,h=C.formatTick),"height"in C&&t(3,_=C.height),"markerWidth"in C&&t(4,m=C.markerWidth),"minmax"in C&&t(5,g=C.minmax),"base"in C&&t(6,D=C.base),"base_ext"in C&&t(7,v=C.base_ext)},i.$$.update=()=>{i.$$.dirty&4097&&t(11,l=o.map(C=>C[u]).filter((C,p,P)=>P.indexOf(C)===p)),i.$$.dirty&4098&&t(14,n=[0,Math.max(...o.map(C=>C[f]))]),i.$$.dirty&12288&&t(10,a=o.map(C=>C[c]).filter((C,p,P)=>P.indexOf(C)===p)),i.$$.dirty&16384&&t(9,s=C=>Math.abs(C/n[1])*100),i.$$.dirty&12288&&t(8,r=S(o,c))},[u,f,h,_,m,g,D,v,r,s,a,l,o,c,n]}class On extends ee{constructor(e){super();le(this,e,Bn,Fn,te,{data:12,xKey:0,yKey:1,zKey:13,formatTick:2,height:3,markerWidth:4,minmax:5,base:6,base_ext:7})}}function El(i,e,t){const l=i.slice();return l[10]=e[t],l[12]=t,l}function wl(i){let e,t,l,n,a,s=i[6](i[4][i[12]])+"",r;return{c(){e=E("div"),t=A(),l=E("div"),n=A(),a=E("div"),r=V(s),this.h()},l(o){e=w(o,"DIV",{class:!0,style:!0}),I(e).forEach(d),t=N(o),l=w(o,"DIV",{class:!0,style:!0}),I(l).forEach(d),n=N(o),a=w(o,"DIV",{class:!0,style:!0});var u=I(a);r=L(u,s),u.forEach(d),this.h()},h(){k(e,"class","block svelte-1a3ut6y"),z(e,"width",100/(i[4].length-1)+"%"),z(e,"left",i[12]*(100/(i[4].length-1))+"%"),z(e,"background-color",i[5][i[12]]),k(l,"class","line svelte-1a3ut6y"),z(l,"left",i[12]*(100/(i[4].length-1))+"%"),k(a,"class","tick svelte-1a3ut6y"),z(a,"left",i[12]*(100/(i[4].length-1))+"%"),fe(a,"tick-start",i[12]==0)},m(o,u){y(o,e,u),y(o,t,u),y(o,l,u),y(o,n,u),y(o,a,u),b(a,r)},p(o,u){u&16&&z(e,"width",100/(o[4].length-1)+"%"),u&16&&z(e,"left",o[12]*(100/(o[4].length-1))+"%"),u&32&&z(e,"background-color",o[5][o[12]]),u&16&&z(l,"left",o[12]*(100/(o[4].length-1))+"%"),u&80&&s!==(s=o[6](o[4][o[12]])+"")&&O(r,s),u&16&&z(a,"left",o[12]*(100/(o[4].length-1))+"%")},d(o){o&&d(e),o&&d(t),o&&d(l),o&&d(n),o&&d(a)}}}function yl(i){let e,t,l,n=i[7](i[1])+"",a,s;return{c(){e=E("div"),t=A(),l=E("div"),a=V(n),s=V(i[8]),this.h()},l(r){e=w(r,"DIV",{class:!0,style:!0}),I(e).forEach(d),t=N(r),l=w(r,"DIV",{class:!0,style:!0});var o=I(l);a=L(o,n),s=L(o,i[8]),o.forEach(d),this.h()},h(){k(e,"class","marker svelte-1a3ut6y"),z(e,"width",i[2]+"px"),z(e,"left","calc("+i[9](i[1],i[4])+"% - "+i[2]/2+"px)"),k(l,"class","value svelte-1a3ut6y"),z(l,"left",i[9](i[1],i[4])+"%")},m(r,o){y(r,e,o),y(r,t,o),y(r,l,o),b(l,a),b(l,s)},p(r,o){o&4&&z(e,"width",r[2]+"px"),o&22&&z(e,"left","calc("+r[9](r[1],r[4])+"% - "+r[2]/2+"px)"),o&130&&n!==(n=r[7](r[1])+"")&&O(a,n),o&256&&O(s,r[8]),o&18&&z(l,"left",r[9](r[1],r[4])+"%")},d(r){r&&d(e),r&&d(t),r&&d(l)}}}function Dl(i){let e,t,l,n=i[7](i[0])+"",a,s;return{c(){e=E("div"),t=A(),l=E("div"),a=V(n),s=V(i[8]),this.h()},l(r){e=w(r,"DIV",{class:!0,style:!0}),I(e).forEach(d),t=N(r),l=w(r,"DIV",{class:!0,style:!0});var o=I(l);a=L(o,n),s=L(o,i[8]),o.forEach(d),this.h()},h(){k(e,"class","marker marker-hovered svelte-1a3ut6y"),z(e,"width",i[2]+"px"),z(e,"left","calc("+i[9](i[0],i[4])+"% - "+i[2]/2+"px)"),k(l,"class","value svelte-1a3ut6y"),z(l,"left",i[9](i[0],i[4])+"%")},m(r,o){y(r,e,o),y(r,t,o),y(r,l,o),b(l,a),b(l,s)},p(r,o){o&4&&z(e,"width",r[2]+"px"),o&21&&z(e,"left","calc("+r[9](r[0],r[4])+"% - "+r[2]/2+"px)"),o&129&&n!==(n=r[7](r[0])+"")&&O(a,n),o&256&&O(s,r[8]),o&17&&z(l,"left",r[9](r[0],r[4])+"%")},d(r){r&&d(e),r&&d(t),r&&d(l)}}}function Wn(i){let e,t,l,n,a,s=i[6](i[4][i[4].length-1])+"",r,o,u,f,c=i[4].slice(1),h=[];for(let g=0;g<c.length;g+=1)h[g]=wl(El(i,c,g));let _=i[1]&&yl(i),m=i[0]&&Dl(i);return{c(){e=E("div");for(let g=0;g<h.length;g+=1)h[g].c();t=A(),l=E("div"),n=A(),a=E("div"),r=V(s),o=V(i[8]),u=A(),_&&_.c(),f=A(),m&&m.c(),this.h()},l(g){e=w(g,"DIV",{class:!0,style:!0});var D=I(e);for(let S=0;S<h.length;S+=1)h[S].l(D);t=N(D),l=w(D,"DIV",{class:!0,style:!0}),I(l).forEach(d),n=N(D),a=w(D,"DIV",{class:!0,style:!0});var v=I(a);r=L(v,s),o=L(v,i[8]),v.forEach(d),u=N(D),_&&_.l(D),f=N(D),m&&m.l(D),D.forEach(d),this.h()},h(){k(l,"class","line svelte-1a3ut6y"),z(l,"left","100%"),k(a,"class","tick tick-end svelte-1a3ut6y"),z(a,"left","100%"),k(e,"class","container svelte-1a3ut6y"),z(e,"height",i[3]+"px")},m(g,D){y(g,e,D);for(let v=0;v<h.length;v+=1)h[v].m(e,null);b(e,t),b(e,l),b(e,n),b(e,a),b(a,r),b(a,o),b(e,u),_&&_.m(e,null),b(e,f),m&&m.m(e,null)},p(g,[D]){if(D&112){c=g[4].slice(1);let v;for(v=0;v<c.length;v+=1){const S=El(g,c,v);h[v]?h[v].p(S,D):(h[v]=wl(S),h[v].c(),h[v].m(e,t))}for(;v<h.length;v+=1)h[v].d(1);h.length=c.length}D&80&&s!==(s=g[6](g[4][g[4].length-1])+"")&&O(r,s),D&256&&O(o,g[8]),g[1]?_?_.p(g,D):(_=yl(g),_.c(),_.m(e,f)):_&&(_.d(1),_=null),g[0]?m?m.p(g,D):(m=Dl(g),m.c(),m.m(e,null)):m&&(m.d(1),m=null),D&8&&z(e,"height",g[3]+"px")},i:H,o:H,d(g){g&&d(e),$(h,g),_&&_.d(),m&&m.d()}}}function Hn(i,e,t){let{hovered:l=null}=e,{selected:n=null}=e,{lineWidth:a=3}=e,{height:s=15}=e,{breaks:r=[0,20,40,60,80,100]}=e,{colors:o=["rgba(234,236,177,.8)","rgba(169,216,145,.8)","rgba(0,167,186,.8)","rgba(0,78,166,.8)","rgba(0,13,84,.8)"]}=e,{formatTick:u=_=>_.toFixed(1)}=e,{formatVal:f=_=>_.toFixed(1)}=e,{suffix:c="%"}=e;const h=(_,m)=>{let g=0;for(;_>m[g+1];)g+=1;let D=100/(m.length-1),v=(_-m[g])/(m[g+1]-m[g]);return(g+v)*D};return i.$$set=_=>{"hovered"in _&&t(0,l=_.hovered),"selected"in _&&t(1,n=_.selected),"lineWidth"in _&&t(2,a=_.lineWidth),"height"in _&&t(3,s=_.height),"breaks"in _&&t(4,r=_.breaks),"colors"in _&&t(5,o=_.colors),"formatTick"in _&&t(6,u=_.formatTick),"formatVal"in _&&t(7,f=_.formatVal),"suffix"in _&&t(8,c=_.suffix)},[l,n,a,s,r,o,u,f,c,h]}class Gn extends ee{constructor(e){super();le(this,e,Hn,Wn,te,{hovered:0,selected:1,lineWidth:2,height:3,breaks:4,colors:5,formatTick:6,formatVal:7,suffix:8})}}function Cl(i,e,t){const l=i.slice();return l[14]=e[t],l}function Il(i,e,t){const l=i.slice();return l[17]=e[t],l[19]=t,l}function Sl(i,e,t){const l=i.slice();return l[17]=e[t],l[19]=t,l}function zl(i,e,t){const l=i.slice();return l[14]=e[t],l[19]=t,l}function Pl(i){let e,t=i[8],l=[];for(let n=0;n<t.length;n+=1)l[n]=Tl(zl(i,t,n));return{c(){e=E("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=w(n,"UL",{class:!0});var a=I(e);for(let s=0;s<l.length;s+=1)l[s].l(a);a.forEach(d),this.h()},h(){k(e,"class","legend-block svelte-1uu6kh")},m(n,a){y(n,e,a);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,a){if(a&288){t=n[8];let s;for(s=0;s<t.length;s+=1){const r=zl(n,t,s);l[s]?l[s].p(r,a):(l[s]=Tl(r),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&d(e),$(l,n)}}}function Tl(i){let e,t,l,n,a=i[14]+"",s,r,o;return{c(){e=E("li"),t=E("div"),l=A(),n=E("span"),s=V(a),o=A(),this.h()},l(u){e=w(u,"LI",{class:!0});var f=I(e);t=w(f,"DIV",{class:!0}),I(t).forEach(d),l=N(f),n=w(f,"SPAN",{class:!0});var c=I(n);s=L(c,a),c.forEach(d),o=N(f),f.forEach(d),this.h()},h(){k(t,"class","legend-vis "+(i[19]==0?"bar":"marker")+" svelte-1uu6kh"),z(t,"height","1rem",!1),z(t,"width",i[19]==0?"1rem":i[5]+"px",!1),k(n,"class",r=Ve(i[19]==0?"bold":"brackets")+" svelte-1uu6kh"),k(e,"class","svelte-1uu6kh"),fe(e,"ew",i[19]!=0)},m(u,f){y(u,e,f),b(e,t),b(e,l),b(e,n),b(n,s),b(e,o)},p(u,f){f&32&&z(t,"width",u[19]==0?"1rem":u[5]+"px",!1),f&256&&a!==(a=u[14]+"")&&O(s,a)},d(u){u&&d(e)}}}function Vl(i){let e,t=i[1](i[17][i[0]])+"",l,n,a;return{c(){e=E("span"),l=V(t),n=V(i[2]),this.h()},l(s){e=w(s,"SPAN",{class:!0});var r=I(e);l=L(r,t),n=L(r,i[2]),r.forEach(d),this.h()},h(){k(e,"class",a="label "+(i[19]==0?"bold":"sml brackets")+" svelte-1uu6kh")},m(s,r){y(s,e,r),b(e,l),b(e,n)},p(s,r){r&67&&t!==(t=s[1](s[17][s[0]])+"")&&O(l,t),r&4&&O(n,s[2])},d(s){s&&d(e)}}}function qn(i){let e,t=`calc(${i[7](i[17][i[0]])}% - ${i[5]/2}px)`,l=`${i[5]}px`;return{c(){e=E("div"),this.h()},l(n){e=w(n,"DIV",{class:!0}),I(e).forEach(d),this.h()},h(){k(e,"class","marker svelte-1uu6kh"),z(e,"left",t,!1),z(e,"border-left-width",l,!1)},m(n,a){y(n,e,a)},p(n,a){a&225&&t!==(t=`calc(${n[7](n[17][n[0]])}% - ${n[5]/2}px)`)&&z(e,"left",t,!1),a&32&&l!==(l=`${n[5]}px`)&&z(e,"border-left-width",l,!1)},d(n){n&&d(e)}}}function Rn(i){let e,t=`${i[7](i[17][i[0]])}%`;return{c(){e=E("div"),this.h()},l(l){e=w(l,"DIV",{class:!0}),I(e).forEach(d),this.h()},h(){k(e,"class","bar svelte-1uu6kh"),z(e,"left","0",!1),z(e,"width",t,!1)},m(l,n){y(l,e,n)},p(l,n){n&193&&t!==(t=`${l[7](l[17][l[0]])}%`)&&z(e,"width",t,!1)},d(l){l&&d(e)}}}function Ll(i){let e;function t(a,s){return a[19]==0?Rn:qn}let n=t(i)(i);return{c(){n.c(),e=G()},l(a){n.l(a),e=G()},m(a,s){n.m(a,s),y(a,e,s)},p(a,s){n.p(a,s)},d(a){n.d(a),a&&d(e)}}}function Al(i){let e,t=i[14].label+"",l,n,a,s,r,o=`${i[4]}px`,u=i[14].values,f=[];for(let _=0;_<u.length;_+=1)f[_]=Vl(Sl(i,u,_));let c=i[14].values,h=[];for(let _=0;_<c.length;_+=1)h[_]=Ll(Il(i,c,_));return{c(){e=E("div"),l=V(t),n=A(),a=E("span");for(let _=0;_<f.length;_+=1)f[_].c();s=A(),r=E("div");for(let _=0;_<h.length;_+=1)h[_].c();this.h()},l(_){e=w(_,"DIV",{class:!0});var m=I(e);l=L(m,t),n=N(m),a=w(m,"SPAN",{class:!0});var g=I(a);for(let v=0;v<f.length;v+=1)f[v].l(g);g.forEach(d),m.forEach(d),s=N(_),r=w(_,"DIV",{class:!0});var D=I(r);for(let v=0;v<h.length;v+=1)h[v].l(D);D.forEach(d),this.h()},h(){k(a,"class","nowrap svelte-1uu6kh"),k(e,"class","label-group svelte-1uu6kh"),k(r,"class","bar-group svelte-1uu6kh"),z(r,"height",o,!1)},m(_,m){y(_,e,m),b(e,l),b(e,n),b(e,a);for(let g=0;g<f.length;g+=1)f[g].m(a,null);y(_,s,m),y(_,r,m);for(let g=0;g<h.length;g+=1)h[g].m(r,null)},p(_,m){if(m&64&&t!==(t=_[14].label+"")&&O(l,t),m&71){u=_[14].values;let g;for(g=0;g<u.length;g+=1){const D=Sl(_,u,g);f[g]?f[g].p(D,m):(f[g]=Vl(D),f[g].c(),f[g].m(a,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=u.length}if(m&225){c=_[14].values;let g;for(g=0;g<c.length;g+=1){const D=Il(_,c,g);h[g]?h[g].p(D,m):(h[g]=Ll(D),h[g].c(),h[g].m(r,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=c.length}m&16&&o!==(o=`${_[4]}px`)&&z(r,"height",o,!1)},d(_){_&&d(e),$(f,_),_&&d(s),_&&d(r),$(h,_)}}}function Nl(i){let e,t;return{c(){e=E("small"),t=V(i[3]),this.h()},l(l){e=w(l,"SMALL",{class:!0});var n=I(e);t=L(n,i[3]),n.forEach(d),this.h()},h(){k(e,"class","svelte-1uu6kh")},m(l,n){y(l,e,n),b(e,t)},p(l,n){n&8&&O(t,l[3])},d(l){l&&d(e)}}}function Un(i){let e,t,l,n=i[8][1]&&Pl(i),a=i[6],s=[];for(let o=0;o<a.length;o+=1)s[o]=Al(Cl(i,a,o));let r=i[3]&&Nl(i);return{c(){n&&n.c(),e=A();for(let o=0;o<s.length;o+=1)s[o].c();t=A(),r&&r.c(),l=G()},l(o){n&&n.l(o),e=N(o);for(let u=0;u<s.length;u+=1)s[u].l(o);t=N(o),r&&r.l(o),l=G()},m(o,u){n&&n.m(o,u),y(o,e,u);for(let f=0;f<s.length;f+=1)s[f].m(o,u);y(o,t,u),r&&r.m(o,u),y(o,l,u)},p(o,[u]){if(o[8][1]?n?n.p(o,u):(n=Pl(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),u&247){a=o[6];let f;for(f=0;f<a.length;f+=1){const c=Cl(o,a,f);s[f]?s[f].p(c,u):(s[f]=Al(c),s[f].c(),s[f].m(t.parentNode,t))}for(;f<s.length;f+=1)s[f].d(1);s.length=a.length}o[3]?r?r.p(o,u):(r=Nl(o),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},i:H,o:H,d(o){n&&n.d(o),o&&d(e),$(s,o),o&&d(t),r&&r.d(o),o&&d(l)}}}function Zn(i,e,t){let l,n,a,s,{data:r}=e,{xKey:o="value"}=e,{yKey:u="category"}=e,{zKey:f="areanm"}=e,{formatTick:c=v=>v.toFixed(1)}=e,{suffix:h="%"}=e,{base:_=null}=e,{barHeight:m=25}=e,{markerWidth:g=3}=e;function D(v,S){let C={},p=[];for(const M of v)C[M[S]]||(C[M[S]]={label:M[S],values:[]},p.push(M[S])),C[M[S]].values.push(M);let P=[];return p.forEach(M=>{P.push(C[M])}),P}return i.$$set=v=>{"data"in v&&t(9,r=v.data),"xKey"in v&&t(0,o=v.xKey),"yKey"in v&&t(10,u=v.yKey),"zKey"in v&&t(11,f=v.zKey),"formatTick"in v&&t(1,c=v.formatTick),"suffix"in v&&t(2,h=v.suffix),"base"in v&&t(3,_=v.base),"barHeight"in v&&t(4,m=v.barHeight),"markerWidth"in v&&t(5,g=v.markerWidth)},i.$$.update=()=>{i.$$.dirty&513&&t(12,l=Math.max(...r.map(v=>v[o]))),i.$$.dirty&2560&&t(8,n=r.map(v=>v[f]).filter((v,S,C)=>C.indexOf(v)===S)),i.$$.dirty&4096&&t(7,a=v=>v/l*100),i.$$.dirty&1536&&t(6,s=D(r,u))},[o,c,h,_,m,g,s,a,n,r,u,f,l]}class Pt extends ee{constructor(e){super();le(this,e,Zn,Un,te,{data:9,xKey:0,yKey:10,zKey:11,formatTick:1,suffix:2,base:3,barHeight:4,markerWidth:5})}}function jl(i,e,t){const l=i.slice();return l[15]=e[t],l}function Kl(i,e,t){const l=i.slice();return l[18]=e[t],l[19]=e,l[20]=t,l}function Ml(i,e,t){const l=i.slice();return l[15]=e[t],l[20]=t,l}function Fl(i){let e,t=i[7],l=[];for(let n=0;n<t.length;n+=1)l[n]=Bl(Ml(i,t,n));return{c(){e=E("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=w(n,"UL",{class:!0});var a=I(e);for(let s=0;s<l.length;s+=1)l[s].l(a);a.forEach(d),this.h()},h(){k(e,"class","legend-block svelte-gainfd")},m(n,a){y(n,e,a);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,a){if(a&128){t=n[7];let s;for(s=0;s<t.length;s+=1){const r=Ml(n,t,s);l[s]?l[s].p(r,a):(l[s]=Bl(r),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&d(e),$(l,n)}}}function Bl(i){let e,t,l,n,a=i[15]+"",s,r;return{c(){e=E("li"),t=E("div"),l=A(),n=E("span"),s=V(a),r=A(),this.h()},l(o){e=w(o,"LI",{class:!0});var u=I(e);t=w(u,"DIV",{class:!0}),I(t).forEach(d),l=N(u),n=w(u,"SPAN",{class:!0});var f=I(n);s=L(f,a),f.forEach(d),r=N(u),u.forEach(d),this.h()},h(){k(t,"class","legend-vis "+(i[20]==0?"bar":"bar2")+" svelte-gainfd"),k(n,"class","svelte-gainfd"),fe(n,"bold",i[20]==0),k(e,"class","svelte-gainfd")},m(o,u){y(o,e,u),b(e,t),b(e,l),b(e,n),b(n,s),b(e,r)},p(o,u){u&128&&a!==(a=o[15]+"")&&O(s,a)},d(o){o&&d(e)}}}function Ol(i){let e,t=`${i[6](i[18][i[0]])}%`,l,n,a=i[1](i[18][i[0]])+"",s,r,o,u=`calc(${i[6](i[18][i[0]])}% + 2px)`;function f(){i[12].call(n,i[19],i[20])}return{c(){e=E("div"),l=A(),n=E("div"),s=V(a),r=V(i[2]),this.h()},l(c){e=w(c,"DIV",{class:!0}),I(e).forEach(d),l=N(c),n=w(c,"DIV",{class:!0});var h=I(n);s=L(h,a),r=L(h,i[2]),h.forEach(d),this.h()},h(){k(e,"class",Ve(i[20]==0?"bar":"bar2")+" svelte-gainfd"),z(e,"left","0",!1),z(e,"width",t,!1),z(e,"top",i[20]==0?"0":"50%",!1),z(e,"height",i[7][1]?"50%":"100%",!1),k(n,"class","label svelte-gainfd"),Le(()=>f.call(n)),fe(n,"bold",i[20]==0),z(n,"left",u,!1),z(n,"top",i[20]==0?"0":"50%",!1),z(n,"height","50%",!1)},m(c,h){y(c,e,h),y(c,l,h),y(c,n,h),b(n,s),b(n,r),o=Oe(n,f.bind(n))},p(c,h){i=c,h&97&&t!==(t=`${i[6](i[18][i[0]])}%`)&&z(e,"width",t,!1),h&128&&z(e,"height",i[7][1]?"50%":"100%",!1),h&35&&a!==(a=i[1](i[18][i[0]])+"")&&O(s,a),h&4&&O(r,i[2]),h&97&&u!==(u=`calc(${i[6](i[18][i[0]])}% + 2px)`)&&z(n,"left",u,!1)},d(c){c&&d(e),c&&d(l),c&&d(n),o()}}}function Wl(i){let e,t=i[15].label+"",l,n,a,s,r=`${i[7][1]?i[3]*2:i[3]}px`,o=`calc(100% - ${i[4]}px)`,u=i[15].values,f=[];for(let c=0;c<u.length;c+=1)f[c]=Ol(Kl(i,u,c));return{c(){e=E("div"),l=V(t),n=A(),a=E("div");for(let c=0;c<f.length;c+=1)f[c].c();s=A(),this.h()},l(c){e=w(c,"DIV",{class:!0});var h=I(e);l=L(h,t),h.forEach(d),n=N(c),a=w(c,"DIV",{class:!0});var _=I(a);for(let m=0;m<f.length;m+=1)f[m].l(_);s=N(_),_.forEach(d),this.h()},h(){k(e,"class","label-group svelte-gainfd"),k(a,"class","bar-group svelte-gainfd"),z(a,"height",r,!1),z(a,"width",o,!1)},m(c,h){y(c,e,h),b(e,l),y(c,n,h),y(c,a,h);for(let _=0;_<f.length;_+=1)f[_].m(a,null);b(a,s)},p(c,h){if(h&32&&t!==(t=c[15].label+"")&&O(l,t),h&231){u=c[15].values;let _;for(_=0;_<u.length;_+=1){const m=Kl(c,u,_);f[_]?f[_].p(m,h):(f[_]=Ol(m),f[_].c(),f[_].m(a,s))}for(;_<f.length;_+=1)f[_].d(1);f.length=u.length}h&136&&r!==(r=`${c[7][1]?c[3]*2:c[3]}px`)&&z(a,"height",r,!1),h&16&&o!==(o=`calc(100% - ${c[4]}px)`)&&z(a,"width",o,!1)},d(c){c&&d(e),c&&d(n),c&&d(a),$(f,c)}}}function Yn(i){let e,t,l=i[7][1]&&Fl(i),n=i[5],a=[];for(let s=0;s<n.length;s+=1)a[s]=Wl(jl(i,n,s));return{c(){l&&l.c(),e=A();for(let s=0;s<a.length;s+=1)a[s].c();t=G()},l(s){l&&l.l(s),e=N(s);for(let r=0;r<a.length;r+=1)a[r].l(s);t=G()},m(s,r){l&&l.m(s,r),y(s,e,r);for(let o=0;o<a.length;o+=1)a[o].m(s,r);y(s,t,r)},p(s,[r]){if(s[7][1]?l?l.p(s,r):(l=Fl(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),r&255){n=s[5];let o;for(o=0;o<n.length;o+=1){const u=jl(s,n,o);a[o]?a[o].p(u,r):(a[o]=Wl(u),a[o].c(),a[o].m(t.parentNode,t))}for(;o<a.length;o+=1)a[o].d(1);a.length=n.length}},i:H,o:H,d(s){l&&l.d(s),s&&d(e),$(a,s),s&&d(t)}}}function Xn(i,e,t){let l,n,a,s,{data:r}=e,{xKey:o="value"}=e,{yKey:u="category"}=e,{zKey:f="group"}=e,{formatTick:c=v=>Math.round(v)}=e,{suffix:h="%"}=e,{barHeight:_=20}=e,{margin:m=30}=e;function g(v,S){let C={};for(const P of v)C[P[S]]||(C[P[S]]={label:P[S],values:[]}),C[P[S]].values.push(P);let p=[];for(const P in C)p.push(C[P]);return p}function D(v,S){v[S].width=this.clientWidth,t(5,s),t(8,r),t(9,u)}return i.$$set=v=>{"data"in v&&t(8,r=v.data),"xKey"in v&&t(0,o=v.xKey),"yKey"in v&&t(9,u=v.yKey),"zKey"in v&&t(10,f=v.zKey),"formatTick"in v&&t(1,c=v.formatTick),"suffix"in v&&t(2,h=v.suffix),"barHeight"in v&&t(3,_=v.barHeight),"margin"in v&&t(4,m=v.margin)},i.$$.update=()=>{i.$$.dirty&257&&t(11,l=[0,Math.max(...r.map(v=>v[o]))]),i.$$.dirty&768&&r.map(v=>v[u]).filter((v,S,C)=>C.indexOf(v)===S),i.$$.dirty&1280&&t(7,n=r.map(v=>v[f]).filter((v,S,C)=>C.indexOf(v)===S)),i.$$.dirty&2048&&t(6,a=v=>v/l[1]*100),i.$$.dirty&768&&t(5,s=g(r,u))},[o,c,h,_,m,s,a,n,r,u,f,l,D]}class Jn extends ee{constructor(e){super();le(this,e,Xn,Yn,te,{data:8,xKey:0,yKey:9,zKey:10,formatTick:1,suffix:2,barHeight:3,margin:4})}}function Hl(i,e,t){const l=i.slice();return l[2]=e[t],l[4]=t,l}function Gl(i){let e,t,l,n=i[2].name+"",a,s,r,o=i[2].value.toFixed(1)+"",u,f,c;return{c(){e=E("tr"),t=E("td"),l=E("strong"),a=V(n),s=A(),r=E("td"),u=V(o),f=V("%"),c=A(),this.h()},l(h){e=w(h,"TR",{});var _=I(e);t=w(_,"TD",{});var m=I(t);l=w(m,"STRONG",{});var g=I(l);a=L(g,n),g.forEach(d),m.forEach(d),s=N(_),r=w(_,"TD",{class:!0});var D=I(r);u=L(D,o),f=L(D,"%"),D.forEach(d),c=N(_),_.forEach(d),this.h()},h(){k(r,"class","text-right svelte-k5j86q")},m(h,_){y(h,e,_),b(e,t),b(t,l),b(l,a),b(e,s),b(e,r),b(r,u),b(r,f),b(e,c)},p(h,_){_&1&&n!==(n=h[2].name+"")&&O(a,n),_&1&&o!==(o=h[2].value.toFixed(1)+"")&&O(u,o)},d(h){h&&d(e)}}}function Qn(i){let e,t,l=i[0],n=[];for(let a=0;a<l.length;a+=1)n[a]=Gl(Hl(i,l,a));return{c(){e=E("table"),t=E("tbody");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=w(a,"TABLE",{class:!0});var s=I(e);t=w(s,"TBODY",{});var r=I(t);for(let o=0;o<n.length;o+=1)n[o].l(r);r.forEach(d),s.forEach(d),this.h()},h(){k(e,"class","table-rank text-small svelte-k5j86q")},m(a,s){y(a,e,s),b(e,t);for(let r=0;r<n.length;r+=1)n[r].m(t,null)},p(a,[s]){if(s&1){l=a[0];let r;for(r=0;r<l.length;r+=1){const o=Hl(a,l,r);n[r]?n[r].p(o,s):(n[r]=Gl(o),n[r].c(),n[r].m(t,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},i:H,o:H,d(a){a&&d(e),$(n,a)}}}function xn(i,e,t){let{data:l}=e,{offset:n=1}=e;return i.$$set=a=>{"data"in a&&t(0,l=a.data),"offset"in a&&t(1,n=a.offset)},[l,n]}class Tt extends ee{constructor(e){super();le(this,e,xn,Qn,te,{data:0,offset:1})}}function ql(i){let e;const t=i[14].default,l=me(t,i,i[13],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,a){l&&l.m(n,a),e=!0},p(n,a){l&&l.p&&(!e||a&8192)&&ge(l,t,n,n[13],e?be(t,n[13],a,null):ve(n[13]),null)},i(n){e||(T(l,n),e=!0)},o(n){j(l,n),e=!1},d(n){l&&l.d(n)}}}function $n(i){let e,t,l=i[0]&&ql(i);return{c(){e=E("div"),l&&l.c(),this.h()},l(n){e=w(n,"DIV",{id:!0,class:!0});var a=I(e);l&&l.l(a),a.forEach(d),this.h()},h(){k(e,"id",i[1]),k(e,"class","svelte-a65d1y")},m(n,a){y(n,e,a),l&&l.m(e,null),i[15](e),t=!0},p(n,[a]){n[0]?l?(l.p(n,a),a&1&&T(l,1)):(l=ql(n),l.c(),T(l,1),l.m(e,null)):l&&(oe(),j(l,1,1,()=>{l=null}),re()),(!t||a&2)&&k(e,"id",n[1])},i(n){t||(T(l),t=!0)},o(n){j(l),t=!1},d(n){n&&d(e),l&&l.d(),i[15](null)}}}function ea(i,e,t){let{$$slots:l={},$$scope:n}=e,{map:a}=e,{id:s="map"}=e,{location:r={bounds:[[-5.816,49.864],[1.863,55.872]]}}=e,{maxbounds:o=[[-13,48],[5,60]]}=e,{style:u="https://bothness.github.io/ons-basemaps/data/style-omt.json"}=e,{interactive:f=!0}=e,{minzoom:c=0}=e,{maxzoom:h=14}=e,{zoom:_=null}=e,{scrollzoom:m=!0}=e,{geolocate:g=!0}=e,{zoomcontrol:D=!0}=e,v,S;ze("map",{getMap:()=>a}),r.bounds?S={bounds:r.bounds}:r.lon&&r.lat&&(S={center:[r.lon,r.lat]},r.zoom&&(S.zoom=r.zoom)),o&&(S.maxBounds=o),Ot(()=>{const p=document.createElement("link");return p.rel="stylesheet",p.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",p.onload=()=>{t(0,a=new je.Map(De({container:v,style:u,minZoom:c,maxZoom:h,interactive:f},S))),D&&a.addControl(new je.NavigationControl({showCompass:!1})),m||a.scrollZoom.disable(),g&&a.addControl(new je.GeolocateControl),a.on("load",()=>{t(3,_=a.getZoom())}),a.on("zoom",()=>{t(3,_=a.getZoom())})},document.head.appendChild(p),()=>{a.remove(),p.parentNode.removeChild(p)}});function C(p){We[p?"unshift":"push"](()=>{v=p,t(2,v)})}return i.$$set=p=>{"map"in p&&t(0,a=p.map),"id"in p&&t(1,s=p.id),"location"in p&&t(4,r=p.location),"maxbounds"in p&&t(5,o=p.maxbounds),"style"in p&&t(6,u=p.style),"interactive"in p&&t(7,f=p.interactive),"minzoom"in p&&t(8,c=p.minzoom),"maxzoom"in p&&t(9,h=p.maxzoom),"zoom"in p&&t(3,_=p.zoom),"scrollzoom"in p&&t(10,m=p.scrollzoom),"geolocate"in p&&t(11,g=p.geolocate),"zoomcontrol"in p&&t(12,D=p.zoomcontrol),"$$scope"in p&&t(13,n=p.$$scope)},[a,s,v,_,r,o,u,f,c,h,m,g,D,n,l,C]}class la extends ee{constructor(e){super();le(this,e,ea,$n,te,{map:0,id:1,location:4,maxbounds:5,style:6,interactive:7,minzoom:8,maxzoom:9,zoom:3,scrollzoom:10,geolocate:11,zoomcontrol:12})}}function Rl(i){let e;const t=i[11].default,l=me(t,i,i[10],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,a){l&&l.m(n,a),e=!0},p(n,a){l&&l.p&&(!e||a&1024)&&ge(l,t,n,n[10],e?be(t,n[10],a,null):ve(n[10]),null)},i(n){e||(T(l,n),e=!0)},o(n){j(l,n),e=!1},d(n){l&&l.d(n)}}}function ta(i){let e,t,l=i[0]&&Rl(i);return{c(){l&&l.c(),e=G()},l(n){l&&l.l(n),e=G()},m(n,a){l&&l.m(n,a),y(n,e,a),t=!0},p(n,[a]){n[0]?l?(l.p(n,a),a&1&&T(l,1)):(l=Rl(n),l.c(),T(l,1),l.m(e.parentNode,e)):l&&(oe(),j(l,1,1,()=>{l=null}),re())},i(n){t||(T(l),t=!0)},o(n){j(l),t=!1},d(n){l&&l.d(n),n&&d(e)}}}function na(i,e,t){let{$$slots:l={},$$scope:n}=e,{id:a}=e,{type:s}=e,{url:r=null}=e,{props:o={}}=e,{data:u=null}=e,{layer:f=null}=e,{promoteId:c=null}=e,{minzoom:h=null}=e,{maxzoom:_=null}=e,m=!1;const{getMap:g}=Te("map"),D=g();ze("source",{source:a,sourceLayer:f}),D.getSource(a)&&D.removeSource(a);function v(){D.isSourceLoaded(a)?(t(0,m=!0),console.log(a+" loaded!")):setTimeout(()=>{console.log("..."),v()},500)}function S(){D.isStyleLoaded(a)?(C(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),S()},500)}h&&(o.minzoom=h),_&&(o.maxzoom=_),f&&c?(o.promoteId={},o.promoteId[f]=c):c&&(o.promoteId=c);function C(){console.log(a+" map source loading..."),s=="geojson"?u?(D.addSource(a,De({type:s,data:u},o)),v()):r&&(D.addSource(a,De({type:s,data:r},o)),v()):s=="vector"&&(D.addSource(a,De({type:s,tiles:[r]},o)),v())}S();function p(){D.getSource(a).setData(u)}return i.$$set=P=>{"id"in P&&t(2,a=P.id),"type"in P&&t(3,s=P.type),"url"in P&&t(4,r=P.url),"props"in P&&t(1,o=P.props),"data"in P&&t(5,u=P.data),"layer"in P&&t(6,f=P.layer),"promoteId"in P&&t(7,c=P.promoteId),"minzoom"in P&&t(8,h=P.minzoom),"maxzoom"in P&&t(9,_=P.maxzoom),"$$scope"in P&&t(10,n=P.$$scope)},i.$$.update=()=>{i.$$.dirty&33&&m&&u&&p()},[m,o,a,s,r,u,f,c,h,_,n,l]}class aa extends ee{constructor(e){super();le(this,e,na,ta,te,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function ia(i,e,t){const l=Wt(),n=new je.Popup({closeButton:!1,closeOnClick:!1});let{id:a}=e,{type:s}=e,{filter:r=null}=e,{layout:o={}}=e,{paint:u={}}=e,{data:f=null}=e,{geoCode:c=null}=e,{colorCode:h=null}=e,{nameCode:_=null}=e,{valueCode:m=null}=e,{click:g=!1}=e,{ignoreClick:D=!1}=e,{clickCenter:v=!1}=e,{selected:S=null}=e,{hover:C=!1}=e,{hovered:p=null}=e,{highlight:P=!1}=e,{highlightKey:M="highlighted"}=e,{highlighted:W=[]}=e,{order:J=null}=e,{maxzoom:F=null}=e,{minzoom:q=null}=e,{tooltip:ke=!1}=e;const{source:ne,sourceLayer:Q}=Te("source"),{getMap:_e}=Te("map"),X=_e();let de=null,pe=null,we=[];X.getLayer(a)&&X.removeLayer(a);let ye={id:a,type:s,source:ne,paint:u,layout:o};r&&(ye.filter=r),Q&&(ye["source-layer"]=Q),F&&(ye.maxzoom=F),q&&(ye.minzoom=q),X.addLayer(ye,J);function Fe(){f.forEach(K=>{X.setFeatureState({source:ne,sourceLayer:Q,id:K[c]},{color:h?K[h]:null,name:_?K[_]:null,value:m?K[m]:null})})}return g&&X.on("click",a,K=>{if(K.features.length>0&&!D){if(t(0,S=K.features[0].id),l("select",{code:S}),de&&X.setFeatureState({source:ne,sourceLayer:Q,id:de},{selected:!1}),X.setFeatureState({source:ne,sourceLayer:Q,id:S},{selected:!0}),v){let ue=centroid(K.features[0].toJSON().geometry);X.flyTo({center:ue.geometry.coordinates})}t(23,de=S)}}),C&&(X.on("mousemove",a,K=>{if(K.features.length>0){p&&X.setFeatureState({source:ne,sourceLayer:Q,id:p},{hovered:!1}),t(1,p=t(24,pe=K.features[0].id)),X.setFeatureState({source:ne,sourceLayer:Q,id:p},{hovered:!0}),X.getCanvas().style.cursor="pointer";let ue=X.getFeatureState({source:ne,sourceLayer:Q,id:p});ke&&ue.name&&n.setLngLat(K.lngLat).setHTML(`<strong>${ue.name}</strong>${ue.value?"<br/>"+ue.value.toFixed(1)+"%":"<br/>Data not available"}`).addTo(X)}}),X.on("mouseleave",a,K=>{p&&X.setFeatureState({source:ne,sourceLayer:Q,id:p},{hovered:!1}),t(1,p=t(24,pe=null)),X.getCanvas().style.cursor="",ke&&n.remove()})),i.$$set=K=>{"id"in K&&t(2,a=K.id),"type"in K&&t(3,s=K.type),"filter"in K&&t(4,r=K.filter),"layout"in K&&t(5,o=K.layout),"paint"in K&&t(6,u=K.paint),"data"in K&&t(7,f=K.data),"geoCode"in K&&t(8,c=K.geoCode),"colorCode"in K&&t(9,h=K.colorCode),"nameCode"in K&&t(10,_=K.nameCode),"valueCode"in K&&t(11,m=K.valueCode),"click"in K&&t(12,g=K.click),"ignoreClick"in K&&t(13,D=K.ignoreClick),"clickCenter"in K&&t(14,v=K.clickCenter),"selected"in K&&t(0,S=K.selected),"hover"in K&&t(15,C=K.hover),"hovered"in K&&t(1,p=K.hovered),"highlight"in K&&t(16,P=K.highlight),"highlightKey"in K&&t(17,M=K.highlightKey),"highlighted"in K&&t(18,W=K.highlighted),"order"in K&&t(19,J=K.order),"maxzoom"in K&&t(20,F=K.maxzoom),"minzoom"in K&&t(21,q=K.minzoom),"tooltip"in K&&t(22,ke=K.tooltip)},i.$$.update=()=>{i.$$.dirty[0]&640&&(f||h)&&Fe(),i.$$.dirty[0]&34013184&&P&&W!=we&&(we[0]&&we.forEach(K=>{let ue={};ue[M]=!1,X.setFeatureState({source:ne,sourceLayer:Q,id:K},ue)}),t(25,we=W),W[0]&&W.forEach(K=>{let ue={};ue[M]=!0,X.setFeatureState({source:ne,sourceLayer:Q,id:K},ue)})),i.$$.dirty[0]&8392705&&g&&S!=de&&(de&&X.setFeatureState({source:ne,sourceLayer:Q,id:de},{selected:!1}),S&&X.setFeatureState({source:ne,sourceLayer:Q,id:S},{selected:!0}),t(23,de=S)),i.$$.dirty[0]&16809986&&C&&p!=pe&&(pe&&X.setFeatureState({source:ne,sourceLayer:Q,id:pe},{hovered:!1}),p&&X.setFeatureState({source:ne,sourceLayer:Q,id:p},{hovered:!0}),t(24,pe=p))},[S,p,a,s,r,o,u,f,c,h,_,m,g,D,v,C,P,M,W,J,F,q,ke,de,pe,we]}class Ul extends ee{constructor(e){super();le(this,e,ia,null,te,{id:2,type:3,filter:4,layout:5,paint:6,data:7,geoCode:8,colorCode:9,nameCode:10,valueCode:11,click:12,ignoreClick:13,clickCenter:14,selected:0,hover:15,hovered:1,highlight:16,highlightKey:17,highlighted:18,order:19,maxzoom:20,minzoom:21,tooltip:22},null,[-1,-1])}}function sa(i){let e,t,l;const n=i[1].default,a=me(n,i,i[0],null);return{c(){e=E("div"),t=E("div"),a&&a.c(),this.h()},l(s){e=w(s,"DIV",{class:!0});var r=I(e);t=w(r,"DIV",{class:!0});var o=I(t);a&&a.l(o),o.forEach(d),r.forEach(d),this.h()},h(){k(t,"class","wrapper"),k(e,"class","page-content")},m(s,r){y(s,e,r),b(e,t),a&&a.m(t,null),l=!0},p(s,[r]){a&&a.p&&(!l||r&1)&&ge(a,n,s,s[0],l?be(n,s[0],r,null):ve(s[0]),null)},i(s){l||(T(a,s),l=!0)},o(s){j(a,s),l=!1},d(s){s&&d(e),a&&a.d(s)}}}function oa(i,e,t){let{$$slots:l={},$$scope:n}=e;return i.$$set=a=>{"$$scope"in a&&t(0,n=a.$$scope)},[n,l]}class ra extends ee{constructor(e){super();le(this,e,oa,sa,te,{})}}const fa=i=>({}),Zl=i=>({});function Yl(i){let e,t,l,n;const a=i[6].meta,s=me(a,i,i[5],Zl);return{c(){e=E("h2"),t=V(i[0]),l=A(),s&&s.c(),this.h()},l(r){e=w(r,"H2",{id:!0,class:!0});var o=I(e);t=L(o,i[0]),o.forEach(d),l=N(r),s&&s.l(r),this.h()},h(){k(e,"id","topics"),k(e,"class","svelte-1328dmd")},m(r,o){y(r,e,o),b(e,t),y(r,l,o),s&&s.m(r,o),n=!0},p(r,o){(!n||o&1)&&O(t,r[0]),s&&s.p&&(!n||o&32)&&ge(s,a,r,r[5],n?be(a,r[5],o,fa):ve(r[5]),Zl)},i(r){n||(T(s,r),n=!0)},o(r){j(s,r),n=!1},d(r){r&&d(e),r&&d(l),s&&s.d(r)}}}function ua(i){let e,t,l,n,a=`repeat(auto-fit, minmax(min(${i[1]}px, 100%), 1fr))`,s=`${i[2]}px`,r,o=i[0]&&Yl(i);const u=i[6].default,f=me(u,i,i[5],null);return{c(){e=E("div"),o&&o.c(),t=A(),l=E("div"),f&&f.c(),this.h()},l(c){e=w(c,"DIV",{class:!0});var h=I(e);o&&o.l(h),t=N(h),l=w(h,"DIV",{class:!0});var _=I(l);f&&f.l(_),_.forEach(d),h.forEach(d),this.h()},h(){k(l,"class","tiles-grid margin-bottom svelte-1328dmd"),Le(()=>i[7].call(l)),z(l,"grid-template-columns",a,!1),z(l,"grid-gap",s,!1),k(e,"class","tiles")},m(c,h){y(c,e,h),o&&o.m(e,null),b(e,t),b(e,l),f&&f.m(l,null),n=Oe(l,i[7].bind(l)),r=!0},p(c,[h]){c[0]?o?(o.p(c,h),h&1&&T(o,1)):(o=Yl(c),o.c(),T(o,1),o.m(e,t)):o&&(oe(),j(o,1,1,()=>{o=null}),re()),f&&f.p&&(!r||h&32)&&ge(f,u,c,c[5],r?be(u,c[5],h,null):ve(c[5]),null),h&2&&a!==(a=`repeat(auto-fit, minmax(min(${c[1]}px, 100%), 1fr))`)&&z(l,"grid-template-columns",a,!1),h&4&&s!==(s=`${c[2]}px`)&&z(l,"grid-gap",s,!1)},i(c){r||(T(o),T(f,c),r=!0)},o(c){j(o),j(f,c),r=!1},d(c){c&&d(e),o&&o.d(),f&&f.d(c),n()}}}function ca(i,e,t){let l,{$$slots:n={},$$scope:a}=e,{title:s=null}=e,{colwidth:r=280}=e,{gridgap:o=16}=e,u;const f=Ht(3);ze("tiles",{cols:f});function c(){u=this.clientWidth,t(3,u)}return i.$$set=h=>{"title"in h&&t(0,s=h.title),"colwidth"in h&&t(1,r=h.colwidth),"gridgap"in h&&t(2,o=h.gridgap),"$$scope"in h&&t(5,a=h.$$scope)},i.$$.update=()=>{i.$$.dirty&14&&t(4,l=u?Math.floor((u+o)/(r+o)):3),i.$$.dirty&16&&f.set(l)},[s,r,o,u,l,a,n,c]}class Be extends ee{constructor(e){super();le(this,e,ca,ua,te,{title:0,colwidth:1,gridgap:2})}}function Xl(i,e,t){const l=i.slice();return l[9]=e[t],l}function Jl(i){let e,t,l;return{c(){e=E("header"),t=E("h3"),l=V(i[2]),this.h()},l(n){e=w(n,"HEADER",{class:!0});var a=I(e);t=w(a,"H3",{class:!0});var s=I(t);l=L(s,i[2]),s.forEach(d),a.forEach(d),this.h()},h(){k(t,"class","margin-top--0 margin-right--0 margin-bottom--0 margin-left--0 svelte-1krn9ab"),k(e,"class","margin-top--1")},m(n,a){y(n,e,a),b(e,t),b(t,l)},p(n,a){a&4&&O(l,n[2])},d(n){n&&d(e)}}}function Ql(i){let e,t=i[3],l=[];for(let n=0;n<t.length;n+=1)l[n]=xl(Xl(i,t,n));return{c(){e=E("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var a=I(e);for(let s=0;s<l.length;s+=1)l[s].l(a);a.forEach(d),this.h()},h(){k(e,"class","margin-top--2")},m(n,a){y(n,e,a);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,a){if(a&8){t=n[3];let s;for(s=0;s<t.length;s+=1){const r=Xl(n,t,s);l[s]?l[s].p(r,a):(l[s]=xl(r),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&d(e),$(l,n)}}}function xl(i){let e,t=i[9].label+"",l,n,a,s,r;return{c(){e=E("a"),l=V(t),n=A(),this.h()},l(o){e=w(o,"A",{href:!0,class:!0,"aria-label":!0,"data-gtm-label":!0});var u=I(e);l=L(u,t),n=N(u),u.forEach(d),this.h()},h(){k(e,"href",a=i[9].url),k(e,"class","tile__link"),k(e,"aria-label",s=i[9].label),k(e,"data-gtm-label",r=i[9].label)},m(o,u){y(o,e,u),b(e,l),b(e,n)},p(o,u){u&8&&t!==(t=o[9].label+"")&&O(l,t),u&8&&a!==(a=o[9].url)&&k(e,"href",a),u&8&&s!==(s=o[9].label)&&k(e,"aria-label",s),u&8&&r!==(r=o[9].label)&&k(e,"data-gtm-label",r)},d(o){o&&d(e)}}}function ha(i){let e,t,l,n,a=`span ${i[0]==1?1:i[0]>i[5]?i[5]:i[0]}`,s=`span ${i[1]}`,r,o=i[2]&&Jl(i);const u=i[8].default,f=me(u,i,i[7],null);let c=i[3]&&i[3][0]&&Ql(i);return{c(){e=E("div"),o&&o.c(),t=A(),f&&f.c(),l=A(),c&&c.c(),this.h()},l(h){e=w(h,"DIV",{class:!0});var _=I(e);o&&o.l(_),t=N(_),f&&f.l(_),l=N(_),c&&c.l(_),_.forEach(d),this.h()},h(){k(e,"class",n=Ve(i[4]?"":"tile tile__content")+" svelte-1krn9ab"),fe(e,"blank",i[4]),z(e,"grid-column",a,!1),z(e,"grid-row",s,!1)},m(h,_){y(h,e,_),o&&o.m(e,null),b(e,t),f&&f.m(e,null),b(e,l),c&&c.m(e,null),r=!0},p(h,[_]){h[2]?o?o.p(h,_):(o=Jl(h),o.c(),o.m(e,t)):o&&(o.d(1),o=null),f&&f.p&&(!r||_&128)&&ge(f,u,h,h[7],r?be(u,h[7],_,null):ve(h[7]),null),h[3]&&h[3][0]?c?c.p(h,_):(c=Ql(h),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!r||_&16&&n!==(n=Ve(h[4]?"":"tile tile__content")+" svelte-1krn9ab"))&&k(e,"class",n),_&16&&fe(e,"blank",h[4]),_&33&&a!==(a=`span ${h[0]==1?1:h[0]>h[5]?h[5]:h[0]}`)&&z(e,"grid-column",a,!1),_&2&&s!==(s=`span ${h[1]}`)&&z(e,"grid-row",s,!1)},i(h){r||(T(f,h),r=!0)},o(h){j(f,h),r=!1},d(h){h&&d(e),o&&o.d(),f&&f.d(h),c&&c.d()}}}function _a(i,e,t){let l,{$$slots:n={},$$scope:a}=e,{colspan:s=1}=e,{rowspan:r=1}=e,{title:o=null}=e,{links:u=null}=e,{blank:f=!1}=e;const{cols:c}=Te("tiles");return pt(i,c,h=>t(5,l=h)),i.$$set=h=>{"colspan"in h&&t(0,s=h.colspan),"rowspan"in h&&t(1,r=h.rowspan),"title"in h&&t(2,o=h.title),"links"in h&&t(3,u=h.links),"blank"in h&&t(4,f=h.blank),"$$scope"in h&&t(7,a=h.$$scope)},[s,r,o,u,f,l,c,a,n]}class Ce extends ee{constructor(e){super();le(this,e,_a,ha,te,{colspan:0,rowspan:1,title:2,links:3,blank:4})}}function da(i){let e,t;const l=i[5].default,n=me(l,i,i[4],null);return{c(){e=E("mark"),n&&n.c(),this.h()},l(a){e=w(a,"MARK",{class:!0,style:!0,role:!0});var s=I(e);n&&n.l(s),s.forEach(d),this.h()},h(){k(e,"class","em svelte-1602h77"),z(e,"background-color",i[0]),z(e,"color",i[2]),k(e,"role","presentation"),fe(e,"nowrap",i[1])},m(a,s){y(a,e,s),n&&n.m(e,null),t=!0},p(a,[s]){n&&n.p&&(!t||s&16)&&ge(n,l,a,a[4],t?be(l,a[4],s,null):ve(a[4]),null),(!t||s&1)&&z(e,"background-color",a[0]),(!t||s&4)&&z(e,"color",a[2]),s&2&&fe(e,"nowrap",a[1])},i(a){t||(T(n,a),t=!0)},o(a){j(n,a),t=!1},d(a){a&&d(e),n&&n.d(a)}}}function ma(i,e,t){let l,{$$slots:n={},$$scope:a}=e,{color:s="lightgrey"}=e,{nowrap:r=!0}=e;function o(f){return(f[0]*299+f[1]*587+f[2]*114)/1e3>125?"black":"white"}let u="black";return i.$$set=f=>{"color"in f&&t(0,s=f.color),"nowrap"in f&&t(1,r=f.nowrap),"$$scope"in f&&t(4,a=f.$$scope)},i.$$.update=()=>{i.$$.dirty&1&&t(3,l=Gt(s).rgb),i.$$.dirty&8&&l&&t(2,u=o(l))},[s,r,u,l,a,n]}class ga extends ee{constructor(e){super();le(this,e,ma,da,te,{color:0,nowrap:1})}}function $l(i,e,t){const l=i.slice();return l[37]=e[t],l}function et(i,e,t){const l=i.slice();return l[40]=e[t],l}function lt(i,e,t){const l=i.slice();return l[43]=e[t],l[45]=t,l}function tt(i,e,t){const l=i.slice();return l[46]=e[t],l}function nt(i,e,t){const l=i.slice();return l[49]=e[t],l[45]=t,l}function va(i){let e;return{c(){e=V("Population Group Profiles")},l(t){e=L(t,"Population Group Profiles")},m(t,l){y(t,e,l)},d(t){t&&d(e)}}}function ba(i){let e,t,l,n,a,s,r,o,u,f,c;return e=new Vn({props:{$$slots:{default:[va]},$$scope:{ctx:i}}}),{c(){R(e.$$.fragment),t=A(),l=E("p"),n=V("Select one or more identity characteristics to define a population group to compare with the whole population of England and Wales. For example, see "),a=E("a"),s=V("Sikhs born in the UK"),r=V(" or "),o=E("a"),u=V("people aged 65+ born in Ireland"),f=V("."),this.h()},l(h){Y(e.$$.fragment,h),t=N(h),l=w(h,"P",{class:!0});var _=I(l);n=L(_,"Select one or more identity characteristics to define a population group to compare with the whole population of England and Wales. For example, see "),a=w(_,"A",{href:!0,class:!0});var m=I(a);s=L(m,"Sikhs born in the UK"),m.forEach(d),r=L(_," or "),o=w(_,"A",{href:!0,class:!0});var g=I(o);u=L(g,"people aged 65+ born in Ireland"),g.forEach(d),f=L(_,"."),_.forEach(d),this.h()},h(){k(a,"href","?religion_tb=7&country_of_birth_3a=1"),k(a,"class","svelte-1agl880"),k(o,"href","?resident_age_3a=3&country_of_birth_8a=2"),k(o,"class","svelte-1agl880"),k(l,"class","subtitle svelte-1agl880")},m(h,_){U(e,h,_),y(h,t,_),y(h,l,_),b(l,n),b(l,a),b(a,s),b(l,r),b(l,o),b(o,u),b(l,f),c=!0},p(h,_){const m={};_[1]&1048576&&(m.$$scope={dirty:_,ctx:h}),e.$set(m)},i(h){c||(T(e.$$.fragment,h),c=!0)},o(h){j(e.$$.fragment,h),c=!1},d(h){Z(e,h),h&&d(t),h&&d(l)}}}function at(i){let e,t=he(i[49].label)+"",l,n,a=i[11](i[49])+"",s,r,o;return{c(){e=E("option"),l=V(t),n=V(" ["),s=V(a),r=V(" charts]"),this.h()},l(u){e=w(u,"OPTION",{});var f=I(e);l=L(f,t),n=L(f," ["),s=L(f,a),r=L(f," charts]"),f.forEach(d),this.h()},h(){e.__value=o=i[49],e.value=e.__value},m(u,f){y(u,e,f),b(e,l),b(e,n),b(e,s),b(e,r)},p(u,f){f[0]&1024&&t!==(t=he(u[49].label)+"")&&O(l,t),f[0]&1024&&a!==(a=u[11](u[49])+"")&&O(s,a),f[0]&1024&&o!==(o=u[49])&&(e.__value=o,e.value=e.__value)},d(u){u&&d(e)}}}function it(i){let e,t,l,n,a,s,r=i[2].cats,o=[];for(let u=0;u<r.length;u+=1)o[u]=st(tt(i,r,u));return{c(){e=E("select");for(let u=0;u<o.length;u+=1)o[u].c();t=A(),l=E("button"),n=V("Add"),this.h()},l(u){e=w(u,"SELECT",{class:!0});var f=I(e);for(let h=0;h<o.length;h+=1)o[h].l(f);f.forEach(d),t=N(u),l=w(u,"BUTTON",{class:!0});var c=I(l);n=L(c,"Add"),c.forEach(d),this.h()},h(){k(e,"class","svelte-1agl880"),i[3][i[2].label]===void 0&&Le(()=>i[22].call(e)),k(l,"class","btn svelte-1agl880")},m(u,f){y(u,e,f);for(let c=0;c<o.length;c+=1)o[c].m(e,null);Ke(e,i[3][i[2].label]),y(u,t,f),y(u,l,f),b(l,n),a||(s=[Pe(e,"change",i[22]),Pe(l,"mouseup",i[23])],a=!0)},p(u,f){if(f[0]&4){r=u[2].cats;let c;for(c=0;c<r.length;c+=1){const h=tt(u,r,c);o[c]?o[c].p(h,f):(o[c]=st(h),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}f[0]&1036&&Ke(e,u[3][u[2].label])},d(u){u&&d(e),$(o,u),u&&d(t),u&&d(l),a=!1,Et(s)}}}function st(i){let e,t,l=(i[46].indent?Array.from({length:i[46].indent-1},i[21]).join("")+Ye:"")+"",n=he(i[46].label)+"",a,s;return{c(){e=E("option"),t=new Rt,a=V(n),this.h()},l(r){e=w(r,"OPTION",{});var o=I(e);t=Ut(o),a=L(o,n),o.forEach(d),this.h()},h(){t.a=a,e.__value=s=i[46],e.value=e.__value},m(r,o){y(r,e,o),t.m(l,e),b(e,a)},p(r,o){o[0]&4&&l!==(l=(r[46].indent?Array.from({length:r[46].indent-1},r[21]).join("")+Ye:"")+"")&&t.p(l),o[0]&4&&n!==(n=he(r[46].label)+"")&&O(a,n),o[0]&1028&&s!==(s=r[46])&&(e.__value=s,e.value=e.__value)},d(r){r&&d(e)}}}function ot(i){let e,t,l,n=i[0],a=[];for(let s=0;s<n.length;s+=1)a[s]=rt(lt(i,n,s));return{c(){e=E("br"),t=A();for(let s=0;s<a.length;s+=1)a[s].c();l=G()},l(s){e=w(s,"BR",{}),t=N(s);for(let r=0;r<a.length;r+=1)a[r].l(s);l=G()},m(s,r){y(s,e,r),y(s,t,r);for(let o=0;o<a.length;o+=1)a[o].m(s,r);y(s,l,r)},p(s,r){if(r[0]&8353){n=s[0];let o;for(o=0;o<n.length;o+=1){const u=lt(s,n,o);a[o]?a[o].p(u,r):(a[o]=rt(u),a[o].c(),a[o].m(l.parentNode,l))}for(;o<a.length;o+=1)a[o].d(1);a.length=n.length}},d(s){s&&d(e),s&&d(t),$(a,s),s&&d(l)}}}function ka(i){let e,t,l=he(i[43].topic)+"",n,a,s=he(i[43].label)+"",r,o,u,f,c,h;function _(){return i[24](i[43])}return{c(){e=E("div"),t=E("span"),n=V(l),a=V(": "),r=V(s),o=A(),u=E("button"),f=A(),this.h()},l(m){e=w(m,"DIV",{class:!0});var g=I(e);t=w(g,"SPAN",{class:!0});var D=I(t);n=L(D,l),a=L(D,": "),r=L(D,s),D.forEach(d),o=N(g),u=w(g,"BUTTON",{class:!0}),I(u).forEach(d),f=N(g),g.forEach(d),this.h()},h(){k(t,"class","svelte-1agl880"),k(u,"class","svelte-1agl880"),k(e,"class","chip svelte-1agl880"),fe(e,"chip-inactive",i[45]>=i[7])},m(m,g){y(m,e,g),b(e,t),b(t,n),b(t,a),b(t,r),b(e,o),b(e,u),b(e,f),c||(h=Pe(u,"click",_),c=!0)},p(m,g){i=m,g[0]&1&&l!==(l=he(i[43].topic)+"")&&O(n,l),g[0]&1&&s!==(s=he(i[43].label)+"")&&O(r,s),g[0]&128&&fe(e,"chip-inactive",i[45]>=i[7])},d(m){m&&d(e),c=!1,h()}}}function pa(i){let e,t,l=he(i[43].topic)+"",n,a,s=he(i[43].label)+"",r,o,u,f;return{c(){e=E("div"),t=E("span"),n=V(l),a=V(": "),r=V(s),o=A(),u=E("div"),f=A(),this.h()},l(c){e=w(c,"DIV",{class:!0});var h=I(e);t=w(h,"SPAN",{class:!0});var _=I(t);n=L(_,l),a=L(_,": "),r=L(_,s),_.forEach(d),o=N(h),u=w(h,"DIV",{class:!0}),I(u).forEach(d),f=N(h),h.forEach(d),this.h()},h(){k(t,"class","svelte-1agl880"),k(u,"class","chip-loader svelte-1agl880"),k(e,"class","chip chip-pending svelte-1agl880")},m(c,h){y(c,e,h),b(e,t),b(t,n),b(t,a),b(t,r),b(e,o),b(e,u),b(e,f)},p(c,h){h[0]&1&&l!==(l=he(c[43].topic)+"")&&O(n,l),h[0]&1&&s!==(s=he(c[43].label)+"")&&O(r,s)},d(c){c&&d(e)}}}function rt(i){let e;function t(a,s){return a[5]=="loading"&&a[45]==a[0].length-1?pa:ka}let l=t(i),n=l(i);return{c(){n.c(),e=G()},l(a){n.l(a),e=G()},m(a,s){n.m(a,s),y(a,e,s)},p(a,s){l===(l=t(a))&&n?n.p(a,s):(n.d(1),n=l(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){n.d(a),a&&d(e)}}}function ft(i){let e,t,l,n=i[5]=="failed"&&ut(),a=i[6]==!0&&ct();return{c(){e=E("div"),t=V(`Some datasets not available for selected variables.
    `),n&&n.c(),l=A(),a&&a.c(),this.h()},l(s){e=w(s,"DIV",{class:!0});var r=I(e);t=L(r,`Some datasets not available for selected variables.
    `),n&&n.l(r),l=N(r),a&&a.l(r),r.forEach(d),this.h()},h(){k(e,"class","warning svelte-1agl880")},m(s,r){y(s,e,r),b(e,t),n&&n.m(e,null),b(e,l),a&&a.m(e,null)},p(s,r){s[5]=="failed"?n||(n=ut(),n.c(),n.m(e,l)):n&&(n.d(1),n=null),s[6]==!0?a||(a=ct(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(s){s&&d(e),n&&n.d(),a&&a.d()}}}function ut(i){let e;return{c(){e=V("Try removing a variable to see more datasets.")},l(t){e=L(t,"Try removing a variable to see more datasets.")},m(t,l){y(t,e,l)},d(t){t&&d(e)}}}function ct(i){let e;return{c(){e=V("Economic indicators (employment, social status etc) not available for ages 0 to 15.")},l(t){e=L(t,"Economic indicators (employment, social status etc) not available for ages 0 to 15.")},m(t,l){y(t,e,l)},d(t){t&&d(e)}}}function Ea(i){let e,t,l,n=i[0].length?"Select another characteristic":"Select a characteristic",a,s,r,o,u,f,c,h=i[10],_=[];for(let v=0;v<h.length;v+=1)_[v]=at(nt(i,h,v));let m=i[2]&&it(i),g=i[0][0]&&ot(i),D=(i[5]=="failed"||i[6]==!0)&&ft(i);return{c(){e=E("div"),t=E("select"),l=E("option"),a=V(n);for(let v=0;v<_.length;v+=1)_[v].c();r=A(),m&&m.c(),o=A(),g&&g.c(),u=A(),D&&D.c(),this.h()},l(v){e=w(v,"DIV",{slot:!0,class:!0});var S=I(e);t=w(S,"SELECT",{class:!0});var C=I(t);l=w(C,"OPTION",{});var p=I(l);a=L(p,n),p.forEach(d);for(let P=0;P<_.length;P+=1)_[P].l(C);C.forEach(d),r=N(S),m&&m.l(S),o=N(S),g&&g.l(S),u=N(S),D&&D.l(S),S.forEach(d),this.h()},h(){l.__value=null,l.value=l.__value,t.disabled=s=!i[10],k(t,"class","svelte-1agl880"),i[2]===void 0&&Le(()=>i[20].call(t)),k(e,"slot","meta"),k(e,"class","wrapper")},m(v,S){y(v,e,S),b(e,t),b(t,l),b(l,a);for(let C=0;C<_.length;C+=1)_[C].m(t,null);Ke(t,i[2]),b(e,r),m&&m.m(e,null),b(e,o),g&&g.m(e,null),b(e,u),D&&D.m(e,null),f||(c=Pe(t,"change",i[20]),f=!0)},p(v,S){if(S[0]&1&&n!==(n=v[0].length?"Select another characteristic":"Select a characteristic")&&O(a,n),S[0]&3072){h=v[10];let C;for(C=0;C<h.length;C+=1){const p=nt(v,h,C);_[C]?_[C].p(p,S):(_[C]=at(p),_[C].c(),_[C].m(t,null))}for(;C<_.length;C+=1)_[C].d(1);_.length=h.length}S[0]&1024&&s!==(s=!v[10])&&(t.disabled=s),S[0]&1028&&Ke(t,v[2]),v[2]?m?m.p(v,S):(m=it(v),m.c(),m.m(e,o)):m&&(m.d(1),m=null),v[0][0]?g?g.p(v,S):(g=ot(v),g.c(),g.m(e,u)):g&&(g.d(1),g=null),v[5]=="failed"||v[6]==!0?D?D.p(v,S):(D=ft(v),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(v){v&&d(e),$(_,v),m&&m.d(),g&&g.d(),D&&D.d(),f=!1,c()}}}function wa(i){let e,t=i[9].selected.total_pop.toLocaleString()+"",l,n,a,s,r,o,u,f=(i[9].selected.total_pop===i[9].all.total_pop?100:(i[9].selected.total_pop/i[9].all.total_pop*100).toFixed(1)!=="0.0"?(i[9].selected.total_pop/i[9].all.total_pop*100).toFixed(1):"Less than 0.05")+"",c,h,_;return u=new ga({props:{color:"lightgrey"}}),{c(){e=E("div"),l=V(t),n=A(),a=E("div"),s=V("people (TODO: calculate this percentage in Python)"),r=A(),o=E("div"),R(u.$$.fragment),c=V(f),h=V("% of the total population of England and Wales"),this.h()},l(m){e=w(m,"DIV",{class:!0});var g=I(e);l=L(g,t),g.forEach(d),n=N(m),a=w(m,"DIV",{class:!0});var D=I(a);s=L(D,"people (TODO: calculate this percentage in Python)"),D.forEach(d),r=N(m),o=w(m,"DIV",{class:!0});var v=I(o);Y(u.$$.fragment,v),c=L(v,f),h=L(v,"% of the total population of England and Wales"),v.forEach(d),this.h()},h(){k(e,"class","num-big svelte-1agl880"),k(a,"class","num-suffix svelte-1agl880"),k(o,"class","num-desc svelte-1agl880")},m(m,g){y(m,e,g),b(e,l),y(m,n,g),y(m,a,g),b(a,s),y(m,r,g),y(m,o,g),U(u,o,null),b(o,c),b(o,h),_=!0},p(m,g){(!_||g[0]&512)&&t!==(t=m[9].selected.total_pop.toLocaleString()+"")&&O(l,t),(!_||g[0]&512)&&f!==(f=(m[9].selected.total_pop===m[9].all.total_pop?100:(m[9].selected.total_pop/m[9].all.total_pop*100).toFixed(1)!=="0.0"?(m[9].selected.total_pop/m[9].all.total_pop*100).toFixed(1):"Less than 0.05")+"")&&O(c,f)},i(m){_||(T(u.$$.fragment,m),_=!0)},o(m){j(u.$$.fragment,m),_=!1},d(m){m&&d(e),m&&d(n),m&&d(a),m&&d(r),m&&d(o),Z(u)}}}function ya(i){let e,t=Ae.nodata+"",l;return{c(){e=E("div"),l=V(t),this.h()},l(n){e=w(n,"DIV",{class:!0});var a=I(e);l=L(a,t),a.forEach(d),this.h()},h(){k(e,"class","num-desc svelte-1agl880")},m(n,a){y(n,e,a),b(e,l)},p:H,i:H,o:H,d(n){n&&d(e)}}}function Da(i){let e,t,l,n;const a=[ya,wa],s=[];function r(o,u){return o[9].selected.total_pop==0?0:1}return e=r(i),t=s[e]=a[e](i),{c(){t.c(),l=G()},l(o){t.l(o),l=G()},m(o,u){s[e].m(o,u),y(o,l,u),n=!0},p(o,u){let f=e;e=r(o),e===f?s[e].p(o,u):(oe(),j(s[f],1,1,()=>{s[f]=null}),re(),t=s[e],t?t.p(o,u):(t=s[e]=a[e](o),t.c()),T(t,1),t.m(l.parentNode,l))},i(o){n||(T(t),n=!0)},o(o){j(t),n=!1},d(o){s[e].d(o),o&&d(l)}}}function Ca(i){let e,t;return e=new On({props:{data:i[9].selected&&i[14](["residents","resident_age_23a"]),zKey:"group"}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n[0]&512&&(a.data=l[9].selected&&l[14](["residents","resident_age_23a"])),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function Ia(i){let e,t=Ae.nodata+"",l;return{c(){e=E("span"),l=V(t),this.h()},l(n){e=w(n,"SPAN",{class:!0});var a=I(e);l=L(a,t),a.forEach(d),this.h()},h(){k(e,"class","num-desc svelte-1agl880")},m(n,a){y(n,e,a),b(e,l)},p:H,i:H,o:H,d(n){n&&d(e)}}}function Sa(i){let e,t=Ae.nodata+"",l;return{c(){e=E("span"),l=V(t),this.h()},l(n){e=w(n,"SPAN",{class:!0});var a=I(e);l=L(a,t),a.forEach(d),this.h()},h(){k(e,"class","num-desc svelte-1agl880")},m(n,a){y(n,e,a),b(e,l)},p:H,i:H,o:H,d(n){n&&d(e)}}}function za(i){let e,t,l,n,a;const s=[Sa,Ia,Ca],r=[];function o(u,f){return f[0]&512&&(e=null),u[9].selected.residents.resident_age_23a.values==="blocked"?0:(e==null&&(e=!!on(u[9].selected.residents.resident_age_23a.values.percent)),e?1:2)}return t=o(i,[-1,-1]),l=r[t]=s[t](i),{c(){l.c(),n=G()},l(u){l.l(u),n=G()},m(u,f){r[t].m(u,f),y(u,n,f),a=!0},p(u,f){let c=t;t=o(u,f),t===c?r[t].p(u,f):(oe(),j(r[c],1,1,()=>{r[c]=null}),re(),l=r[t],l?l.p(u,f):(l=r[t]=s[t](u),l.c()),T(l,1),l.m(n.parentNode,n))},i(u){a||(T(l),a=!0)},o(u){j(l),a=!1},d(u){r[t].d(u),u&&d(n)}}}function Pa(i){let e,t,l,n;return e=new Ce({props:{title:"Population",$$slots:{default:[Da]},$$scope:{ctx:i}}}),l=new Ce({props:{title:"Age profile",$$slots:{default:[za]},$$scope:{ctx:i}}}),{c(){R(e.$$.fragment),t=A(),R(l.$$.fragment)},l(a){Y(e.$$.fragment,a),t=N(a),Y(l.$$.fragment,a)},m(a,s){U(e,a,s),y(a,t,s),U(l,a,s),n=!0},p(a,s){const r={};s[0]&512|s[1]&1048576&&(r.$$scope={dirty:s,ctx:a}),e.$set(r);const o={};s[0]&512|s[1]&1048576&&(o.$$scope={dirty:s,ctx:a}),l.$set(o)},i(a){n||(T(e.$$.fragment,a),T(l.$$.fragment,a),n=!0)},o(a){j(e.$$.fragment,a),j(l.$$.fragment,a),n=!1},d(a){Z(e,a),a&&d(t),Z(l,a)}}}function Ta(i){let e,t;return{c(){e=E("p"),t=V("For each lower-tier local authority area in England and Wales, the map shows the count of people in the categories chosen above as a percentage of the area's total population."),this.h()},l(l){e=w(l,"P",{class:!0});var n=I(e);t=L(n,"For each lower-tier local authority area in England and Wales, the map shows the count of people in the categories chosen above as a percentage of the area's total population."),n.forEach(d),this.h()},h(){k(e,"class","subtitle svelte-1agl880")},m(l,n){y(l,e,n),b(e,t)},d(l){l&&d(e)}}}function ht(i){let e,t;return e=new aa({props:{id:"lad",type:"geojson",data:i[9].geojson,promoteId:Se.code,$$slots:{default:[Va]},$$scope:{ctx:i}}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n[0]&512&&(a.data=l[9].geojson),n[0]&528|n[1]&1048576&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function Va(i){let e,t,l,n,a;function s(o){i[25](o)}let r={id:"lad-fill",data:i[9].geoPerc,geoCode:"code",nameCode:"name",colorCode:"color",valueCode:"value",hover:!0,tooltip:!0,type:"fill",paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"],"fill-opacity":.8},order:"highway_name_other"};return i[4]!==void 0&&(r.hovered=i[4]),e=new Ul({props:r}),We.push(()=>wt(e,"hovered",s)),n=new Ul({props:{id:"lad-line",type:"line",paint:{"line-color":"orange","line-width":2,"line-opacity":["case",["==",["feature-state","hovered"],!0],1,0]},order:"highway_name_other"}}),{c(){R(e.$$.fragment),l=A(),R(n.$$.fragment)},l(o){Y(e.$$.fragment,o),l=N(o),Y(n.$$.fragment,o)},m(o,u){U(e,o,u),y(o,l,u),U(n,o,u),a=!0},p(o,u){const f={};u[0]&512&&(f.data=o[9].geoPerc),!t&&u[0]&16&&(t=!0,f.hovered=o[4],yt(()=>t=!1)),e.$set(f)},i(o){a||(T(e.$$.fragment,o),T(n.$$.fragment,o),a=!0)},o(o){j(e.$$.fragment,o),j(n.$$.fragment,o),a=!1},d(o){Z(e,o),o&&d(l),Z(n,o)}}}function La(i){let e,t,l=i[9].geojson&&i[9].geoPerc&&ht(i);return{c(){l&&l.c(),e=G()},l(n){l&&l.l(n),e=G()},m(n,a){l&&l.m(n,a),y(n,e,a),t=!0},p(n,a){n[9].geojson&&n[9].geoPerc?l?(l.p(n,a),a[0]&512&&T(l,1)):(l=ht(n),l.c(),T(l,1),l.m(e.parentNode,e)):l&&(oe(),j(l,1,1,()=>{l=null}),re())},i(n){t||(T(l),t=!0)},o(n){j(l),t=!1},d(n){l&&l.d(n),n&&d(e)}}}function _t(i){let e,t,l;return t=new Gn({props:{breaks:i[9].geoBreaks,hovered:i[4]&&i[9].geoPerc.find(i[27])?i[9].geoPerc.find(i[28]).value:null,colors:i[9].geoBreaks[1]==100?[Ee.seq[4]]:Ee.seq}}),{c(){e=E("div"),R(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{});var a=I(e);Y(t.$$.fragment,a),a.forEach(d),this.h()},h(){z(e,"height","38px",!1),z(e,"width","100%",!1)},m(n,a){y(n,e,a),U(t,e,null),l=!0},p(n,a){const s={};a[0]&512&&(s.breaks=n[9].geoBreaks),a[0]&528&&(s.hovered=n[4]&&n[9].geoPerc.find(n[27])?n[9].geoPerc.find(n[28]).value:null),a[0]&512&&(s.colors=n[9].geoBreaks[1]==100?[Ee.seq[4]]:Ee.seq),t.$set(s)},i(n){l||(T(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){n&&d(e),Z(t)}}}function Aa(i){let e,t,l,n,a,s;function r(f){i[26](f)}let o={style:ln,$$slots:{default:[La]},$$scope:{ctx:i}};i[1]!==void 0&&(o.map=i[1]),t=new la({props:o}),We.push(()=>wt(t,"map",r));let u=i[9].geoBreaks&&i[9].geoPerc&&_t(i);return{c(){e=E("div"),R(t.$$.fragment),n=A(),u&&u.c(),a=G(),this.h()},l(f){e=w(f,"DIV",{});var c=I(e);Y(t.$$.fragment,c),c.forEach(d),n=N(f),u&&u.l(f),a=G(),this.h()},h(){z(e,"height","450px",!1)},m(f,c){y(f,e,c),U(t,e,null),y(f,n,c),u&&u.m(f,c),y(f,a,c),s=!0},p(f,c){const h={};c[0]&528|c[1]&1048576&&(h.$$scope={dirty:c,ctx:f}),!l&&c[0]&2&&(l=!0,h.map=f[1],yt(()=>l=!1)),t.$set(h),f[9].geoBreaks&&f[9].geoPerc?u?(u.p(f,c),c[0]&512&&T(u,1)):(u=_t(f),u.c(),T(u,1),u.m(a.parentNode,a)):u&&(oe(),j(u,1,1,()=>{u=null}),re())},i(f){s||(T(t.$$.fragment,f),T(u),s=!0)},o(f){j(t.$$.fragment,f),j(u),s=!1},d(f){f&&d(e),Z(t),f&&d(n),u&&u.d(f),f&&d(a)}}}function Na(i){let e,t;return{c(){e=E("span"),t=V("Make a selection to see rankings."),this.h()},l(l){e=w(l,"SPAN",{class:!0});var n=I(e);t=L(n,"Make a selection to see rankings."),n.forEach(d),this.h()},h(){k(e,"class","muted svelte-1agl880")},m(l,n){y(l,e,n),b(e,t)},p:H,i:H,o:H,d(l){l&&d(e)}}}function ja(i){let e,t;return e=new Tt({props:{data:[...i[9].geoPerc].sort(gt).slice(0,5)}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n[0]&512&&(a.data=[...l[9].geoPerc].sort(gt).slice(0,5)),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function Ka(i){let e,t,l,n;const a=[ja,Na],s=[];function r(o,u){return o[9].geoPerc&&o[0][0]?0:1}return e=r(i),t=s[e]=a[e](i),{c(){t.c(),l=G()},l(o){t.l(o),l=G()},m(o,u){s[e].m(o,u),y(o,l,u),n=!0},p(o,u){let f=e;e=r(o),e===f?s[e].p(o,u):(oe(),j(s[f],1,1,()=>{s[f]=null}),re(),t=s[e],t?t.p(o,u):(t=s[e]=a[e](o),t.c()),T(t,1),t.m(l.parentNode,l))},i(o){n||(T(t),n=!0)},o(o){j(t),n=!1},d(o){s[e].d(o),o&&d(l)}}}function Ma(i){let e,t;return{c(){e=E("span"),t=V("Make a selection to see rankings."),this.h()},l(l){e=w(l,"SPAN",{class:!0});var n=I(e);t=L(n,"Make a selection to see rankings."),n.forEach(d),this.h()},h(){k(e,"class","muted svelte-1agl880")},m(l,n){y(l,e,n),b(e,t)},p:H,i:H,o:H,d(l){l&&d(e)}}}function Fa(i){let e,t;return e=new Tt({props:{data:i[9].geoPerc.filter(vt).sort(bt).slice(-5),offset:i[9].geoPerc.filter(kt).length-4}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n[0]&512&&(a.data=l[9].geoPerc.filter(vt).sort(bt).slice(-5)),n[0]&512&&(a.offset=l[9].geoPerc.filter(kt).length-4),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function Ba(i){let e,t,l,n;const a=[Fa,Ma],s=[];function r(o,u){return o[9].geoPerc&&o[0][0]?0:1}return e=r(i),t=s[e]=a[e](i),{c(){t.c(),l=G()},l(o){t.l(o),l=G()},m(o,u){s[e].m(o,u),y(o,l,u),n=!0},p(o,u){let f=e;e=r(o),e===f?s[e].p(o,u):(oe(),j(s[f],1,1,()=>{s[f]=null}),re(),t=s[e],t?t.p(o,u):(t=s[e]=a[e](o),t.c()),T(t,1),t.m(l.parentNode,l))},i(o){n||(T(t),n=!0)},o(o){j(t),n=!1},d(o){s[e].d(o),o&&d(l)}}}function Oa(i){let e,t,l,n,a,s,r,o;return e=new Ce({props:{colspan:3,rowspan:1,blank:!0,$$slots:{default:[Ta]},$$scope:{ctx:i}}}),l=new Ce({props:{colspan:2,rowspan:2,blank:!0,$$slots:{default:[Aa]},$$scope:{ctx:i}}}),a=new Ce({props:{title:"Areas with high %",$$slots:{default:[Ka]},$$scope:{ctx:i}}}),r=new Ce({props:{title:"Areas with low %",$$slots:{default:[Ba]},$$scope:{ctx:i}}}),{c(){R(e.$$.fragment),t=A(),R(l.$$.fragment),n=A(),R(a.$$.fragment),s=A(),R(r.$$.fragment)},l(u){Y(e.$$.fragment,u),t=N(u),Y(l.$$.fragment,u),n=N(u),Y(a.$$.fragment,u),s=N(u),Y(r.$$.fragment,u)},m(u,f){U(e,u,f),y(u,t,f),U(l,u,f),y(u,n,f),U(a,u,f),y(u,s,f),U(r,u,f),o=!0},p(u,f){const c={};f[1]&1048576&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const h={};f[0]&530|f[1]&1048576&&(h.$$scope={dirty:f,ctx:u}),l.$set(h);const _={};f[0]&513|f[1]&1048576&&(_.$$scope={dirty:f,ctx:u}),a.$set(_);const m={};f[0]&513|f[1]&1048576&&(m.$$scope={dirty:f,ctx:u}),r.$set(m)},i(u){o||(T(e.$$.fragment,u),T(l.$$.fragment,u),T(a.$$.fragment,u),T(r.$$.fragment,u),o=!0)},o(u){j(e.$$.fragment,u),j(l.$$.fragment,u),j(a.$$.fragment,u),j(r.$$.fragment,u),o=!1},d(u){Z(e,u),u&&d(t),Z(l,u),u&&d(n),Z(a,u),u&&d(s),Z(r,u)}}}function Wa(i){let e,t,l;var n=i[8];function a(s){return{props:{data:s[9].selected&&s[14](["residents",s[40].code])}}}return n&&(e=new n(a(i))),{c(){e&&R(e.$$.fragment),t=G()},l(s){e&&Y(e.$$.fragment,s),t=G()},m(s,r){e&&U(e,s,r),y(s,t,r),l=!0},p(s,r){const o={};if(r[0]&512&&(o.data=s[9].selected&&s[14](["residents",s[40].code])),n!==(n=s[8])){if(e){oe();const u=e;j(u.$$.fragment,1,0,()=>{Z(u,1)}),re()}n?(e=new n(a(s)),R(e.$$.fragment),T(e.$$.fragment,1),U(e,t.parentNode,t)):e=null}else n&&e.$set(o)},i(s){l||(e&&T(e.$$.fragment,s),l=!0)},o(s){e&&j(e.$$.fragment,s),l=!1},d(s){s&&d(t),e&&Z(e,s)}}}function Ha(i){let e,t=Ae.nodata+"",l;return{c(){e=E("span"),l=V(t),this.h()},l(n){e=w(n,"SPAN",{class:!0});var a=I(e);l=L(a,t),a.forEach(d),this.h()},h(){k(e,"class","num-desc svelte-1agl880")},m(n,a){y(n,e,a),b(e,l)},p:H,i:H,o:H,d(n){n&&d(e)}}}function Ga(i){let e,t=Ae.blocked+"",l;return{c(){e=E("span"),l=V(t),this.h()},l(n){e=w(n,"SPAN",{class:!0});var a=I(e);l=L(a,t),a.forEach(d),this.h()},h(){k(e,"class","num-desc svelte-1agl880")},m(n,a){y(n,e,a),b(e,l)},p:H,i:H,o:H,d(n){n&&d(e)}}}function qa(i){let e,t,l,n,a,s=Xe[i[40].code]+"",r,o;const u=[Ga,Ha,Wa],f=[];function c(h,_){return h[9].selected.residents[h[40].code].values==="blocked"?0:h[9].selected.residents[h[40].code].values.percent[0]==null?1:2}return e=c(i),t=f[e]=u[e](i),{c(){t.c(),l=A(),n=E("span"),a=V("% of "),r=V(s),this.h()},l(h){t.l(h),l=N(h),n=w(h,"SPAN",{class:!0});var _=I(n);a=L(_,"% of "),r=L(_,s),_.forEach(d),this.h()},h(){k(n,"class","num-desc svelte-1agl880")},m(h,_){f[e].m(h,_),y(h,l,_),y(h,n,_),b(n,a),b(n,r),o=!0},p(h,_){let m=e;e=c(h),e===m?f[e].p(h,_):(oe(),j(f[m],1,1,()=>{f[m]=null}),re(),t=f[e],t?t.p(h,_):(t=f[e]=u[e](h),t.c()),T(t,1),t.m(l.parentNode,l)),(!o||_[0]&512)&&s!==(s=Xe[h[40].code]+"")&&O(r,s)},i(h){o||(T(t),o=!0)},o(h){j(t),o=!1},d(h){f[e].d(h),h&&d(l),h&&d(n)}}}function dt(i){let e,t;return e=new Ce({props:{title:Je(i[40].key),$$slots:{default:[qa]},$$scope:{ctx:i}}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n[0]&512&&(a.title=Je(l[40].key)),n[0]&768|n[1]&1048576&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function Ra(i){let e,t,l=i[37].tables.filter(i[32]),n=[];for(let s=0;s<l.length;s+=1)n[s]=dt(et(i,l,s));const a=s=>j(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=A()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=N(s)},m(s,r){for(let o=0;o<n.length;o+=1)n[o].m(s,r);y(s,e,r),t=!0},p(s,r){if(r[0]&17152){l=s[37].tables.filter(s[32]);let o;for(o=0;o<l.length;o+=1){const u=et(s,l,o);n[o]?(n[o].p(u,r),T(n[o],1)):(n[o]=dt(u),n[o].c(),T(n[o],1),n[o].m(e.parentNode,e))}for(oe(),o=l.length;o<n.length;o+=1)a(o);re()}},i(s){if(!t){for(let r=0;r<l.length;r+=1)T(n[r]);t=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)j(n[r]);t=!1},d(s){$(n,s),s&&d(e)}}}function Ua(i){let e,t,l,n,a,s,r,o,u,f,c,h,_,m;return{c(){e=E("span"),t=E("strong"),l=V("Chart type:"),n=A(),a=E("label"),s=E("input"),r=V("Comparison marker"),o=A(),u=E("label"),f=E("input"),c=V("Grouped bar"),h=A(),this.h()},l(g){e=w(g,"SPAN",{slot:!0});var D=I(e);t=w(D,"STRONG",{});var v=I(t);l=L(v,"Chart type:"),v.forEach(d),n=N(D),a=w(D,"LABEL",{});var S=I(a);s=w(S,"INPUT",{type:!0,name:!0}),r=L(S,"Comparison marker"),S.forEach(d),o=N(D),u=w(D,"LABEL",{});var C=I(u);f=w(C,"INPUT",{type:!0,name:!0}),c=L(C,"Grouped bar"),C.forEach(d),h=N(D),D.forEach(d),this.h()},h(){k(s,"type","radio"),k(s,"name","chart-type"),s.__value=Pt,s.value=s.__value,i[30][0].push(s),k(f,"type","radio"),k(f,"name","chart-type"),f.__value=Jn,f.value=f.__value,i[30][0].push(f),k(e,"slot","meta"),z(e,"margin-left","10px",!1)},m(g,D){y(g,e,D),b(e,t),b(t,l),b(e,n),b(e,a),b(a,s),s.checked=s.__value===i[8],b(a,r),b(e,o),b(e,u),b(u,f),f.checked=f.__value===i[8],b(u,c),b(e,h),_||(m=[Pe(s,"change",i[29]),Pe(f,"change",i[31])],_=!0)},p(g,D){D[0]&256&&(s.checked=s.__value===g[8]),D[0]&256&&(f.checked=f.__value===g[8])},d(g){g&&d(e),i[30][0].splice(i[30][0].indexOf(s),1),i[30][0].splice(i[30][0].indexOf(f),1),_=!1,Et(m)}}}function mt(i){let e,t;return e=new Be({props:{title:i[37].categoryName,$$slots:{meta:[Ua],default:[Ra]},$$scope:{ctx:i}}}),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,n){U(e,l,n),t=!0},p(l,n){const a={};n[0]&768|n[1]&1048576&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function Za(i){let e,t,l,n,a,s;e=new Be({props:{title:"Demographics",$$slots:{default:[Pa]},$$scope:{ctx:i}}}),l=new Be({props:{title:"Population by area",$$slots:{default:[Oa]},$$scope:{ctx:i}}});let r=Me[0].tablesCategorised,o=[];for(let f=0;f<r.length;f+=1)o[f]=mt($l(i,r,f));const u=f=>j(o[f],1,1,()=>{o[f]=null});return{c(){R(e.$$.fragment),t=A(),R(l.$$.fragment),n=A();for(let f=0;f<o.length;f+=1)o[f].c();a=G()},l(f){Y(e.$$.fragment,f),t=N(f),Y(l.$$.fragment,f),n=N(f);for(let c=0;c<o.length;c+=1)o[c].l(f);a=G()},m(f,c){U(e,f,c),y(f,t,c),U(l,f,c),y(f,n,c);for(let h=0;h<o.length;h+=1)o[h].m(f,c);y(f,a,c),s=!0},p(f,c){const h={};c[0]&512|c[1]&1048576&&(h.$$scope={dirty:c,ctx:f}),e.$set(h);const _={};if(c[0]&531|c[1]&1048576&&(_.$$scope={dirty:c,ctx:f}),l.$set(_),c[0]&17152){r=Me[0].tablesCategorised;let m;for(m=0;m<r.length;m+=1){const g=$l(f,r,m);o[m]?(o[m].p(g,c),T(o[m],1)):(o[m]=mt(g),o[m].c(),T(o[m],1),o[m].m(a.parentNode,a))}for(oe(),m=r.length;m<o.length;m+=1)u(m);re()}},i(f){if(!s){T(e.$$.fragment,f),T(l.$$.fragment,f);for(let c=0;c<r.length;c+=1)T(o[c]);s=!0}},o(f){j(e.$$.fragment,f),j(l.$$.fragment,f),o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)j(o[c]);s=!1},d(f){Z(e,f),f&&d(t),Z(l,f),f&&d(n),$(o,f),f&&d(a)}}}function Ya(i){let e,t,l,n,a,s,r,o,u,f,c,h;return u=new zn({props:{background:"none",breadcrumb:[{label:"Census",url:"/census"},{label:"Population Group Profiles"}],$$slots:{meta:[Ea],default:[ba]},$$scope:{ctx:i}}}),c=new ra({props:{$$slots:{default:[Za]},$$scope:{ctx:i}}}),{c(){e=E("meta"),t=E("meta"),l=E("meta"),n=E("meta"),a=E("meta"),s=E("meta"),r=E("meta"),o=A(),R(u.$$.fragment),f=A(),R(c.$$.fragment),this.h()},l(_){const m=qt('[data-svelte="svelte-1z0vru4"]',document.head);e=w(m,"META",{name:!0,content:!0}),t=w(m,"META",{property:!0,content:!0}),l=w(m,"META",{property:!0,content:!0}),n=w(m,"META",{property:!0,content:!0}),a=w(m,"META",{property:!0,content:!0}),s=w(m,"META",{property:!0,content:!0}),r=w(m,"META",{name:!0,content:!0}),m.forEach(d),o=N(_),Y(u.$$.fragment,_),f=N(_),Y(c.$$.fragment,_),this.h()},h(){document.title="Census Population Group Profiles",k(e,"name","description"),k(e,"content",""),k(t,"property","og:title"),k(t,"content","Census Population Group Profiles"),k(l,"property","og:type"),k(l,"content","website"),k(n,"property","og:url"),k(n,"content",Dt+"/"),k(a,"property","og:image:type"),k(a,"content","image/jpeg"),k(s,"property","og:description"),k(s,"content",""),k(r,"name","description"),k(r,"content","")},m(_,m){b(document.head,e),b(document.head,t),b(document.head,l),b(document.head,n),b(document.head,a),b(document.head,s),b(document.head,r),y(_,o,m),U(u,_,m),y(_,f,m),U(c,_,m),h=!0},p(_,m){const g={};m[0]&1261|m[1]&1048576&&(g.$$scope={dirty:m,ctx:_}),u.$set(g);const D={};m[0]&787|m[1]&1048576&&(D.$$scope={dirty:m,ctx:_}),c.$set(D)},i(_){h||(T(u.$$.fragment,_),T(c.$$.fragment,_),h=!0)},o(_){j(u.$$.fragment,_),j(c.$$.fragment,_),h=!1},d(_){d(e),d(t),d(l),d(n),d(a),d(s),d(r),_&&d(o),Z(u,_),_&&d(f),Z(c,_)}}}const ti=!1;async function ni({fetch:i}){let e=await sn(Dt+Se.url,Se.layer,i),t={};e.features.forEach(s=>t[s.properties[Se.code]]=s.properties[Se.name]);let l=(await St(Me,[],i)).data;l.total_pop=zt(l.residents.sex.values.count);let n=[],a=e.features.map(s=>s.properties[Se.code]);return a.forEach(s=>{n.push({code:s,name:t[s],value:100})}),n.forEach(s=>s.color=Ee.seq[4]),{props:{geojson:e,geoLookup:t,dataAll:l,geoCodes:a,geoPerc:n}}}let Xa="light";const gt=(i,e)=>e.value-i.value,vt=i=>i.value!=null,bt=(i,e)=>e.value-i.value,kt=i=>i.value!=null;function Ja(i,e,t){let l,n;pt(i,en,B=>t(33,n=B));let{geojson:a,geoLookup:s,dataAll:r,geoCodes:o,geoPerc:u}=e,f=Yt.concat(Xt);ze("theme",Jt[Xa]);let c=null,h=null,_={},m=[];f.forEach(B=>{t(3,_[B.label]=B.cats[0],_)});let g=null,D="success",v=!1,S=0,C=Pt;const p=B=>Qt[[...m.map(x=>x.key),B.key].sort((x,se)=>x.localeCompare(se)).join(",")];let P={all:r,selected:r,geojson:a,geoLookup:s,geoCodes:o,geoPerc:u,geoBreaks:[0,100]};function M(B){t(0,m=[...m,De({topic:h.label,key:h.key},_[B])]),Qe(`${Ze}?${m.map(x=>`${x.key}=${x.code}`).join("&")}`,{noscroll:!0}),t(2,h=null)}function W(B){t(0,m=m.filter(x=>x.topic!=B)),Qe(`${Ze}?${m.map(x=>`${x.key}=${x.code}`).join("&")}`,{noscroll:!0})}function J(){t(5,D="loading"),m&&m.map(B=>B.label).includes("Aged 15 years and under")?t(6,v=!0):t(6,v=!1),St(Me,m).then(B=>{B.data.residents.sex.values?(t(9,P.selected=B.data,P),t(9,P.selected.total_pop=m.length===0?zt(r.residents.sex.values.count):B.total_pop,P),nn(m).then(x=>{let se=[],ce=null;{P.geoCodes.forEach(ie=>{se.push({code:ie,name:P.geoLookup[ie],value:x[ie]!=null?x[ie][1]:null})});let ae=se.map(ie=>ie.value).filter(ie=>ie!=null);ce=ae[4]?Zt(ae,5):null}if(ce==null)se.forEach(ae=>ae.color=Ee.nodata),t(9,P.geoBreaks=[0,100],P);else if(!ce[1])se.forEach(ae=>ae.color=Ee.seq[4]),t(9,P.geoBreaks=[0,100],P);else{let ae=[];ce.forEach(ie=>ae.push(ie[0])),ae.push(ce[ce.length-1][ce[ce.length-1].length-1]),ae[ae.length-1]==ae[ae.length-2]&&ae.pop(),se.forEach(ie=>ie.color=ie.value!=null?an(ie.value,ae,Ee.seq):Ee.nodata),t(9,P.geoBreaks=ae,P)}t(9,P.geoPerc=se,P),t(7,S=m.length),t(5,D="success")})):t(5,D="failed")})}function F(B){let x=B[0],se=B[1],ce=P.all[x][se].values,ae=P.selected[x][se].values,ie=[];return xt[se].forEach((Lt,He)=>{let Ge=Lt.label,At=ce.percent[He],Nt=ae.percent[He];P.selected.total_pop!=P.all.total_pop&&ie.push({group:"This group",category:Ge,value:Nt}),ie.push({group:"Whole population",category:Ge,value:At})}),ie}function q(){t(0,m=[]);for(let B of n.url.searchParams.entries()){let x=f.find(se=>se.key==B[0]);if(x){let se=x.cats.find(ce=>ce.code==B[1]);se&&m.push(De({topic:x.label,key:x.key},se))}}J()}rn(q);const ke=[[]];function ne(){h=Ue(this),t(2,h),t(10,l),t(34,f),t(0,m)}const Q=B=>$t;function _e(){_[h.label]=Ue(this),t(3,_),t(2,h)}const X=()=>M(h.label),de=B=>W(B.topic);function pe(B){g=B,t(4,g)}function we(B){c=B,t(1,c)}const ye=B=>B.code==g,Fe=B=>B.code==g;function K(){C=this.__value,t(8,C)}function ue(){C=this.__value,t(8,C)}const Vt=B=>!B.code.startsWith("resident_age")&&P.selected.residents[B.code].values!=="blocked"&&P.selected.residents[B.code].values!==void 0;return i.$$set=B=>{"geojson"in B&&t(15,a=B.geojson),"geoLookup"in B&&t(16,s=B.geoLookup),"dataAll"in B&&t(17,r=B.dataAll),"geoCodes"in B&&t(18,o=B.geoCodes),"geoPerc"in B&&t(19,u=B.geoPerc)},i.$$.update=()=>{i.$$.dirty[0]&1&&t(10,l=f.filter(B=>!m.map(x=>x.topic).includes(B.label)))},[m,c,h,_,g,D,v,S,C,P,l,p,M,W,F,a,s,r,o,u,ne,Q,_e,X,de,pe,we,ye,Fe,K,ke,ue,Vt]}class ai extends ee{constructor(e){super();le(this,e,Ja,Ya,te,{geojson:15,geoLookup:16,dataAll:17,geoCodes:18,geoPerc:19},null,[-1,-1])}}export{ai as default,ni as load,ti as prerender};
