var Mt=Object.defineProperty;var We=Object.getOwnPropertySymbols;var jt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable;var Ue=(a,e,t)=>e in a?Mt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ke=(a,e)=>{for(var t in e||(e={}))jt.call(e,t)&&Ue(a,t,e[t]);if(We)for(var t of We(e))Bt.call(e,t)&&Ue(a,t,e[t]);return a};import{X as qt,S as te,i as ne,s as ie,e as w,k as N,c as y,a as C,m as L,d as _,b as k,g as E,H as v,t as K,h as M,Q as G,R as le,j as W,l as R,N as re,w as J,x,y as Y,q as P,o as A,B as Q,F as _e,f as S,n as oe,p as fe,J as de,K as me,L as ge,r as ye,W as Se,G as qe,I as Fe,Y as Ie,Z as Ft,v as Ot,_ as Le,$ as De,a0 as Ht,D as Rt,V as It,a1 as Wt,O as Ce,a2 as ze,a3 as Te,U as Ut,T as Gt,a4 as Zt}from"../chunks/vendor-83c0648d.js";import{a as zt,b as Me}from"../chunks/paths-396f020f.js";import{l as we,c as be,n as Ae,v as Ge,a as Xt,t as Jt,b as Yt,m as Ze,p as Qt,d as $t,e as Xe,f as Ve}from"../chunks/config-adb0b5bb.js";import{c as Ee}from"../chunks/singletons-d1fb5791.js";const Je="https://raw.githubusercontent.com/jtrim-ons/key-pop-api-downloader/main/generated/";function xt(a){let e=[...a].sort((l,n)=>l.key.localeCompare(n.key));return{selString:a.length==0?"data":e.map((l,n)=>n<e.length-1?`${l.key}-${l.code}`:`${l.key}`).join("/"),lastCode:a.length>0?e[e.length-1].code:null}}async function Tt(a,e=[],t=window.fetch){if(e.length>0&&!e[0].newFormat)throw new Error("OLD FORMAT!");let{selString:l,lastCode:n}=xt(e),i={data:{}},s;if(e.length===0){let f=`${Je}${e.length}var_percent/${l}.json`;s=await(await t(f)).json()}else{let f=`${Je}${e.length}var-combined_percent/${l}.json`,r=await(await t(f)).json();s=r.bar_chart_data[n],i.mapData=r.map_data[n],i.total_pop=s.total_pop}for(let f of a){i.data[f.key]={};for(let o of f.tables)i.data[f.key][o.code]={values:s[o.code]}}return i}function en(a,e,t){for(let l=1;l<e.length;l++)if(a<=e[l])return t[l-1]}async function ln(a,e,t=window.fetch){let n=await(await t(a)).json();return await qt(n,e)}function ve(a){return a.charAt(0).toUpperCase()+a.slice(1)}function Vt(a){if(!a)return 0;let e=0;for(let t=0;t<a.length;t++)e+=a[t];return e}function tn(a){return!1}function Ye(a){return a.replace(new RegExp(" \\([0-9]* categories\\)"),"")}Ee.disable_scroll_handling;const je=Ee.goto;Ee.invalidate;Ee.prefetch;Ee.prefetch_routes;Ee.before_navigate;const nn=Ee.after_navigate;function Qe(a,e,t){const l=a.slice();return l[2]=e[t],l}function an(a){let e=a[2].label+"",t;return{c(){t=K(e)},l(l){t=M(l,e)},m(l,n){E(l,t,n)},p(l,n){n&1&&e!==(e=l[2].label+"")&&W(t,e)},d(l){l&&_(t)}}}function sn(a){let e,t=a[2].label+"",l,n;return{c(){e=w("a"),l=K(t),this.h()},l(i){e=y(i,"A",{class:!0,href:!0});var s=C(e);l=M(s,t),s.forEach(_),this.h()},h(){k(e,"class","breadcrumb__link"),k(e,"href",n=a[2].url)},m(i,s){E(i,e,s),v(e,l)},p(i,s){s&1&&t!==(t=i[2].label+"")&&W(l,t),s&1&&n!==(n=i[2].url)&&k(e,"href",n)},d(i){i&&_(e)}}}function $e(a){let e,t;function l(s,f){return s[2].url?sn:an}let n=l(a),i=n(a);return{c(){e=w("li"),i.c(),t=N(),this.h()},l(s){e=y(s,"LI",{class:!0});var f=C(e);i.l(f),t=L(f),f.forEach(_),this.h()},h(){k(e,"class","breadcrumb__item")},m(s,f){E(s,e,f),i.m(e,null),v(e,t)},p(s,f){n===(n=l(s))&&i?i.p(s,f):(i.d(1),i=n(s),i&&(i.c(),i.m(e,t)))},d(s){s&&_(e),i.d()}}}function on(a){let e,t,l,n,i,s,f,o,r=a[0],c=[];for(let h=0;h<r.length;h+=1)c[h]=$e(Qe(a,r,h));return{c(){e=w("nav"),t=w("div"),l=w("ol"),n=w("li"),i=w("a"),s=K("Home"),f=N();for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=y(h,"NAV",{"aria-label":!0});var u=C(e);t=y(u,"DIV",{class:!0});var d=C(t);l=y(d,"OL",{class:!0});var m=C(l);n=y(m,"LI",{class:!0});var g=C(n);i=y(g,"A",{class:!0,href:!0});var D=C(i);s=M(D,"Home"),D.forEach(_),g.forEach(_),f=L(m);for(let b=0;b<c.length;b+=1)c[b].l(m);m.forEach(_),d.forEach(_),u.forEach(_),this.h()},h(){k(i,"class","breadcrumb__link"),k(i,"href","/"),k(n,"class","breadcrumb__item"),k(l,"class","breadcrumb__list"),k(t,"class",o=(a[1]=="neutral"?"breadcrumb-neutral":"breadcrumb")+" print--hide"),k(e,"aria-label","Breadcrumbs")},m(h,u){E(h,e,u),v(e,t),v(t,l),v(l,n),v(n,i),v(i,s),v(l,f);for(let d=0;d<c.length;d+=1)c[d].m(l,null)},p(h,[u]){if(u&1){r=h[0];let d;for(d=0;d<r.length;d+=1){const m=Qe(h,r,d);c[d]?c[d].p(m,u):(c[d]=$e(m),c[d].c(),c[d].m(l,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=r.length}u&2&&o!==(o=(h[1]=="neutral"?"breadcrumb-neutral":"breadcrumb")+" print--hide")&&k(t,"class",o)},i:G,o:G,d(h){h&&_(e),le(c,h)}}}function fn(a,e,t){let{links:l=[]}=e,{mode:n="neutral"}=e;return a.$$set=i=>{"links"in i&&t(0,l=i.links),"mode"in i&&t(1,n=i.mode)},[l,n]}class rn extends te{constructor(e){super();ne(this,e,fn,on,ie,{links:0,mode:1})}}function xe(a,e,t){const l=a.slice();return l[2]=e[t],l}function el(a){let e,t,l=a[2].label+"",n,i,s,f;return{c(){e=w("li"),t=w("a"),n=K(l),f=N(),this.h()},l(o){e=y(o,"LI",{});var r=C(e);t=y(r,"A",{href:!0,"data-gtm-title":!0,"data-gtm-type":!0});var c=C(t);n=M(c,l),c.forEach(_),f=L(r),r.forEach(_),this.h()},h(){k(t,"href",i=a[2].url),k(t,"data-gtm-title",s=a[2].label),k(t,"data-gtm-type","highlighted-links")},m(o,r){E(o,e,r),v(e,t),v(t,n),v(e,f)},p(o,r){r&2&&l!==(l=o[2].label+"")&&W(n,l),r&2&&i!==(i=o[2].url)&&k(t,"href",i),r&2&&s!==(s=o[2].label)&&k(t,"data-gtm-title",s)},d(o){o&&_(e)}}}function cn(a){let e,t,l,n,i,s=a[1],f=[];for(let o=0;o<s.length;o+=1)f[o]=el(xe(a,s,o));return{c(){e=w("div"),t=w("h2"),l=K(a[0]),n=N(),i=w("ul");for(let o=0;o<f.length;o+=1)f[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0});var r=C(e);t=y(r,"H2",{class:!0});var c=C(t);l=M(c,a[0]),c.forEach(_),n=L(r),i=y(r,"UL",{class:!0});var h=C(i);for(let u=0;u<f.length;u+=1)f[u].l(h);h.forEach(_),r.forEach(_),this.h()},h(){k(t,"class","margin-top-lg--1"),k(i,"class","list--neutral margin-top--negative-one-fix"),k(e,"class","nav-secondary--border-left-lg col col--md-47 col--lg-19 col--lg-offset-2 padding-left margin-top-lg--3")},m(o,r){E(o,e,r),v(e,t),v(t,l),v(e,n),v(e,i);for(let c=0;c<f.length;c+=1)f[c].m(i,null)},p(o,[r]){if(r&1&&W(l,o[0]),r&2){s=o[1];let c;for(c=0;c<s.length;c+=1){const h=xe(o,s,c);f[c]?f[c].p(h,r):(f[c]=el(h),f[c].c(),f[c].m(i,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=s.length}},i:G,o:G,d(o){o&&_(e),le(f,o)}}}function un(a,e,t){let{title:l="Highlighted content"}=e,{links:n=[]}=e;return a.$$set=i=>{"title"in i&&t(0,l=i.title),"links"in i&&t(1,n=i.links)},[l,n]}class hn extends te{constructor(e){super();ne(this,e,un,cn,ie,{title:0,links:1})}}function ll(a,e,t){const l=a.slice();return l[2]=e[t],l}function _n(a){let e,t=a[2].label+"",l;return{c(){e=w("li"),l=K(t),this.h()},l(n){e=y(n,"LI",{class:!0,"aria-current":!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","ons-list__item svelte-1dyzlhu"),k(e,"aria-current","true")},m(n,i){E(n,e,i),v(e,l)},p(n,i){i&2&&t!==(t=n[2].label+"")&&W(l,t)},d(n){n&&_(e)}}}function dn(a){let e,t,l=a[2].label+"",n,i,s;return{c(){e=w("li"),t=w("a"),n=K(l),s=N(),this.h()},l(f){e=y(f,"LI",{class:!0});var o=C(e);t=y(o,"A",{href:!0,class:!0});var r=C(t);n=M(r,l),r.forEach(_),s=L(o),o.forEach(_),this.h()},h(){k(t,"href",i=a[2].url),k(t,"class","ons-list__link"),k(e,"class","ons-list__item svelte-1dyzlhu")},m(f,o){E(f,e,o),v(e,t),v(t,n),v(e,s)},p(f,o){o&2&&l!==(l=f[2].label+"")&&W(n,l),o&2&&i!==(i=f[2].url)&&k(t,"href",i)},d(f){f&&_(e)}}}function tl(a){let e;function t(i,s){return i[2].url?dn:_n}let l=t(a),n=l(a);return{c(){n.c(),e=R()},l(i){n.l(i),e=R()},m(i,s){n.m(i,s),E(i,e,s)},p(i,s){l===(l=t(i))&&n?n.p(i,s):(n.d(1),n=l(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){n.d(i),i&&_(e)}}}function mn(a){let e,t,l,n,i,s=a[1],f=[];for(let o=0;o<s.length;o+=1)f[o]=tl(ll(a,s,o));return{c(){e=w("nav"),t=w("h2"),l=K(a[0]),n=N(),i=w("ol");for(let o=0;o<f.length;o+=1)f[o].c();this.h()},l(o){e=y(o,"NAV",{class:!0,"aria-label":!0});var r=C(e);t=y(r,"H2",{class:!0});var c=C(t);l=M(c,a[0]),c.forEach(_),n=L(r),i=y(r,"OL",{class:!0});var h=C(i);for(let u=0;u<f.length;u+=1)f[u].l(h);h.forEach(_),r.forEach(_),this.h()},h(){k(t,"class","ons-toc__title ons-u-fs-r--b ons-u-mb-s svelte-1dyzlhu"),k(i,"class","ons-list ons-u-mb-m ons-list--dashed svelte-1dyzlhu"),k(e,"class","ons-toc svelte-1dyzlhu"),k(e,"aria-label","Pages in this guide")},m(o,r){E(o,e,r),v(e,t),v(t,l),v(e,n),v(e,i);for(let c=0;c<f.length;c+=1)f[c].m(i,null)},p(o,[r]){if(r&1&&W(l,o[0]),r&2){s=o[1];let c;for(c=0;c<s.length;c+=1){const h=ll(o,s,c);f[c]?f[c].p(h,r):(f[c]=tl(h),f[c].c(),f[c].m(i,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=s.length}},i:G,o:G,d(o){o&&_(e),le(f,o)}}}function gn(a,e,t){let{label:l="Contents"}=e,{links:n=[]}=e;return a.$$set=i=>{"label"in i&&t(0,l=i.label),"links"in i&&t(1,n=i.links)},[l,n]}class bn extends te{constructor(e){super();ne(this,e,gn,mn,ie,{label:0,links:1})}}function vn(a){let e,t,l,n,i,s,f,o,r;return{c(){e=w("div"),t=w("div"),l=w("dl"),n=w("div"),i=w("dt"),s=K(a[1]),f=K(":"),o=N(),r=w("dd"),this.h()},l(c){e=y(c,"DIV",{class:!0});var h=C(e);t=y(h,"DIV",{class:!0});var u=C(t);l=y(u,"DL",{class:!0});var d=C(l);n=y(d,"DIV",{class:!0});var m=C(n);i=y(m,"DT",{class:!0});var g=C(i);s=M(g,a[1]),f=M(g,":"),g.forEach(_),o=L(m),r=y(m,"DD",{class:!0});var D=C(r);D.forEach(_),m.forEach(_),d.forEach(_),u.forEach(_),h.forEach(_),this.h()},h(){k(i,"class","meta__term inline"),k(r,"class","inline"),k(n,"class","col padding-left--0 meta__item meta__item--no-border"),k(l,"class","col-wrap"),k(t,"class","wrapper"),k(e,"class","meta-wrap--thin"),re(e,"meta-wrap",a[0]=="grey")},m(c,h){E(c,e,h),v(e,t),v(t,l),v(l,n),v(n,i),v(i,s),v(i,f),v(n,o),v(n,r),r.innerHTML=a[2]},p(c,[h]){h&2&&W(s,c[1]),h&4&&(r.innerHTML=c[2]),h&1&&re(e,"meta-wrap",c[0]=="grey")},i:G,o:G,d(c){c&&_(e)}}}function kn(a,e,t){let{background:l="grey"}=e,{label:n="Last updated"}=e,{value:i="date"}=e;return a.$$set=s=>{"background"in s&&t(0,l=s.background),"label"in s&&t(1,n=s.label),"value"in s&&t(2,i=s.value)},[l,n,i]}class pn extends te{constructor(e){super();ne(this,e,kn,vn,ie,{background:0,label:1,value:2})}}const En=a=>({}),nl=a=>({});function il(a){let e,t;return e=new rn({props:{links:a[2],mode:a[0]}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n&4&&(i.links=l[2]),n&1&&(i.mode=l[0]),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function al(a){let e,t;return{c(){e=w("p"),t=K(a[6]),this.h()},l(l){e=y(l,"P",{class:!0});var n=C(e);t=M(n,a[6]),n.forEach(_),this.h()},h(){k(e,"class","page-neutral-intro__meta margin-top--0 margin-bottom--3")},m(l,n){E(l,e,n),v(e,t)},p(l,n){n&64&&W(t,l[6])},d(l){l&&_(e)}}}function sl(a){let e,t;return e=new bn({props:{links:a[3],label:"Contents"}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n&8&&(i.links=l[3]),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function ol(a){let e,t;return e=new hn({props:{links:a[4]}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n&16&&(i.links=l[4]),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function fl(a){let e,t;return e=new pn({props:{label:"Last updated",value:a[5],background:a[1]}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n&32&&(i.value=l[5]),n&2&&(i.background=l[1]),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function rl(a){let e,t,l,n;return{c(){e=w("div"),t=w("div"),l=w("div"),n=w("hr"),this.h()},l(i){e=y(i,"DIV",{class:!0});var s=C(e);t=y(s,"DIV",{class:!0});var f=C(t);l=y(f,"DIV",{class:!0});var o=C(l);n=y(o,"HR",{style:!0}),o.forEach(_),f.forEach(_),s.forEach(_),this.h()},h(){S(n,"border","0"),S(n,"height","0"),S(n,"border-top","1px solid #808080"),k(l,"class","col"),k(t,"class","col-wrap"),k(e,"class","wrapper")},m(i,s){E(i,e,s),v(e,t),v(t,l),v(l,n)},d(i){i&&_(e)}}}function wn(a){let e,t,l,n,i,s,f,o,r,c,h,u,d,m,g=a[2]&&il(a);const D=a[8].default,b=_e(D,a,a[7],null);let T=a[6]&&al(a),j=a[3]&&sl(a),z=a[4]&&ol(a);const B=a[8].meta,p=_e(B,a,a[7],nl);let F=a[5]&&fl(a),I=a[1]=="none"&&rl();return{c(){e=w("div"),t=w("div"),l=w("div"),n=w("div"),g&&g.c(),i=N(),s=w("div"),b&&b.c(),f=N(),T&&T.c(),o=N(),j&&j.c(),r=N(),z&&z.c(),c=N(),p&&p.c(),h=N(),F&&F.c(),u=N(),I&&I.c(),this.h()},l(V){e=y(V,"DIV",{class:!0});var H=C(e);t=y(H,"DIV",{class:!0});var se=C(t);l=y(se,"DIV",{class:!0});var U=C(l);n=y(U,"DIV",{class:!0});var $=C(n);g&&g.l($),i=L($),s=y($,"DIV",{class:!0});var ue=C(s);b&&b.l(ue),f=L(ue),T&&T.l(ue),o=L(ue),j&&j.l(ue),ue.forEach(_),r=L($),z&&z.l($),$.forEach(_),U.forEach(_),se.forEach(_),c=L(H),p&&p.l(H),h=L(H),F&&F.l(H),u=L(H),I&&I.l(H),H.forEach(_),this.h()},h(){k(s,"class","col col--md-47"),re(s,"col--lg-38",a[4]),re(s,"col--lg-48",!a[4]),k(n,"class","col"),k(l,"class","col-wrap"),k(t,"class","wrapper"),k(e,"class",d="page-neutral-intro "+(a[1]=="grey"?"background--gallery":""))},m(V,H){E(V,e,H),v(e,t),v(t,l),v(l,n),g&&g.m(n,null),v(n,i),v(n,s),b&&b.m(s,null),v(s,f),T&&T.m(s,null),v(s,o),j&&j.m(s,null),v(n,r),z&&z.m(n,null),v(e,c),p&&p.m(e,null),v(e,h),F&&F.m(e,null),v(e,u),I&&I.m(e,null),m=!0},p(V,[H]){V[2]?g?(g.p(V,H),H&4&&P(g,1)):(g=il(V),g.c(),P(g,1),g.m(n,i)):g&&(oe(),A(g,1,1,()=>{g=null}),fe()),b&&b.p&&(!m||H&128)&&de(b,D,V,V[7],m?ge(D,V[7],H,null):me(V[7]),null),V[6]?T?T.p(V,H):(T=al(V),T.c(),T.m(s,o)):T&&(T.d(1),T=null),V[3]?j?(j.p(V,H),H&8&&P(j,1)):(j=sl(V),j.c(),P(j,1),j.m(s,null)):j&&(oe(),A(j,1,1,()=>{j=null}),fe()),H&16&&re(s,"col--lg-38",V[4]),H&16&&re(s,"col--lg-48",!V[4]),V[4]?z?(z.p(V,H),H&16&&P(z,1)):(z=ol(V),z.c(),P(z,1),z.m(n,null)):z&&(oe(),A(z,1,1,()=>{z=null}),fe()),p&&p.p&&(!m||H&128)&&de(p,B,V,V[7],m?ge(B,V[7],H,En):me(V[7]),nl),V[5]?F?(F.p(V,H),H&32&&P(F,1)):(F=fl(V),F.c(),P(F,1),F.m(e,u)):F&&(oe(),A(F,1,1,()=>{F=null}),fe()),V[1]=="none"?I||(I=rl(),I.c(),I.m(e,null)):I&&(I.d(1),I=null),(!m||H&2&&d!==(d="page-neutral-intro "+(V[1]=="grey"?"background--gallery":"")))&&k(e,"class",d)},i(V){m||(P(g),P(b,V),P(j),P(z),P(p,V),P(F),m=!0)},o(V){A(g),A(b,V),A(j),A(z),A(p,V),A(F),m=!1},d(V){V&&_(e),g&&g.d(),b&&b.d(V),T&&T.d(),j&&j.d(),z&&z.d(),p&&p.d(V),F&&F.d(),I&&I.d()}}}function yn(a,e,t){let{$$slots:l={},$$scope:n}=e,{mode:i="neutral"}=e,{background:s="grey"}=e,{breadcrumb:f=null}=e,{contents:o=null}=e,{highlighted:r=null}=e,{updated:c=null}=e,{date:h=null}=e;return ye("mode",i),ye("background",s),a.$$set=u=>{"mode"in u&&t(0,i=u.mode),"background"in u&&t(1,s=u.background),"breadcrumb"in u&&t(2,f=u.breadcrumb),"contents"in u&&t(3,o=u.contents),"highlighted"in u&&t(4,r=u.highlighted),"updated"in u&&t(5,c=u.updated),"date"in u&&t(6,h=u.date),"$$scope"in u&&t(7,n=u.$$scope)},[i,s,f,o,r,c,h,n,l]}class Cn extends te{constructor(e){super();ne(this,e,yn,wn,ie,{mode:0,background:1,breadcrumb:2,contents:3,highlighted:4,updated:5,date:6})}}function Dn(a){let e,t,l;const n=a[2].default,i=_e(n,a,a[1],null);return{c(){e=w("h1"),i&&i.c(),this.h()},l(s){e=y(s,"H1",{class:!0});var f=C(e);i&&i.l(f),f.forEach(_),this.h()},h(){k(e,"class",t=a[0]=="neutral"?"page-neutral-intro__title":"page-intro__title")},m(s,f){E(s,e,f),i&&i.m(e,null),l=!0},p(s,[f]){i&&i.p&&(!l||f&2)&&de(i,n,s,s[1],l?ge(n,s[1],f,null):me(s[1]),null),(!l||f&1&&t!==(t=s[0]=="neutral"?"page-neutral-intro__title":"page-intro__title"))&&k(e,"class",t)},i(s){l||(P(i,s),l=!0)},o(s){A(i,s),l=!1},d(s){s&&_(e),i&&i.d(s)}}}function Sn(a,e,t){let{$$slots:l={},$$scope:n}=e,{mode:i=Se("mode")}=e;return a.$$set=s=>{"mode"in s&&t(0,i=s.mode),"$$scope"in s&&t(1,n=s.$$scope)},[i,n,l]}class In extends te{constructor(e){super();ne(this,e,Sn,Dn,ie,{mode:0})}}function zn(a){let e,t,l,n,i=`translateX(${a[3]/a[1]+(a[1]-a[4])}px)`,s,f=`${a[2]}px`,o=`${a[4]}px`;return{c(){e=w("div"),t=K(a[0]),l=N(),n=w("div"),this.h()},l(r){e=y(r,"DIV",{class:!0});var c=C(e);t=M(c,a[0]),l=L(c),n=y(c,"DIV",{class:!0}),C(n).forEach(_),c.forEach(_),this.h()},h(){k(n,"class","caret svelte-1491tb3"),S(n,"transform",i,!1),k(e,"class","tooltip svelte-1491tb3"),qe(()=>a[6].call(e)),S(e,"top",f,!1),S(e,"left",o,!1)},m(r,c){E(r,e,c),v(e,t),v(e,l),v(e,n),s=Fe(e,a[6].bind(e))},p(r,[c]){c&1&&W(t,r[0]),c&26&&i!==(i=`translateX(${r[3]/r[1]+(r[1]-r[4])}px)`)&&S(n,"transform",i,!1),c&4&&f!==(f=`${r[2]}px`)&&S(e,"top",f,!1),c&16&&o!==(o=`${r[4]}px`)&&S(e,"left",o,!1)},i:G,o:G,d(r){r&&_(e),s()}}}const Pe=4;function Tn(a,e,t){let l,{title:n}=e,{x:i}=e,{y:s}=e,{width:f}=e,o;function r(){o=this.clientWidth,t(3,o)}return a.$$set=c=>{"title"in c&&t(0,n=c.title),"x"in c&&t(1,i=c.x),"y"in c&&t(2,s=c.y),"width"in c&&t(5,f=c.width)},a.$$.update=()=>{a.$$.dirty&42&&t(4,l=o&&i+o/2>f-Pe?f-o/2-Pe:o&&i-o/2<0+Pe?o/2+Pe:i)},[n,i,s,o,l,f,r]}class Vn extends te{constructor(e){super();ne(this,e,Tn,zn,ie,{title:0,x:1,y:2,width:5})}}function Pn(a){let e,t;function l(i){e=a.getAttribute("title"),a.removeAttribute("title");let s=document.body.getBoundingClientRect(),f=a.getBoundingClientRect(),o=f.bottom,r=(f.left+f.right)/2;t=new Vn({props:{title:e,x:r,y:o-s.y,width:s.width},target:document.body})}function n(){t.$destroy(),a.setAttribute("title",e)}return a.addEventListener("mouseover",l),a.addEventListener("mouseout",n),{destroy(){t&&t.$destroy(),a.removeEventListener("mouseover",l),a.removeEventListener("mouseout",n)}}}function cl(a,e,t){const l=a.slice();return l[19]=e[t],l[21]=t,l}function ul(a,e,t){const l=a.slice();return l[22]=e[t],l[24]=t,l}function hl(a,e,t){const l=a.slice();return l[22]=e[t],l[24]=t,l}function _l(a,e,t){const l=a.slice();return l[26]=e[t],l[21]=t,l}function dl(a){let e,t=a[11],l=[];for(let n=0;n<t.length;n+=1)l[n]=ml(_l(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);E(n,e,i)},p(n,i){if(i&2064){t=n[11];let s;for(s=0;s<t.length;s+=1){const f=_l(n,t,s);l[s]?l[s].p(f,i):(l[s]=ml(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){le(l,n),n&&_(e)}}}function ml(a){let e,t,l=`${a[21]==0?0:a[4]}px`,n,i,s=a[26]+"",f,o,r;return{c(){e=w("li"),t=w("div"),n=N(),i=w("span"),f=K(s),r=N(),this.h()},l(c){e=y(c,"LI",{class:!0});var h=C(e);t=y(h,"DIV",{class:!0}),C(t).forEach(_),n=L(h),i=y(h,"SPAN",{class:!0});var u=C(i);f=M(u,s),u.forEach(_),r=L(h),h.forEach(_),this.h()},h(){k(t,"class","legend-vis "+(a[21]==0?"bar":"marker-vis")+" svelte-1hf4ghf"),S(t,"border-bottom-width",l,!1),k(i,"class",o=Ie(a[21]==0?"bold":"brackets")+" svelte-1hf4ghf"),k(e,"class","svelte-1hf4ghf")},m(c,h){E(c,e,h),v(e,t),v(e,n),v(e,i),v(i,f),v(e,r)},p(c,h){h&16&&l!==(l=`${c[21]==0?0:c[4]}px`)&&S(t,"border-bottom-width",l,!1),h&2048&&s!==(s=c[26]+"")&&W(f,s)},d(c){c&&_(e)}}}function Nn(a){let e,t=a[19].values,l=[];for(let n=0;n<t.length;n+=1)l[n]=gl(ul(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);E(n,e,i)},p(n,i){if(i&5650){t=n[19].values;let s;for(s=0;s<t.length;s+=1){const f=ul(n,t,s);l[s]?l[s].p(f,i):(l[s]=gl(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){le(l,n),n&&_(e)}}}function Ln(a){let e,t=a[19].values,l=[];for(let n=0;n<t.length;n+=1)l[n]=bl(hl(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);E(n,e,i)},p(n,i){if(i&5639){t=n[19].values;let s;for(s=0;s<t.length;s+=1){const f=hl(n,t,s);l[s]?l[s].p(f,i):(l[s]=bl(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){le(l,n),n&&_(e)}}}function gl(a){let e,t=`calc(${a[10](a[22][a[1]])}% - ${a[4]/2}px)`,l=`${a[24]/a[12].length*100}%`,n=`calc(${1/a[12].length*100}% - 2px)`,i=`${a[4]}px`;return{c(){e=w("div"),this.h()},l(s){e=y(s,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","marker svelte-1hf4ghf"),S(e,"bottom",t,!1),S(e,"height","0px",!1),S(e,"left",l,!1),S(e,"width",n,!1),S(e,"border-bottom-width",i,!1)},m(s,f){E(s,e,f)},p(s,f){f&1554&&t!==(t=`calc(${s[10](s[22][s[1]])}% - ${s[4]/2}px)`)&&S(e,"bottom",t,!1),f&4096&&l!==(l=`${s[24]/s[12].length*100}%`)&&S(e,"left",l,!1),f&4096&&n!==(n=`calc(${1/s[12].length*100}% - 2px)`)&&S(e,"width",n,!1),f&16&&i!==(i=`${s[4]}px`)&&S(e,"border-bottom-width",i,!1)},d(s){s&&_(e)}}}function bl(a){let e,t,l,n=`${a[10](a[22][a[1]])}%`,i=`calc(${a[24]/a[12].length*100}%)`,s=`calc(${1/a[12].length*100}% - 2px)`,f,o;return{c(){e=w("div"),this.h()},l(r){e=y(r,"DIV",{title:!0,class:!0}),C(e).forEach(_),this.h()},h(){k(e,"title",t=`${a[22][a[0]]}: ${a[2](a[22][a[1]])}%`+(a[9].length>1?` (${a[2](a[9][a[21]+1].values[a[24]][a[1]])}%)`:"")),k(e,"class","bar svelte-1hf4ghf"),S(e,"bottom","0",!1),S(e,"height",n,!1),S(e,"left",i,!1),S(e,"width",s,!1)},m(r,c){E(r,e,c),f||(o=Ft(l=Pn.call(null,e)),f=!0)},p(r,c){c&519&&t!==(t=`${r[22][r[0]]}: ${r[2](r[22][r[1]])}%`+(r[9].length>1?` (${r[2](r[9][r[21]+1].values[r[24]][r[1]])}%)`:""))&&k(e,"title",t),c&1538&&n!==(n=`${r[10](r[22][r[1]])}%`)&&S(e,"height",n,!1),c&4096&&i!==(i=`calc(${r[24]/r[12].length*100}%)`)&&S(e,"left",i,!1),c&4096&&s!==(s=`calc(${1/r[12].length*100}% - 2px)`)&&S(e,"width",s,!1)},d(r){r&&_(e),f=!1,o()}}}function vl(a){let e;function t(i,s){return i[21]==0?Ln:Nn}let n=t(a)(a);return{c(){n.c(),e=R()},l(i){n.l(i),e=R()},m(i,s){n.m(i,s),E(i,e,s)},p(i,s){n.p(i,s)},d(i){n.d(i),i&&_(e)}}}function kl(a){let e,t,l=a[6][0]!=0&&pl(a),n=a[6][1]!=18&&El(a);return{c(){l&&l.c(),e=N(),n&&n.c(),t=R()},l(i){l&&l.l(i),e=L(i),n&&n.l(i),t=R()},m(i,s){l&&l.m(i,s),E(i,e,s),n&&n.m(i,s),E(i,t,s)},p(i,s){i[6][0]!=0?l?l.p(i,s):(l=pl(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),i[6][1]!=18?n?n.p(i,s):(n=El(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(i){l&&l.d(i),i&&_(e),n&&n.d(i),i&&_(t)}}}function pl(a){let e,t=`${a[14](a[9])}%`;return{c(){e=w("div"),this.h()},l(l){e=y(l,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","mask svelte-1hf4ghf"),S(e,"bottom","0",!1),S(e,"height",t,!1),S(e,"left","0",!1),S(e,"width",a[13](a[6][0]),!1)},m(l,n){E(l,e,n)},p(l,n){n&512&&t!==(t=`${l[14](l[9])}%`)&&S(e,"height",t,!1),n&64&&S(e,"width",l[13](l[6][0]),!1)},d(l){l&&_(e)}}}function El(a){let e,t=`${a[14](a[9])}%`;return{c(){e=w("div"),this.h()},l(l){e=y(l,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","mask svelte-1hf4ghf"),S(e,"bottom","0",!1),S(e,"height",t,!1),S(e,"left",a[13](a[6][1]),!1),S(e,"right","2px",!1)},m(l,n){E(l,e,n)},p(l,n){n&512&&t!==(t=`${l[14](l[9])}%`)&&S(e,"height",t,!1),n&64&&S(e,"left",l[13](l[6][1]),!1)},d(l){l&&_(e)}}}function wl(a){let e,t,l;return{c(){e=w("small"),t=K(a[7]),l=K(a[8]),this.h()},l(n){e=y(n,"SMALL",{class:!0});var i=C(e);t=M(i,a[7]),l=M(i,a[8]),i.forEach(_),this.h()},h(){k(e,"class","svelte-1hf4ghf")},m(n,i){E(n,e,i),v(e,t),v(e,l)},p(n,i){i&128&&W(t,n[7]),i&256&&W(l,n[8])},d(n){n&&_(e)}}}function An(a){let e,t,l,n,i=`${a[3]}px`,s,f,o,r=a[5][0]+"",c,h,u,d=a[5][1]+"",m,g,D,b=a[11][1]&&dl(a),T=a[9],j=[];for(let p=0;p<T.length;p+=1)j[p]=vl(cl(a,T,p));let z=a[6]!=null&&kl(a),B=a[7]&&wl(a);return{c(){e=w("ul"),b&&b.c(),t=N(),l=w("div");for(let p=0;p<j.length;p+=1)j[p].c();n=N(),z&&z.c(),s=N(),f=w("div"),o=w("div"),c=K(r),h=N(),u=w("div"),m=K(d),g=N(),B&&B.c(),D=R(),this.h()},l(p){e=y(p,"UL",{class:!0});var F=C(e);b&&b.l(F),F.forEach(_),t=L(p),l=y(p,"DIV",{class:!0});var I=C(l);for(let U=0;U<j.length;U+=1)j[U].l(I);n=L(I),z&&z.l(I),I.forEach(_),s=L(p),f=y(p,"DIV",{class:!0});var V=C(f);o=y(V,"DIV",{class:!0});var H=C(o);c=M(H,r),H.forEach(_),h=L(V),u=y(V,"DIV",{class:!0});var se=C(u);m=M(se,d),se.forEach(_),V.forEach(_),g=L(p),B&&B.l(p),D=R(),this.h()},h(){k(e,"class","legend-block svelte-1hf4ghf"),k(l,"class","bar-group svelte-1hf4ghf"),S(l,"height",i,!1),k(o,"class","svelte-1hf4ghf"),S(o,"left","0",!1),k(u,"class","svelte-1hf4ghf"),S(u,"right","0",!1),k(f,"class","x-scale svelte-1hf4ghf"),S(f,"height","1rem",!1)},m(p,F){E(p,e,F),b&&b.m(e,null),E(p,t,F),E(p,l,F);for(let I=0;I<j.length;I+=1)j[I].m(l,null);v(l,n),z&&z.m(l,null),E(p,s,F),E(p,f,F),v(f,o),v(o,c),v(f,h),v(f,u),v(u,m),E(p,g,F),B&&B.m(p,F),E(p,D,F)},p(p,[F]){if(p[11][1]?b?b.p(p,F):(b=dl(p),b.c(),b.m(e,null)):b&&(b.d(1),b=null),F&5655){T=p[9];let I;for(I=0;I<T.length;I+=1){const V=cl(p,T,I);j[I]?j[I].p(V,F):(j[I]=vl(V),j[I].c(),j[I].m(l,n))}for(;I<j.length;I+=1)j[I].d(1);j.length=T.length}p[6]!=null?z?z.p(p,F):(z=kl(p),z.c(),z.m(l,null)):z&&(z.d(1),z=null),F&8&&i!==(i=`${p[3]}px`)&&S(l,"height",i,!1),F&32&&r!==(r=p[5][0]+"")&&W(c,r),F&32&&d!==(d=p[5][1]+"")&&W(m,d),p[7]?B?B.p(p,F):(B=wl(p),B.c(),B.m(D.parentNode,D)):B&&(B.d(1),B=null)},i:G,o:G,d(p){p&&_(e),b&&b.d(),p&&_(t),p&&_(l),le(j,p),z&&z.d(),p&&_(s),p&&_(f),p&&_(g),B&&B.d(p),p&&_(D)}}}function Kn(a,e,t){let l,n,i,s,f,{data:o}=e,{xKey:r="category"}=e,{yKey:c="value"}=e,{zKey:h="areanm"}=e,{formatTick:u=p=>p.toFixed(1)}=e,{height:d=100}=e,{markerWidth:m=2.5}=e,{minmax:g=["0 years","85+"]}=e,{maskRange:D=null}=e,{base:b=null}=e,{base_ext:T=", 5 year age bands"}=e;function j(p,F){let I={};for(const H of p)I[H[F]]||(I[H[F]]={label:H[F],values:[]}),I[H[F]].values.push(H);let V=[];for(const H in I)V.push(I[H]);return V}function z(p){return p%1===0?`calc(${p/l.length*100}% - 1px)`:`calc(${Math.floor(p)/l.length*100}% +(${1/l.length*100}% - 2px) * ${p%1})`}function B(p){return Math.max(...p.map(F=>Math.max(...F.values.map(I=>s(I[c])))))}return a.$$set=p=>{"data"in p&&t(15,o=p.data),"xKey"in p&&t(0,r=p.xKey),"yKey"in p&&t(1,c=p.yKey),"zKey"in p&&t(16,h=p.zKey),"formatTick"in p&&t(2,u=p.formatTick),"height"in p&&t(3,d=p.height),"markerWidth"in p&&t(4,m=p.markerWidth),"minmax"in p&&t(5,g=p.minmax),"maskRange"in p&&t(6,D=p.maskRange),"base"in p&&t(7,b=p.base),"base_ext"in p&&t(8,T=p.base_ext)},a.$$.update=()=>{a.$$.dirty&32769&&t(12,l=o.map(p=>p[r]).filter((p,F,I)=>I.indexOf(p)===F)),a.$$.dirty&32770&&t(17,n=[0,Math.max(...o.map(p=>p[c]))]),a.$$.dirty&98304&&t(11,i=o.map(p=>p[h]).filter((p,F,I)=>I.indexOf(p)===F)),a.$$.dirty&131072&&t(10,s=p=>Math.abs(p/n[1])*100),a.$$.dirty&98304&&t(9,f=j(o,h))},[r,c,u,d,m,g,D,b,T,f,s,i,l,z,B,o,h,n]}class Mn extends te{constructor(e){super();ne(this,e,Kn,An,ie,{data:15,xKey:0,yKey:1,zKey:16,formatTick:2,height:3,markerWidth:4,minmax:5,maskRange:6,base:7,base_ext:8})}}function yl(a,e,t){const l=a.slice();return l[10]=e[t],l[12]=t,l}function Cl(a){let e,t,l,n,i,s=a[6](a[4][a[12]])+"",f;return{c(){e=w("div"),t=N(),l=w("div"),n=N(),i=w("div"),f=K(s),this.h()},l(o){e=y(o,"DIV",{class:!0,style:!0}),C(e).forEach(_),t=L(o),l=y(o,"DIV",{class:!0,style:!0}),C(l).forEach(_),n=L(o),i=y(o,"DIV",{class:!0,style:!0});var r=C(i);f=M(r,s),r.forEach(_),this.h()},h(){k(e,"class","block svelte-j1hxpu"),S(e,"width",100/(a[4].length-1)+"%"),S(e,"left",a[12]*(100/(a[4].length-1))+"%"),S(e,"background-color",a[5][a[12]]),k(l,"class","line svelte-j1hxpu"),S(l,"left",a[12]*(100/(a[4].length-1))+"%"),k(i,"class","tick svelte-j1hxpu"),S(i,"left",a[12]*(100/(a[4].length-1))+"%"),re(i,"tick-start",a[12]==0)},m(o,r){E(o,e,r),E(o,t,r),E(o,l,r),E(o,n,r),E(o,i,r),v(i,f)},p(o,r){r&16&&S(e,"width",100/(o[4].length-1)+"%"),r&16&&S(e,"left",o[12]*(100/(o[4].length-1))+"%"),r&32&&S(e,"background-color",o[5][o[12]]),r&16&&S(l,"left",o[12]*(100/(o[4].length-1))+"%"),r&80&&s!==(s=o[6](o[4][o[12]])+"")&&W(f,s),r&16&&S(i,"left",o[12]*(100/(o[4].length-1))+"%")},d(o){o&&_(e),o&&_(t),o&&_(l),o&&_(n),o&&_(i)}}}function Dl(a){let e,t,l,n=a[7](a[1])+"",i,s;return{c(){e=w("div"),t=N(),l=w("div"),i=K(n),s=K(a[8]),this.h()},l(f){e=y(f,"DIV",{class:!0,style:!0}),C(e).forEach(_),t=L(f),l=y(f,"DIV",{class:!0,style:!0});var o=C(l);i=M(o,n),s=M(o,a[8]),o.forEach(_),this.h()},h(){k(e,"class","marker svelte-j1hxpu"),S(e,"width",a[2]+"px"),S(e,"left","calc("+a[9](a[1],a[4])+"% - "+a[2]/2+"px)"),k(l,"class","value svelte-j1hxpu"),S(l,"left",a[9](a[1],a[4])+"%")},m(f,o){E(f,e,o),E(f,t,o),E(f,l,o),v(l,i),v(l,s)},p(f,o){o&4&&S(e,"width",f[2]+"px"),o&22&&S(e,"left","calc("+f[9](f[1],f[4])+"% - "+f[2]/2+"px)"),o&130&&n!==(n=f[7](f[1])+"")&&W(i,n),o&256&&W(s,f[8]),o&18&&S(l,"left",f[9](f[1],f[4])+"%")},d(f){f&&_(e),f&&_(t),f&&_(l)}}}function Sl(a){let e,t,l,n=a[7](a[0])+"",i,s;return{c(){e=w("div"),t=N(),l=w("div"),i=K(n),s=K(a[8]),this.h()},l(f){e=y(f,"DIV",{class:!0,style:!0}),C(e).forEach(_),t=L(f),l=y(f,"DIV",{class:!0,style:!0});var o=C(l);i=M(o,n),s=M(o,a[8]),o.forEach(_),this.h()},h(){k(e,"class","marker marker-hovered svelte-j1hxpu"),S(e,"width",a[2]+"px"),S(e,"left","calc("+a[9](a[0],a[4])+"% - "+a[2]/2+"px)"),k(l,"class","value svelte-j1hxpu"),S(l,"left",a[9](a[0],a[4])+"%")},m(f,o){E(f,e,o),E(f,t,o),E(f,l,o),v(l,i),v(l,s)},p(f,o){o&4&&S(e,"width",f[2]+"px"),o&21&&S(e,"left","calc("+f[9](f[0],f[4])+"% - "+f[2]/2+"px)"),o&129&&n!==(n=f[7](f[0])+"")&&W(i,n),o&256&&W(s,f[8]),o&17&&S(l,"left",f[9](f[0],f[4])+"%")},d(f){f&&_(e),f&&_(t),f&&_(l)}}}function jn(a){let e,t,l,n,i,s=a[6](a[4][a[4].length-1])+"",f,o,r,c,h=a[4].slice(1),u=[];for(let g=0;g<h.length;g+=1)u[g]=Cl(yl(a,h,g));let d=a[1]&&Dl(a),m=a[0]&&Sl(a);return{c(){e=w("div");for(let g=0;g<u.length;g+=1)u[g].c();t=N(),l=w("div"),n=N(),i=w("div"),f=K(s),o=K(a[8]),r=N(),d&&d.c(),c=N(),m&&m.c(),this.h()},l(g){e=y(g,"DIV",{class:!0,style:!0});var D=C(e);for(let T=0;T<u.length;T+=1)u[T].l(D);t=L(D),l=y(D,"DIV",{class:!0,style:!0}),C(l).forEach(_),n=L(D),i=y(D,"DIV",{class:!0,style:!0});var b=C(i);f=M(b,s),o=M(b,a[8]),b.forEach(_),r=L(D),d&&d.l(D),c=L(D),m&&m.l(D),D.forEach(_),this.h()},h(){k(l,"class","line svelte-j1hxpu"),S(l,"left","100%"),k(i,"class","tick tick-end svelte-j1hxpu"),S(i,"left","100%"),k(e,"class","container svelte-j1hxpu"),S(e,"height",a[3]+"px")},m(g,D){E(g,e,D);for(let b=0;b<u.length;b+=1)u[b].m(e,null);v(e,t),v(e,l),v(e,n),v(e,i),v(i,f),v(i,o),v(e,r),d&&d.m(e,null),v(e,c),m&&m.m(e,null)},p(g,[D]){if(D&112){h=g[4].slice(1);let b;for(b=0;b<h.length;b+=1){const T=yl(g,h,b);u[b]?u[b].p(T,D):(u[b]=Cl(T),u[b].c(),u[b].m(e,t))}for(;b<u.length;b+=1)u[b].d(1);u.length=h.length}D&80&&s!==(s=g[6](g[4][g[4].length-1])+"")&&W(f,s),D&256&&W(o,g[8]),g[1]?d?d.p(g,D):(d=Dl(g),d.c(),d.m(e,c)):d&&(d.d(1),d=null),g[0]?m?m.p(g,D):(m=Sl(g),m.c(),m.m(e,null)):m&&(m.d(1),m=null),D&8&&S(e,"height",g[3]+"px")},i:G,o:G,d(g){g&&_(e),le(u,g),d&&d.d(),m&&m.d()}}}function Bn(a,e,t){let{hovered:l=null}=e,{selected:n=null}=e,{lineWidth:i=3}=e,{height:s=15}=e,{breaks:f=[0,20,40,60,80,100]}=e,{colors:o=["rgba(234,236,177,.8)","rgba(169,216,145,.8)","rgba(0,167,186,.8)","rgba(0,78,166,.8)","rgba(0,13,84,.8)"]}=e,{formatTick:r=d=>d.toFixed(1)}=e,{formatVal:c=d=>d.toFixed(1)}=e,{suffix:h="%"}=e;const u=(d,m)=>{let g=0;for(;d>m[g+1];)g+=1;let D=100/(m.length-1),b=(d-m[g])/(m[g+1]-m[g]);return(g+b)*D};return a.$$set=d=>{"hovered"in d&&t(0,l=d.hovered),"selected"in d&&t(1,n=d.selected),"lineWidth"in d&&t(2,i=d.lineWidth),"height"in d&&t(3,s=d.height),"breaks"in d&&t(4,f=d.breaks),"colors"in d&&t(5,o=d.colors),"formatTick"in d&&t(6,r=d.formatTick),"formatVal"in d&&t(7,c=d.formatVal),"suffix"in d&&t(8,h=d.suffix)},[l,n,i,s,f,o,r,c,h,u]}class qn extends te{constructor(e){super();ne(this,e,Bn,jn,ie,{hovered:0,selected:1,lineWidth:2,height:3,breaks:4,colors:5,formatTick:6,formatVal:7,suffix:8})}}function Il(a,e,t){const l=a.slice();return l[14]=e[t],l}function zl(a,e,t){const l=a.slice();return l[17]=e[t],l[19]=t,l}function Tl(a,e,t){const l=a.slice();return l[17]=e[t],l[19]=t,l}function Vl(a,e,t){const l=a.slice();return l[14]=e[t],l[19]=t,l}function Pl(a){let e,t=a[8],l=[];for(let n=0;n<t.length;n+=1)l[n]=Nl(Vl(a,t,n));return{c(){e=w("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"UL",{class:!0});var i=C(e);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(_),this.h()},h(){k(e,"class","legend-block svelte-1sx4bpf")},m(n,i){E(n,e,i);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,i){if(i&288){t=n[8];let s;for(s=0;s<t.length;s+=1){const f=Vl(n,t,s);l[s]?l[s].p(f,i):(l[s]=Nl(f),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&_(e),le(l,n)}}}function Nl(a){let e,t,l,n,i=a[14]+"",s,f,o;return{c(){e=w("li"),t=w("div"),l=N(),n=w("span"),s=K(i),o=N(),this.h()},l(r){e=y(r,"LI",{class:!0});var c=C(e);t=y(c,"DIV",{class:!0}),C(t).forEach(_),l=L(c),n=y(c,"SPAN",{class:!0});var h=C(n);s=M(h,i),h.forEach(_),o=L(c),c.forEach(_),this.h()},h(){k(t,"class","legend-vis "+(a[19]==0?"bar":"marker")+" svelte-1sx4bpf"),S(t,"height","1rem",!1),S(t,"width",a[19]==0?"1rem":a[5]+"px",!1),k(n,"class",f=Ie(a[19]==0?"bold":"brackets")+" svelte-1sx4bpf"),k(e,"class","svelte-1sx4bpf"),re(e,"ew",a[19]!=0)},m(r,c){E(r,e,c),v(e,t),v(e,l),v(e,n),v(n,s),v(e,o)},p(r,c){c&32&&S(t,"width",r[19]==0?"1rem":r[5]+"px",!1),c&256&&i!==(i=r[14]+"")&&W(s,i)},d(r){r&&_(e)}}}function Ll(a){let e,t=a[1](a[17][a[0]])+"",l,n,i;return{c(){e=w("span"),l=K(t),n=K(a[2]),this.h()},l(s){e=y(s,"SPAN",{class:!0});var f=C(e);l=M(f,t),n=M(f,a[2]),f.forEach(_),this.h()},h(){k(e,"class",i="label "+(a[19]==0?"bold":"sml brackets")+" svelte-1sx4bpf")},m(s,f){E(s,e,f),v(e,l),v(e,n)},p(s,f){f&67&&t!==(t=s[1](s[17][s[0]])+"")&&W(l,t),f&4&&W(n,s[2])},d(s){s&&_(e)}}}function Fn(a){let e,t=`calc(${a[7](a[17][a[0]])}% - ${a[5]/2}px)`,l=`${a[5]}px`;return{c(){e=w("div"),this.h()},l(n){e=y(n,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","marker svelte-1sx4bpf"),S(e,"left",t,!1),S(e,"border-left-width",l,!1)},m(n,i){E(n,e,i)},p(n,i){i&225&&t!==(t=`calc(${n[7](n[17][n[0]])}% - ${n[5]/2}px)`)&&S(e,"left",t,!1),i&32&&l!==(l=`${n[5]}px`)&&S(e,"border-left-width",l,!1)},d(n){n&&_(e)}}}function On(a){let e,t=`${a[7](a[17][a[0]])}%`;return{c(){e=w("div"),this.h()},l(l){e=y(l,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){k(e,"class","bar svelte-1sx4bpf"),S(e,"left","0",!1),S(e,"width",t,!1)},m(l,n){E(l,e,n)},p(l,n){n&193&&t!==(t=`${l[7](l[17][l[0]])}%`)&&S(e,"width",t,!1)},d(l){l&&_(e)}}}function Al(a){let e;function t(i,s){return i[19]==0?On:Fn}let n=t(a)(a);return{c(){n.c(),e=R()},l(i){n.l(i),e=R()},m(i,s){n.m(i,s),E(i,e,s)},p(i,s){n.p(i,s)},d(i){n.d(i),i&&_(e)}}}function Kl(a){let e,t=a[14].label+"",l,n,i,s,f,o=`${a[4]}px`,r=a[14].values,c=[];for(let d=0;d<r.length;d+=1)c[d]=Ll(Tl(a,r,d));let h=a[14].values,u=[];for(let d=0;d<h.length;d+=1)u[d]=Al(zl(a,h,d));return{c(){e=w("div"),l=K(t),n=N(),i=w("span");for(let d=0;d<c.length;d+=1)c[d].c();s=N(),f=w("div");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=y(d,"DIV",{class:!0});var m=C(e);l=M(m,t),n=L(m),i=y(m,"SPAN",{class:!0});var g=C(i);for(let b=0;b<c.length;b+=1)c[b].l(g);g.forEach(_),m.forEach(_),s=L(d),f=y(d,"DIV",{class:!0});var D=C(f);for(let b=0;b<u.length;b+=1)u[b].l(D);D.forEach(_),this.h()},h(){k(i,"class","nowrap svelte-1sx4bpf"),k(e,"class","label-group svelte-1sx4bpf"),k(f,"class","bar-group svelte-1sx4bpf"),S(f,"height",o,!1)},m(d,m){E(d,e,m),v(e,l),v(e,n),v(e,i);for(let g=0;g<c.length;g+=1)c[g].m(i,null);E(d,s,m),E(d,f,m);for(let g=0;g<u.length;g+=1)u[g].m(f,null)},p(d,m){if(m&64&&t!==(t=d[14].label+"")&&W(l,t),m&71){r=d[14].values;let g;for(g=0;g<r.length;g+=1){const D=Tl(d,r,g);c[g]?c[g].p(D,m):(c[g]=Ll(D),c[g].c(),c[g].m(i,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=r.length}if(m&225){h=d[14].values;let g;for(g=0;g<h.length;g+=1){const D=zl(d,h,g);u[g]?u[g].p(D,m):(u[g]=Al(D),u[g].c(),u[g].m(f,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=h.length}m&16&&o!==(o=`${d[4]}px`)&&S(f,"height",o,!1)},d(d){d&&_(e),le(c,d),d&&_(s),d&&_(f),le(u,d)}}}function Ml(a){let e,t;return{c(){e=w("small"),t=K(a[3]),this.h()},l(l){e=y(l,"SMALL",{class:!0});var n=C(e);t=M(n,a[3]),n.forEach(_),this.h()},h(){k(e,"class","svelte-1sx4bpf")},m(l,n){E(l,e,n),v(e,t)},p(l,n){n&8&&W(t,l[3])},d(l){l&&_(e)}}}function Hn(a){let e,t,l,n=a[8][1]&&Pl(a),i=a[6],s=[];for(let o=0;o<i.length;o+=1)s[o]=Kl(Il(a,i,o));let f=a[3]&&Ml(a);return{c(){n&&n.c(),e=N();for(let o=0;o<s.length;o+=1)s[o].c();t=N(),f&&f.c(),l=R()},l(o){n&&n.l(o),e=L(o);for(let r=0;r<s.length;r+=1)s[r].l(o);t=L(o),f&&f.l(o),l=R()},m(o,r){n&&n.m(o,r),E(o,e,r);for(let c=0;c<s.length;c+=1)s[c].m(o,r);E(o,t,r),f&&f.m(o,r),E(o,l,r)},p(o,[r]){if(o[8][1]?n?n.p(o,r):(n=Pl(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),r&247){i=o[6];let c;for(c=0;c<i.length;c+=1){const h=Il(o,i,c);s[c]?s[c].p(h,r):(s[c]=Kl(h),s[c].c(),s[c].m(t.parentNode,t))}for(;c<s.length;c+=1)s[c].d(1);s.length=i.length}o[3]?f?f.p(o,r):(f=Ml(o),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null)},i:G,o:G,d(o){n&&n.d(o),o&&_(e),le(s,o),o&&_(t),f&&f.d(o),o&&_(l)}}}function Rn(a,e,t){let l,n,i,s,{data:f}=e,{xKey:o="value"}=e,{yKey:r="category"}=e,{zKey:c="areanm"}=e,{formatTick:h=b=>b.toFixed(1)}=e,{suffix:u="%"}=e,{base:d=null}=e,{barHeight:m=25}=e,{markerWidth:g=3}=e;function D(b,T){let j={},z=[];for(const p of b)j[p[T]]||(j[p[T]]={label:p[T],values:[]},z.push(p[T])),j[p[T]].values.push(p);let B=[];return z.forEach(p=>{B.push(j[p])}),B}return a.$$set=b=>{"data"in b&&t(9,f=b.data),"xKey"in b&&t(0,o=b.xKey),"yKey"in b&&t(10,r=b.yKey),"zKey"in b&&t(11,c=b.zKey),"formatTick"in b&&t(1,h=b.formatTick),"suffix"in b&&t(2,u=b.suffix),"base"in b&&t(3,d=b.base),"barHeight"in b&&t(4,m=b.barHeight),"markerWidth"in b&&t(5,g=b.markerWidth)},a.$$.update=()=>{a.$$.dirty&513&&t(12,l=Math.max(...f.map(b=>b[o]))),a.$$.dirty&2560&&t(8,n=f.map(b=>b[c]).filter((b,T,j)=>j.indexOf(b)===T)),a.$$.dirty&4096&&t(7,i=b=>b/l*100),a.$$.dirty&1536&&t(6,s=D(f,r))},[o,h,u,d,m,g,s,i,n,f,r,c,l]}class Pt extends te{constructor(e){super();ne(this,e,Rn,Hn,ie,{data:9,xKey:0,yKey:10,zKey:11,formatTick:1,suffix:2,base:3,barHeight:4,markerWidth:5})}}function jl(a,e,t){const l=a.slice();return l[15]=e[t],l}function Bl(a,e,t){const l=a.slice();return l[18]=e[t],l[19]=e,l[20]=t,l}function ql(a,e,t){const l=a.slice();return l[15]=e[t],l[20]=t,l}function Fl(a){let e,t=a[7],l=[];for(let n=0;n<t.length;n+=1)l[n]=Ol(ql(a,t,n));return{c(){e=w("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"UL",{class:!0});var i=C(e);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(_),this.h()},h(){k(e,"class","legend-block svelte-7hzvwr")},m(n,i){E(n,e,i);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,i){if(i&128){t=n[7];let s;for(s=0;s<t.length;s+=1){const f=ql(n,t,s);l[s]?l[s].p(f,i):(l[s]=Ol(f),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&_(e),le(l,n)}}}function Ol(a){let e,t,l,n,i=a[15]+"",s,f;return{c(){e=w("li"),t=w("div"),l=N(),n=w("span"),s=K(i),f=N(),this.h()},l(o){e=y(o,"LI",{class:!0});var r=C(e);t=y(r,"DIV",{class:!0}),C(t).forEach(_),l=L(r),n=y(r,"SPAN",{class:!0});var c=C(n);s=M(c,i),c.forEach(_),f=L(r),r.forEach(_),this.h()},h(){k(t,"class","legend-vis "+(a[20]==0?"bar":"bar2")+" svelte-7hzvwr"),k(n,"class","svelte-7hzvwr"),re(n,"bold",a[20]==0),k(e,"class","svelte-7hzvwr")},m(o,r){E(o,e,r),v(e,t),v(e,l),v(e,n),v(n,s),v(e,f)},p(o,r){r&128&&i!==(i=o[15]+"")&&W(s,i)},d(o){o&&_(e)}}}function Hl(a){let e,t=`${a[6](a[18][a[0]])}%`,l,n,i=a[1](a[18][a[0]])+"",s,f,o,r=`calc(${a[6](a[18][a[0]])}% + 2px)`;function c(){a[12].call(n,a[19],a[20])}return{c(){e=w("div"),l=N(),n=w("div"),s=K(i),f=K(a[2]),this.h()},l(h){e=y(h,"DIV",{class:!0}),C(e).forEach(_),l=L(h),n=y(h,"DIV",{class:!0});var u=C(n);s=M(u,i),f=M(u,a[2]),u.forEach(_),this.h()},h(){k(e,"class",Ie(a[20]==0?"bar":"bar2")+" svelte-7hzvwr"),S(e,"left","0",!1),S(e,"width",t,!1),S(e,"top",a[20]==0?"0":"50%",!1),S(e,"height",a[7][1]?"50%":"100%",!1),k(n,"class","label svelte-7hzvwr"),qe(()=>c.call(n)),re(n,"bold",a[20]==0),S(n,"left",r,!1),S(n,"top",a[20]==0?"0":"50%",!1),S(n,"height","50%",!1)},m(h,u){E(h,e,u),E(h,l,u),E(h,n,u),v(n,s),v(n,f),o=Fe(n,c.bind(n))},p(h,u){a=h,u&97&&t!==(t=`${a[6](a[18][a[0]])}%`)&&S(e,"width",t,!1),u&128&&S(e,"height",a[7][1]?"50%":"100%",!1),u&35&&i!==(i=a[1](a[18][a[0]])+"")&&W(s,i),u&4&&W(f,a[2]),u&97&&r!==(r=`calc(${a[6](a[18][a[0]])}% + 2px)`)&&S(n,"left",r,!1)},d(h){h&&_(e),h&&_(l),h&&_(n),o()}}}function Rl(a){let e,t=a[15].label+"",l,n,i,s,f=`${a[7][1]?a[3]*2:a[3]}px`,o=`calc(100% - ${a[4]}px)`,r=a[15].values,c=[];for(let h=0;h<r.length;h+=1)c[h]=Hl(Bl(a,r,h));return{c(){e=w("div"),l=K(t),n=N(),i=w("div");for(let h=0;h<c.length;h+=1)c[h].c();s=N(),this.h()},l(h){e=y(h,"DIV",{class:!0});var u=C(e);l=M(u,t),u.forEach(_),n=L(h),i=y(h,"DIV",{class:!0});var d=C(i);for(let m=0;m<c.length;m+=1)c[m].l(d);s=L(d),d.forEach(_),this.h()},h(){k(e,"class","label-group svelte-7hzvwr"),k(i,"class","bar-group svelte-7hzvwr"),S(i,"height",f,!1),S(i,"width",o,!1)},m(h,u){E(h,e,u),v(e,l),E(h,n,u),E(h,i,u);for(let d=0;d<c.length;d+=1)c[d].m(i,null);v(i,s)},p(h,u){if(u&32&&t!==(t=h[15].label+"")&&W(l,t),u&231){r=h[15].values;let d;for(d=0;d<r.length;d+=1){const m=Bl(h,r,d);c[d]?c[d].p(m,u):(c[d]=Hl(m),c[d].c(),c[d].m(i,s))}for(;d<c.length;d+=1)c[d].d(1);c.length=r.length}u&136&&f!==(f=`${h[7][1]?h[3]*2:h[3]}px`)&&S(i,"height",f,!1),u&16&&o!==(o=`calc(100% - ${h[4]}px)`)&&S(i,"width",o,!1)},d(h){h&&_(e),h&&_(n),h&&_(i),le(c,h)}}}function Wn(a){let e,t,l=a[7][1]&&Fl(a),n=a[5],i=[];for(let s=0;s<n.length;s+=1)i[s]=Rl(jl(a,n,s));return{c(){l&&l.c(),e=N();for(let s=0;s<i.length;s+=1)i[s].c();t=R()},l(s){l&&l.l(s),e=L(s);for(let f=0;f<i.length;f+=1)i[f].l(s);t=R()},m(s,f){l&&l.m(s,f),E(s,e,f);for(let o=0;o<i.length;o+=1)i[o].m(s,f);E(s,t,f)},p(s,[f]){if(s[7][1]?l?l.p(s,f):(l=Fl(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),f&255){n=s[5];let o;for(o=0;o<n.length;o+=1){const r=jl(s,n,o);i[o]?i[o].p(r,f):(i[o]=Rl(r),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:G,o:G,d(s){l&&l.d(s),s&&_(e),le(i,s),s&&_(t)}}}function Un(a,e,t){let l,n,i,s,{data:f}=e,{xKey:o="value"}=e,{yKey:r="category"}=e,{zKey:c="group"}=e,{formatTick:h=b=>Math.round(b)}=e,{suffix:u="%"}=e,{barHeight:d=20}=e,{margin:m=30}=e;function g(b,T){let j={};for(const B of b)j[B[T]]||(j[B[T]]={label:B[T],values:[]}),j[B[T]].values.push(B);let z=[];for(const B in j)z.push(j[B]);return z}function D(b,T){b[T].width=this.clientWidth,t(5,s),t(8,f),t(9,r)}return a.$$set=b=>{"data"in b&&t(8,f=b.data),"xKey"in b&&t(0,o=b.xKey),"yKey"in b&&t(9,r=b.yKey),"zKey"in b&&t(10,c=b.zKey),"formatTick"in b&&t(1,h=b.formatTick),"suffix"in b&&t(2,u=b.suffix),"barHeight"in b&&t(3,d=b.barHeight),"margin"in b&&t(4,m=b.margin)},a.$$.update=()=>{a.$$.dirty&257&&t(11,l=[0,Math.max(...f.map(b=>b[o]))]),a.$$.dirty&768&&f.map(b=>b[r]).filter((b,T,j)=>j.indexOf(b)===T),a.$$.dirty&1280&&t(7,n=f.map(b=>b[c]).filter((b,T,j)=>j.indexOf(b)===T)),a.$$.dirty&2048&&t(6,i=b=>b/l[1]*100),a.$$.dirty&768&&t(5,s=g(f,r))},[o,h,u,d,m,s,i,n,f,r,c,l,D]}class Gn extends te{constructor(e){super();ne(this,e,Un,Wn,ie,{data:8,xKey:0,yKey:9,zKey:10,formatTick:1,suffix:2,barHeight:3,margin:4})}}function Wl(a,e,t){const l=a.slice();return l[2]=e[t],l[4]=t,l}function Ul(a){let e,t,l,n=a[2].name+"",i,s,f,o=a[2].value.toFixed(1)+"",r,c,h;return{c(){e=w("tr"),t=w("td"),l=w("strong"),i=K(n),s=N(),f=w("td"),r=K(o),c=K("%"),h=N(),this.h()},l(u){e=y(u,"TR",{});var d=C(e);t=y(d,"TD",{});var m=C(t);l=y(m,"STRONG",{});var g=C(l);i=M(g,n),g.forEach(_),m.forEach(_),s=L(d),f=y(d,"TD",{class:!0});var D=C(f);r=M(D,o),c=M(D,"%"),D.forEach(_),h=L(d),d.forEach(_),this.h()},h(){k(f,"class","text-right svelte-vtsuxa")},m(u,d){E(u,e,d),v(e,t),v(t,l),v(l,i),v(e,s),v(e,f),v(f,r),v(f,c),v(e,h)},p(u,d){d&1&&n!==(n=u[2].name+"")&&W(i,n),d&1&&o!==(o=u[2].value.toFixed(1)+"")&&W(r,o)},d(u){u&&_(e)}}}function Zn(a){let e,t,l=a[0],n=[];for(let i=0;i<l.length;i+=1)n[i]=Ul(Wl(a,l,i));return{c(){e=w("table"),t=w("tbody");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=y(i,"TABLE",{class:!0});var s=C(e);t=y(s,"TBODY",{});var f=C(t);for(let o=0;o<n.length;o+=1)n[o].l(f);f.forEach(_),s.forEach(_),this.h()},h(){k(e,"class","table-rank text-small svelte-vtsuxa")},m(i,s){E(i,e,s),v(e,t);for(let f=0;f<n.length;f+=1)n[f].m(t,null)},p(i,[s]){if(s&1){l=i[0];let f;for(f=0;f<l.length;f+=1){const o=Wl(i,l,f);n[f]?n[f].p(o,s):(n[f]=Ul(o),n[f].c(),n[f].m(t,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=l.length}},i:G,o:G,d(i){i&&_(e),le(n,i)}}}function Xn(a,e,t){let{data:l}=e,{offset:n=1}=e;return a.$$set=i=>{"data"in i&&t(0,l=i.data),"offset"in i&&t(1,n=i.offset)},[l,n]}class Nt extends te{constructor(e){super();ne(this,e,Xn,Zn,ie,{data:0,offset:1})}}function Gl(a){let e;const t=a[14].default,l=_e(t,a,a[13],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,i){l&&l.m(n,i),e=!0},p(n,i){l&&l.p&&(!e||i&8192)&&de(l,t,n,n[13],e?ge(t,n[13],i,null):me(n[13]),null)},i(n){e||(P(l,n),e=!0)},o(n){A(l,n),e=!1},d(n){l&&l.d(n)}}}function Jn(a){let e,t,l=a[0]&&Gl(a);return{c(){e=w("div"),l&&l.c(),this.h()},l(n){e=y(n,"DIV",{id:!0,class:!0});var i=C(e);l&&l.l(i),i.forEach(_),this.h()},h(){k(e,"id",a[1]),k(e,"class","svelte-a65d1y")},m(n,i){E(n,e,i),l&&l.m(e,null),a[15](e),t=!0},p(n,[i]){n[0]?l?(l.p(n,i),i&1&&P(l,1)):(l=Gl(n),l.c(),P(l,1),l.m(e,null)):l&&(oe(),A(l,1,1,()=>{l=null}),fe()),(!t||i&2)&&k(e,"id",n[1])},i(n){t||(P(l),t=!0)},o(n){A(l),t=!1},d(n){n&&_(e),l&&l.d(),a[15](null)}}}function Yn(a,e,t){let{$$slots:l={},$$scope:n}=e,{map:i}=e,{id:s="map"}=e,{location:f={bounds:[[-5.816,49.864],[1.863,55.872]]}}=e,{maxbounds:o=[[-13,48],[5,60]]}=e,{style:r="https://bothness.github.io/ons-basemaps/data/style-omt.json"}=e,{interactive:c=!0}=e,{minzoom:h=0}=e,{maxzoom:u=14}=e,{zoom:d=null}=e,{scrollzoom:m=!0}=e,{geolocate:g=!0}=e,{zoomcontrol:D=!0}=e,b,T;ye("map",{getMap:()=>i}),f.bounds?T={bounds:f.bounds}:f.lon&&f.lat&&(T={center:[f.lon,f.lat]},f.zoom&&(T.zoom=f.zoom)),o&&(T.maxBounds=o),Ot(()=>{const z=document.createElement("link");return z.rel="stylesheet",z.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",z.onload=()=>{t(0,i=new Le.Map(ke({container:b,style:r,minZoom:h,maxZoom:u,interactive:c},T))),D&&i.addControl(new Le.NavigationControl({showCompass:!1})),m||i.scrollZoom.disable(),g&&i.addControl(new Le.GeolocateControl),i.on("load",()=>{t(3,d=i.getZoom())}),i.on("zoom",()=>{t(3,d=i.getZoom())})},document.head.appendChild(z),()=>{i.remove(),z.parentNode.removeChild(z)}});function j(z){De[z?"unshift":"push"](()=>{b=z,t(2,b)})}return a.$$set=z=>{"map"in z&&t(0,i=z.map),"id"in z&&t(1,s=z.id),"location"in z&&t(4,f=z.location),"maxbounds"in z&&t(5,o=z.maxbounds),"style"in z&&t(6,r=z.style),"interactive"in z&&t(7,c=z.interactive),"minzoom"in z&&t(8,h=z.minzoom),"maxzoom"in z&&t(9,u=z.maxzoom),"zoom"in z&&t(3,d=z.zoom),"scrollzoom"in z&&t(10,m=z.scrollzoom),"geolocate"in z&&t(11,g=z.geolocate),"zoomcontrol"in z&&t(12,D=z.zoomcontrol),"$$scope"in z&&t(13,n=z.$$scope)},[i,s,b,d,f,o,r,c,h,u,m,g,D,n,l,j]}class Qn extends te{constructor(e){super();ne(this,e,Yn,Jn,ie,{map:0,id:1,location:4,maxbounds:5,style:6,interactive:7,minzoom:8,maxzoom:9,zoom:3,scrollzoom:10,geolocate:11,zoomcontrol:12})}}function Zl(a){let e;const t=a[11].default,l=_e(t,a,a[10],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,i){l&&l.m(n,i),e=!0},p(n,i){l&&l.p&&(!e||i&1024)&&de(l,t,n,n[10],e?ge(t,n[10],i,null):me(n[10]),null)},i(n){e||(P(l,n),e=!0)},o(n){A(l,n),e=!1},d(n){l&&l.d(n)}}}function $n(a){let e,t,l=a[0]&&Zl(a);return{c(){l&&l.c(),e=R()},l(n){l&&l.l(n),e=R()},m(n,i){l&&l.m(n,i),E(n,e,i),t=!0},p(n,[i]){n[0]?l?(l.p(n,i),i&1&&P(l,1)):(l=Zl(n),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(oe(),A(l,1,1,()=>{l=null}),fe())},i(n){t||(P(l),t=!0)},o(n){A(l),t=!1},d(n){l&&l.d(n),n&&_(e)}}}function xn(a,e,t){let{$$slots:l={},$$scope:n}=e,{id:i}=e,{type:s}=e,{url:f=null}=e,{props:o={}}=e,{data:r=null}=e,{layer:c=null}=e,{promoteId:h=null}=e,{minzoom:u=null}=e,{maxzoom:d=null}=e,m=!1;const{getMap:g}=Se("map"),D=g();ye("source",{source:i,sourceLayer:c}),D.getSource(i)&&D.removeSource(i);function b(){D.isSourceLoaded(i)?t(0,m=!0):setTimeout(()=>{b()},500)}function T(){D.isStyleLoaded(i)?(j(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{T()},500)}u&&(o.minzoom=u),d&&(o.maxzoom=d),c&&h?(o.promoteId={},o.promoteId[c]=h):h&&(o.promoteId=h);function j(){s=="geojson"?r?(D.addSource(i,ke({type:s,data:r},o)),b()):f&&(D.addSource(i,ke({type:s,data:f},o)),b()):s=="vector"&&(D.addSource(i,ke({type:s,tiles:[f]},o)),b())}T();function z(){D.getSource(i).setData(r)}return a.$$set=B=>{"id"in B&&t(2,i=B.id),"type"in B&&t(3,s=B.type),"url"in B&&t(4,f=B.url),"props"in B&&t(1,o=B.props),"data"in B&&t(5,r=B.data),"layer"in B&&t(6,c=B.layer),"promoteId"in B&&t(7,h=B.promoteId),"minzoom"in B&&t(8,u=B.minzoom),"maxzoom"in B&&t(9,d=B.maxzoom),"$$scope"in B&&t(10,n=B.$$scope)},a.$$.update=()=>{a.$$.dirty&33&&m&&r&&z()},[m,o,i,s,f,r,c,h,u,d,n,l]}class ei extends te{constructor(e){super();ne(this,e,xn,$n,ie,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function li(a,e,t){const l=Ht(),n=new Le.Popup({closeButton:!1,closeOnClick:!1});let{id:i}=e,{type:s}=e,{filter:f=null}=e,{layout:o={}}=e,{paint:r={}}=e,{data:c=null}=e,{geoCode:h=null}=e,{colorCode:u=null}=e,{nameCode:d=null}=e,{valueCode:m=null}=e,{click:g=!1}=e,{ignoreClick:D=!1}=e,{clickCenter:b=!1}=e,{selected:T=null}=e,{hover:j=!1}=e,{hovered:z=null}=e,{highlight:B=!1}=e,{highlightKey:p="highlighted"}=e,{highlighted:F=[]}=e,{order:I=null}=e,{maxzoom:V=null}=e,{minzoom:H=null}=e,{tooltip:se=!1}=e;const{source:U,sourceLayer:$}=Se("source"),{getMap:ue}=Se("map"),ee=ue();let he=null,O=null,Z=[];ee.getLayer(i)&&ee.removeLayer(i);let X={id:i,type:s,source:U,paint:r,layout:o};f&&(X.filter=f),$&&(X["source-layer"]=$),V&&(X.maxzoom=V),H&&(X.minzoom=H),ee.addLayer(X,I);function ae(){c.forEach(q=>{ee.setFeatureState({source:U,sourceLayer:$,id:q[h]},{color:u?q[u]:null,name:d?q[d]:null,value:m?q[m]:null})})}return g&&ee.on("click",i,q=>{if(q.features.length>0&&!D){if(t(0,T=q.features[0].id),l("select",{code:T}),he&&ee.setFeatureState({source:U,sourceLayer:$,id:he},{selected:!1}),ee.setFeatureState({source:U,sourceLayer:$,id:T},{selected:!0}),b){let ce=centroid(q.features[0].toJSON().geometry);ee.flyTo({center:ce.geometry.coordinates})}t(23,he=T)}}),j&&(ee.on("mousemove",i,q=>{if(q.features.length>0){z&&ee.setFeatureState({source:U,sourceLayer:$,id:z},{hovered:!1}),t(1,z=t(24,O=q.features[0].id)),ee.setFeatureState({source:U,sourceLayer:$,id:z},{hovered:!0}),ee.getCanvas().style.cursor="pointer";let ce=ee.getFeatureState({source:U,sourceLayer:$,id:z});se&&ce.name&&n.setLngLat(q.lngLat).setHTML(`<strong>${ce.name}</strong>${ce.value!=null?"<br/>"+ce.value.toFixed(1)+"%":"<br/>Data not available"}`).addTo(ee)}}),ee.on("mouseleave",i,q=>{z&&ee.setFeatureState({source:U,sourceLayer:$,id:z},{hovered:!1}),t(1,z=t(24,O=null)),ee.getCanvas().style.cursor="",se&&n.remove()})),a.$$set=q=>{"id"in q&&t(2,i=q.id),"type"in q&&t(3,s=q.type),"filter"in q&&t(4,f=q.filter),"layout"in q&&t(5,o=q.layout),"paint"in q&&t(6,r=q.paint),"data"in q&&t(7,c=q.data),"geoCode"in q&&t(8,h=q.geoCode),"colorCode"in q&&t(9,u=q.colorCode),"nameCode"in q&&t(10,d=q.nameCode),"valueCode"in q&&t(11,m=q.valueCode),"click"in q&&t(12,g=q.click),"ignoreClick"in q&&t(13,D=q.ignoreClick),"clickCenter"in q&&t(14,b=q.clickCenter),"selected"in q&&t(0,T=q.selected),"hover"in q&&t(15,j=q.hover),"hovered"in q&&t(1,z=q.hovered),"highlight"in q&&t(16,B=q.highlight),"highlightKey"in q&&t(17,p=q.highlightKey),"highlighted"in q&&t(18,F=q.highlighted),"order"in q&&t(19,I=q.order),"maxzoom"in q&&t(20,V=q.maxzoom),"minzoom"in q&&t(21,H=q.minzoom),"tooltip"in q&&t(22,se=q.tooltip)},a.$$.update=()=>{a.$$.dirty[0]&640&&(c||u)&&ae(),a.$$.dirty[0]&34013184&&B&&F!=Z&&(Z[0]&&Z.forEach(q=>{let ce={};ce[p]=!1,ee.setFeatureState({source:U,sourceLayer:$,id:q},ce)}),t(25,Z=F),F[0]&&F.forEach(q=>{let ce={};ce[p]=!0,ee.setFeatureState({source:U,sourceLayer:$,id:q},ce)})),a.$$.dirty[0]&8392705&&g&&T!=he&&(he&&ee.setFeatureState({source:U,sourceLayer:$,id:he},{selected:!1}),T&&ee.setFeatureState({source:U,sourceLayer:$,id:T},{selected:!0}),t(23,he=T)),a.$$.dirty[0]&16809986&&j&&z!=O&&(O&&ee.setFeatureState({source:U,sourceLayer:$,id:O},{hovered:!1}),z&&ee.setFeatureState({source:U,sourceLayer:$,id:z},{hovered:!0}),t(24,O=z))},[T,z,i,s,f,o,r,c,h,u,d,m,g,D,b,j,B,p,F,I,V,H,se,he,O,Z]}class Xl extends te{constructor(e){super();ne(this,e,li,null,ie,{id:2,type:3,filter:4,layout:5,paint:6,data:7,geoCode:8,colorCode:9,nameCode:10,valueCode:11,click:12,ignoreClick:13,clickCenter:14,selected:0,hover:15,hovered:1,highlight:16,highlightKey:17,highlighted:18,order:19,maxzoom:20,minzoom:21,tooltip:22},null,[-1,-1])}}function ti(a){let e,t,l;const n=a[1].default,i=_e(n,a,a[0],null);return{c(){e=w("div"),t=w("div"),i&&i.c(),this.h()},l(s){e=y(s,"DIV",{class:!0});var f=C(e);t=y(f,"DIV",{class:!0});var o=C(t);i&&i.l(o),o.forEach(_),f.forEach(_),this.h()},h(){k(t,"class","wrapper"),k(e,"class","page-content")},m(s,f){E(s,e,f),v(e,t),i&&i.m(t,null),l=!0},p(s,[f]){i&&i.p&&(!l||f&1)&&de(i,n,s,s[0],l?ge(n,s[0],f,null):me(s[0]),null)},i(s){l||(P(i,s),l=!0)},o(s){A(i,s),l=!1},d(s){s&&_(e),i&&i.d(s)}}}function ni(a,e,t){let{$$slots:l={},$$scope:n}=e;return a.$$set=i=>{"$$scope"in i&&t(0,n=i.$$scope)},[n,l]}class ii extends te{constructor(e){super();ne(this,e,ni,ti,ie,{})}}const ai=a=>({}),Jl=a=>({});function Yl(a){let e,t,l,n;const i=a[6].meta,s=_e(i,a,a[5],Jl);return{c(){e=w("h2"),t=K(a[0]),l=N(),s&&s.c(),this.h()},l(f){e=y(f,"H2",{id:!0,class:!0});var o=C(e);t=M(o,a[0]),o.forEach(_),l=L(f),s&&s.l(f),this.h()},h(){k(e,"id","topics"),k(e,"class","svelte-1328dmd")},m(f,o){E(f,e,o),v(e,t),E(f,l,o),s&&s.m(f,o),n=!0},p(f,o){(!n||o&1)&&W(t,f[0]),s&&s.p&&(!n||o&32)&&de(s,i,f,f[5],n?ge(i,f[5],o,ai):me(f[5]),Jl)},i(f){n||(P(s,f),n=!0)},o(f){A(s,f),n=!1},d(f){f&&_(e),f&&_(l),s&&s.d(f)}}}function si(a){let e,t,l,n,i=`repeat(auto-fit, minmax(min(${a[1]}px, 100%), 1fr))`,s=`${a[2]}px`,f,o=a[0]&&Yl(a);const r=a[6].default,c=_e(r,a,a[5],null);return{c(){e=w("div"),o&&o.c(),t=N(),l=w("div"),c&&c.c(),this.h()},l(h){e=y(h,"DIV",{class:!0});var u=C(e);o&&o.l(u),t=L(u),l=y(u,"DIV",{class:!0});var d=C(l);c&&c.l(d),d.forEach(_),u.forEach(_),this.h()},h(){k(l,"class","tiles-grid margin-bottom svelte-1328dmd"),qe(()=>a[7].call(l)),S(l,"grid-template-columns",i,!1),S(l,"grid-gap",s,!1),k(e,"class","tiles")},m(h,u){E(h,e,u),o&&o.m(e,null),v(e,t),v(e,l),c&&c.m(l,null),n=Fe(l,a[7].bind(l)),f=!0},p(h,[u]){h[0]?o?(o.p(h,u),u&1&&P(o,1)):(o=Yl(h),o.c(),P(o,1),o.m(e,t)):o&&(oe(),A(o,1,1,()=>{o=null}),fe()),c&&c.p&&(!f||u&32)&&de(c,r,h,h[5],f?ge(r,h[5],u,null):me(h[5]),null),u&2&&i!==(i=`repeat(auto-fit, minmax(min(${h[1]}px, 100%), 1fr))`)&&S(l,"grid-template-columns",i,!1),u&4&&s!==(s=`${h[2]}px`)&&S(l,"grid-gap",s,!1)},i(h){f||(P(o),P(c,h),f=!0)},o(h){A(o),A(c,h),f=!1},d(h){h&&_(e),o&&o.d(),c&&c.d(h),n()}}}function oi(a,e,t){let l,{$$slots:n={},$$scope:i}=e,{title:s=null}=e,{colwidth:f=280}=e,{gridgap:o=16}=e,r;const c=Rt(3);ye("tiles",{cols:c});function h(){r=this.clientWidth,t(3,r)}return a.$$set=u=>{"title"in u&&t(0,s=u.title),"colwidth"in u&&t(1,f=u.colwidth),"gridgap"in u&&t(2,o=u.gridgap),"$$scope"in u&&t(5,i=u.$$scope)},a.$$.update=()=>{a.$$.dirty&14&&t(4,l=r?Math.floor((r+o)/(f+o)):3),a.$$.dirty&16&&c.set(l)},[s,f,o,r,l,i,n,h]}class Be extends te{constructor(e){super();ne(this,e,oi,si,ie,{title:0,colwidth:1,gridgap:2})}}function Ql(a,e,t){const l=a.slice();return l[9]=e[t],l}function $l(a){let e,t,l;return{c(){e=w("header"),t=w("h3"),l=K(a[2]),this.h()},l(n){e=y(n,"HEADER",{class:!0});var i=C(e);t=y(i,"H3",{class:!0});var s=C(t);l=M(s,a[2]),s.forEach(_),i.forEach(_),this.h()},h(){k(t,"class","margin-top--0 margin-right--0 margin-bottom--0 margin-left--0 svelte-1krn9ab"),k(e,"class","margin-top--1")},m(n,i){E(n,e,i),v(e,t),v(t,l)},p(n,i){i&4&&W(l,n[2])},d(n){n&&_(e)}}}function xl(a){let e,t=a[3],l=[];for(let n=0;n<t.length;n+=1)l[n]=et(Ql(a,t,n));return{c(){e=w("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var i=C(e);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(_),this.h()},h(){k(e,"class","margin-top--2")},m(n,i){E(n,e,i);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,i){if(i&8){t=n[3];let s;for(s=0;s<t.length;s+=1){const f=Ql(n,t,s);l[s]?l[s].p(f,i):(l[s]=et(f),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&_(e),le(l,n)}}}function et(a){let e,t=a[9].label+"",l,n,i,s,f;return{c(){e=w("a"),l=K(t),n=N(),this.h()},l(o){e=y(o,"A",{href:!0,class:!0,"aria-label":!0,"data-gtm-label":!0});var r=C(e);l=M(r,t),n=L(r),r.forEach(_),this.h()},h(){k(e,"href",i=a[9].url),k(e,"class","tile__link"),k(e,"aria-label",s=a[9].label),k(e,"data-gtm-label",f=a[9].label)},m(o,r){E(o,e,r),v(e,l),v(e,n)},p(o,r){r&8&&t!==(t=o[9].label+"")&&W(l,t),r&8&&i!==(i=o[9].url)&&k(e,"href",i),r&8&&s!==(s=o[9].label)&&k(e,"aria-label",s),r&8&&f!==(f=o[9].label)&&k(e,"data-gtm-label",f)},d(o){o&&_(e)}}}function fi(a){let e,t,l,n,i=`span ${a[0]==1?1:a[0]>a[5]?a[5]:a[0]}`,s=`span ${a[1]}`,f,o=a[2]&&$l(a);const r=a[8].default,c=_e(r,a,a[7],null);let h=a[3]&&a[3][0]&&xl(a);return{c(){e=w("div"),o&&o.c(),t=N(),c&&c.c(),l=N(),h&&h.c(),this.h()},l(u){e=y(u,"DIV",{class:!0});var d=C(e);o&&o.l(d),t=L(d),c&&c.l(d),l=L(d),h&&h.l(d),d.forEach(_),this.h()},h(){k(e,"class",n=Ie(a[4]?"":"tile tile__content")+" svelte-1krn9ab"),re(e,"blank",a[4]),S(e,"grid-column",i,!1),S(e,"grid-row",s,!1)},m(u,d){E(u,e,d),o&&o.m(e,null),v(e,t),c&&c.m(e,null),v(e,l),h&&h.m(e,null),f=!0},p(u,[d]){u[2]?o?o.p(u,d):(o=$l(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),c&&c.p&&(!f||d&128)&&de(c,r,u,u[7],f?ge(r,u[7],d,null):me(u[7]),null),u[3]&&u[3][0]?h?h.p(u,d):(h=xl(u),h.c(),h.m(e,null)):h&&(h.d(1),h=null),(!f||d&16&&n!==(n=Ie(u[4]?"":"tile tile__content")+" svelte-1krn9ab"))&&k(e,"class",n),d&16&&re(e,"blank",u[4]),d&33&&i!==(i=`span ${u[0]==1?1:u[0]>u[5]?u[5]:u[0]}`)&&S(e,"grid-column",i,!1),d&2&&s!==(s=`span ${u[1]}`)&&S(e,"grid-row",s,!1)},i(u){f||(P(c,u),f=!0)},o(u){A(c,u),f=!1},d(u){u&&_(e),o&&o.d(),c&&c.d(u),h&&h.d()}}}function ri(a,e,t){let l,{$$slots:n={},$$scope:i}=e,{colspan:s=1}=e,{rowspan:f=1}=e,{title:o=null}=e,{links:r=null}=e,{blank:c=!1}=e;const{cols:h}=Se("tiles");return It(a,h,u=>t(5,l=u)),a.$$set=u=>{"colspan"in u&&t(0,s=u.colspan),"rowspan"in u&&t(1,f=u.rowspan),"title"in u&&t(2,o=u.title),"links"in u&&t(3,r=u.links),"blank"in u&&t(4,c=u.blank),"$$scope"in u&&t(7,i=u.$$scope)},[s,f,o,r,c,l,h,i,n]}class pe extends te{constructor(e){super();ne(this,e,ri,fi,ie,{colspan:0,rowspan:1,title:2,links:3,blank:4})}}function ci(a){let e,t;const l=a[5].default,n=_e(l,a,a[4],null);return{c(){e=w("mark"),n&&n.c(),this.h()},l(i){e=y(i,"MARK",{class:!0,style:!0,role:!0});var s=C(e);n&&n.l(s),s.forEach(_),this.h()},h(){k(e,"class","em svelte-1602h77"),S(e,"background-color",a[0]),S(e,"color",a[2]),k(e,"role","presentation"),re(e,"nowrap",a[1])},m(i,s){E(i,e,s),n&&n.m(e,null),t=!0},p(i,[s]){n&&n.p&&(!t||s&16)&&de(n,l,i,i[4],t?ge(l,i[4],s,null):me(i[4]),null),(!t||s&1)&&S(e,"background-color",i[0]),(!t||s&4)&&S(e,"color",i[2]),s&2&&re(e,"nowrap",i[1])},i(i){t||(P(n,i),t=!0)},o(i){A(n,i),t=!1},d(i){i&&_(e),n&&n.d(i)}}}function ui(a,e,t){let l,{$$slots:n={},$$scope:i}=e,{color:s="lightgrey"}=e,{nowrap:f=!0}=e;function o(c){return(c[0]*299+c[1]*587+c[2]*114)/1e3>125?"black":"white"}let r="black";return a.$$set=c=>{"color"in c&&t(0,s=c.color),"nowrap"in c&&t(1,f=c.nowrap),"$$scope"in c&&t(4,i=c.$$scope)},a.$$.update=()=>{a.$$.dirty&1&&t(3,l=Wt(s).rgb),a.$$.dirty&8&&l&&t(2,r=o(l))},[s,f,r,l,i,n]}class hi extends te{constructor(e){super();ne(this,e,ui,ci,ie,{color:0,nowrap:1})}}function lt(a,e,t){const l=a.slice();return l[11]=e[t],l[15]=t,l}function tt(a,e,t){const l=a.slice();return l[11]=e[t],l}function _i(a){let e,t=a[1],l=[];for(let n=0;n<t.length;n+=1)l[n]=it(lt(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);E(n,e,i)},p(n,i){if(i&94){t=n[1];let s;for(s=0;s<t.length;s+=1){const f=lt(n,t,s);l[s]?l[s].p(f,i):(l[s]=it(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){le(l,n),n&&_(e)}}}function di(a){let e,t=a[1],l=[];for(let n=0;n<t.length;n+=1)l[n]=st(tt(a,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=R()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=R()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);E(n,e,i)},p(n,i){if(i&87){t=n[1];let s;for(s=0;s<t.length;s+=1){const f=tt(n,t,s);l[s]?l[s].p(f,i):(l[s]=st(f),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){le(l,n),n&&_(e)}}}function nt(a){let e,t,l,n;function i(){return a[10](a[11])}return{c(){e=w("button"),t=K("Remove"),this.h()},l(s){e=y(s,"BUTTON",{style:!0});var f=C(e);t=M(f,"Remove"),f.forEach(_),this.h()},h(){S(e,"float","right")},m(s,f){E(s,e,f),v(e,t),l||(n=Ce(e,"click",i),l=!0)},p(s,f){a=s},d(s){s&&_(e),l=!1,n()}}}function it(a){let e,t,l,n,i,s,f=a[6](a[11])+"",o,r,c,h=Ne(a[11],a[4]),u,d,m;function g(){return a[9](a[11])}let D=h&&nt(a);return{c(){e=w("p"),t=w("input"),i=N(),s=w("label"),o=K(f),c=N(),D&&D.c(),u=N(),this.h()},l(b){e=y(b,"P",{class:!0});var T=C(e);t=y(T,"INPUT",{type:!0,id:!0,name:!0,class:!0}),i=L(T),s=y(T,"LABEL",{for:!0,class:!0});var j=C(s);o=M(j,f),j.forEach(_),c=L(T),D&&D.l(T),u=L(T),T.forEach(_),this.h()},h(){k(t,"type","radio"),k(t,"id",l="category-option-"+a[15]),k(t,"name","selected-category"),t.checked=n=Ne(a[11],a[4]),k(t,"class","svelte-n9882c"),k(s,"for",r="category-option-"+a[15]),k(s,"class","svelte-n9882c"),k(e,"class","svelte-n9882c")},m(b,T){E(b,e,T),v(e,t),v(e,i),v(e,s),v(s,o),v(e,c),D&&D.m(e,null),v(e,u),d||(m=Ce(t,"click",g),d=!0)},p(b,T){a=b,T&18&&n!==(n=Ne(a[11],a[4]))&&(t.checked=n),T&66&&f!==(f=a[6](a[11])+"")&&W(o,f),T&18&&(h=Ne(a[11],a[4])),h?D?D.p(a,T):(D=nt(a),D.c(),D.m(e,u)):D&&(D.d(1),D=null)},d(b){b&&_(e),D&&D.d(),d=!1,m()}}}function at(a){let e,t,l,n,i=Ke(a[11],a[4])+"",s;return{c(){e=w("br"),t=N(),l=w("div"),n=K("Currently selected: "),s=K(i),this.h()},l(f){e=y(f,"BR",{}),t=L(f),l=y(f,"DIV",{class:!0});var o=C(l);n=M(o,"Currently selected: "),s=M(o,i),o.forEach(_),this.h()},h(){k(l,"class","svelte-n9882c")},m(f,o){E(f,e,o),E(f,t,o),E(f,l,o),v(l,n),v(l,s)},p(f,o){o&18&&i!==(i=Ke(f[11],f[4])+"")&&W(s,i)},d(f){f&&_(e),f&&_(t),f&&_(l)}}}function st(a){let e,t=a[6](a[11])+"",l,n,i,s,f,o=Ke(a[11],a[4]),r,c,h,u=o&&at(a);function d(){return a[8](a[11])}return{c(){e=w("button"),l=K(t),n=N(),i=w("span"),s=K("\u203A"),f=N(),u&&u.c(),r=N(),this.h()},l(m){e=y(m,"BUTTON",{class:!0});var g=C(e);l=M(g,t),n=L(g),i=y(g,"SPAN",{class:!0});var D=C(i);s=M(D,"\u203A"),D.forEach(_),f=L(g),u&&u.l(g),r=L(g),g.forEach(_),this.h()},h(){k(i,"class","right-chevron svelte-n9882c"),k(e,"class","svelte-n9882c"),re(e,"plain-button",!0),re(e,"selected",a[11]===a[0])},m(m,g){E(m,e,g),v(e,l),v(e,n),v(e,i),v(i,s),v(e,f),u&&u.m(e,null),v(e,r),c||(h=Ce(e,"click",d),c=!0)},p(m,g){a=m,g&66&&t!==(t=a[6](a[11])+"")&&W(l,t),g&18&&(o=Ke(a[11],a[4])),o?u?u.p(a,g):(u=at(a),u.c(),u.m(e,r)):u&&(u.d(1),u=null),g&3&&re(e,"selected",a[11]===a[0])},d(m){m&&_(e),u&&u.d(),c=!1,h()}}}function mi(a){let e,t,l,n;function i(o,r){return o[7]?di:_i}let s=i(a),f=s(a);return{c(){e=w("div"),t=w("h5"),l=K(a[5]),n=N(),f.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var r=C(e);t=y(r,"H5",{class:!0});var c=C(t);l=M(c,a[5]),c.forEach(_),n=L(r),f.l(r),r.forEach(_),this.h()},h(){k(t,"class","column-title svelte-n9882c"),k(e,"class","column svelte-n9882c")},m(o,r){E(o,e,r),v(e,t),v(t,l),v(e,n),f.m(e,null)},p(o,[r]){r&32&&W(l,o[5]),s===(s=i(o))&&f?f.p(o,r):(f.d(1),f=s(o),f&&(f.c(),f.m(e,null)))},i:G,o:G,d(o){o&&_(e),f.d()}}}function ot(a){console.log("clicked",a)}function Ke(a,e){for(let t of e)if(t.topic===a.label)return t.label;return!1}function Ne(a,e){for(const t of e)if(t.var===a.var&&t.code===a.code)return console.log(t,a),!0;return console.log("f"),!1}function gi(a,e,t){let{options:l=[]}=e,{clickCallback:n=ot}=e,{removeCatCallback:i=ot}=e,{globalSelectedCategories:s=[]}=e,{columnTitle:f="column title"}=e,{labeller:o=m=>m.label}=e,{selected:r=null}=e,{hasChildren:c=!0}=e;const h=m=>{t(0,r=m),n(m)},u=m=>n(m),d=m=>i(m);return a.$$set=m=>{"options"in m&&t(1,l=m.options),"clickCallback"in m&&t(2,n=m.clickCallback),"removeCatCallback"in m&&t(3,i=m.removeCatCallback),"globalSelectedCategories"in m&&t(4,s=m.globalSelectedCategories),"columnTitle"in m&&t(5,f=m.columnTitle),"labeller"in m&&t(6,o=m.labeller),"selected"in m&&t(0,r=m.selected),"hasChildren"in m&&t(7,c=m.hasChildren)},a.$$.update=()=>{a.$$.dirty&2&&console.log(l),a.$$.dirty&16&&console.log(s)},[r,l,n,i,s,f,o,c,h,u,d]}class Oe extends te{constructor(e){super();ne(this,e,gi,mi,ie,{options:1,clickCallback:2,removeCatCallback:3,globalSelectedCategories:4,columnTitle:5,labeller:6,selected:0,hasChildren:7})}}function ft(a){let e,t,l,n,i;function s(r){a[9](r)}let f={columnTitle:"Select a classification",labeller:pi,options:a[4].vars};a[5]!==void 0&&(f.selected=a[5]),e=new Oe({props:f}),De.push(()=>ze(e,"selected",s));let o=a[5]!=null&&rt(a);return{c(){J(e.$$.fragment),l=N(),o&&o.c(),n=R()},l(r){x(e.$$.fragment,r),l=L(r),o&&o.l(r),n=R()},m(r,c){Y(e,r,c),E(r,l,c),o&&o.m(r,c),E(r,n,c),i=!0},p(r,c){const h={};c&16&&(h.options=r[4].vars),!t&&c&32&&(t=!0,h.selected=r[5],Te(()=>t=!1)),e.$set(h),r[5]!=null?o?(o.p(r,c),c&32&&P(o,1)):(o=rt(r),o.c(),P(o,1),o.m(n.parentNode,n)):o&&(oe(),A(o,1,1,()=>{o=null}),fe())},i(r){i||(P(e.$$.fragment,r),P(o),i=!0)},o(r){A(e.$$.fragment,r),A(o),i=!1},d(r){Q(e,r),r&&_(l),o&&o.d(r),r&&_(n)}}}function rt(a){let e,t,l;function n(s){a[12](s)}let i={columnTitle:"Select a category",options:a[5].cats,clickCallback:a[10],removeCatCallback:a[11],hasChildren:!1,globalSelectedCategories:a[3]};return a[6]!==void 0&&(i.selected=a[6]),e=new Oe({props:i}),De.push(()=>ze(e,"selected",n)),{c(){J(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,f){Y(e,s,f),l=!0},p(s,f){const o={};f&32&&(o.options=s[5].cats),f&34&&(o.clickCallback=s[10]),f&36&&(o.removeCatCallback=s[11]),f&8&&(o.globalSelectedCategories=s[3]),!t&&f&64&&(t=!0,o.selected=s[6],Te(()=>t=!1)),e.$set(o)},i(s){l||(P(e.$$.fragment,s),l=!0)},o(s){A(e.$$.fragment,s),l=!1},d(s){Q(e,s)}}}function bi(a){let e,t,l,n,i,s,f;function o(h){a[8](h)}let r={columnTitle:"Select a variable",clickCallback:a[7],options:a[0],globalSelectedCategories:a[3]};a[4]!==void 0&&(r.selected=a[4]),t=new Oe({props:r}),De.push(()=>ze(t,"selected",o));let c=a[4]!=null&&ft(a);return{c(){e=w("div"),J(t.$$.fragment),n=N(),c&&c.c(),i=N(),s=R(),this.h()},l(h){e=y(h,"DIV",{class:!0});var u=C(e);x(t.$$.fragment,u),n=L(u),c&&c.l(u),u.forEach(_),i=L(h),s=R(),this.h()},h(){k(e,"class","container svelte-3hmhst")},m(h,u){E(h,e,u),Y(t,e,null),v(e,n),c&&c.m(e,null),E(h,i,u),E(h,s,u),f=!0},p(h,[u]){const d={};u&32&&(d.clickCallback=h[7]),u&1&&(d.options=h[0]),u&8&&(d.globalSelectedCategories=h[3]),!l&&u&16&&(l=!0,d.selected=h[4],Te(()=>l=!1)),t.$set(d),h[4]!=null?c?(c.p(h,u),u&16&&P(c,1)):(c=ft(h),c.c(),P(c,1),c.m(e,null)):c&&(oe(),A(c,1,1,()=>{c=null}),fe())},i(h){f||(P(t.$$.fragment,h),P(c),f=!0)},o(h){A(t.$$.fragment,h),A(c),f=!1},d(h){h&&_(e),Q(t),c&&c.d(),h&&_(i),h&&_(s)}}}function vi(a,e){console.log(a,e)}function ki(a,e){console.log(a,e)}const pi=a=>`${a.cats.length+" categories"}`;function Ei(a,e,t){let{options:l=[]}=e,{clickCallback:n=vi}=e,{removeCatCallback:i=ki}=e,{globalSelectedCategories:s=[]}=e,f=null,o=null,r=null;const c=()=>{t(5,o=null)};function h(b){f=b,t(4,f)}function u(b){o=b,t(5,o)}const d=b=>n(o,b),m=b=>i(o,b);function g(b){r=b,t(6,r)}const D=(b,T)=>n(b,T);return a.$$set=b=>{"options"in b&&t(0,l=b.options),"clickCallback"in b&&t(1,n=b.clickCallback),"removeCatCallback"in b&&t(2,i=b.removeCatCallback),"globalSelectedCategories"in b&&t(3,s=b.globalSelectedCategories)},[l,n,i,s,f,o,r,c,h,u,d,m,g,D]}class wi extends te{constructor(e){super();ne(this,e,Ei,bi,ie,{options:0,clickCallback:1,removeCatCallback:2,globalSelectedCategories:3})}}function ct(a,e,t){const l=a.slice();return l[33]=e[t],l}function ut(a,e,t){const l=a.slice();return l[36]=e[t],l}function ht(a,e,t){const l=a.slice();return l[39]=e[t],l[41]=t,l}function yi(a){let e;return{c(){e=K("Create a population group profile")},l(t){e=M(t,"Create a population group profile")},m(t,l){E(t,e,l)},d(t){t&&_(e)}}}function Ci(a){let e,t,l,n,i,s,f,o,r,c,h;return e=new In({props:{$$slots:{default:[yi]},$$scope:{ctx:a}}}),{c(){J(e.$$.fragment),t=N(),l=w("p"),n=K(`Select one or more identity characteristics to define a population group to
    compare with the whole population of England and Wales. For example, see `),i=w("a"),s=K("Sikhs born in the UK"),f=K(`
    or
    `),o=w("a"),r=K("people aged 65+ born in Ireland"),c=K("."),this.h()},l(u){x(e.$$.fragment,u),t=L(u),l=y(u,"P",{class:!0});var d=C(l);n=M(d,`Select one or more identity characteristics to define a population group to
    compare with the whole population of England and Wales. For example, see `),i=y(d,"A",{href:!0,class:!0});var m=C(i);s=M(m,"Sikhs born in the UK"),m.forEach(_),f=M(d,`
    or
    `),o=y(d,"A",{href:!0,class:!0});var g=C(o);r=M(g,"people aged 65+ born in Ireland"),g.forEach(_),c=M(d,"."),d.forEach(_),this.h()},h(){k(i,"href","?religion_tb=7&country_of_birth_3a=1"),k(i,"class","svelte-4bq5sb"),k(o,"href","?resident_age_3a=3&country_of_birth_8a=2"),k(o,"class","svelte-4bq5sb"),k(l,"class","subtitle svelte-4bq5sb")},m(u,d){Y(e,u,d),E(u,t,d),E(u,l,d),v(l,n),v(l,i),v(i,s),v(l,f),v(l,o),v(o,r),v(l,c),h=!0},p(u,d){const m={};d[1]&2048&&(m.$$scope={dirty:d,ctx:u}),e.$set(m)},i(u){h||(P(e.$$.fragment,u),h=!0)},o(u){A(e.$$.fragment,u),h=!1},d(u){Q(e,u),u&&_(t),u&&_(l)}}}function _t(a){let e,t,l,n=a[0],i=[];for(let s=0;s<n.length;s+=1)i[s]=dt(ht(a,n,s));return{c(){e=w("br"),t=N();for(let s=0;s<i.length;s+=1)i[s].c();l=R()},l(s){e=y(s,"BR",{}),t=L(s);for(let f=0;f<i.length;f+=1)i[f].l(s);l=R()},m(s,f){E(s,e,f),E(s,t,f);for(let o=0;o<i.length;o+=1)i[o].m(s,f);E(s,l,f)},p(s,f){if(f[0]&521){n=s[0];let o;for(o=0;o<n.length;o+=1){const r=ht(s,n,o);i[o]?i[o].p(r,f):(i[o]=dt(r),i[o].c(),i[o].m(l.parentNode,l))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(s){s&&_(e),s&&_(t),le(i,s),s&&_(l)}}}function Di(a){let e,t,l=ve(a[39].topic)+"",n,i,s=ve(a[39].label)+"",f,o,r,c,h,u;function d(){return a[17](a[39])}return{c(){e=w("div"),t=w("span"),n=K(l),i=K(": "),f=K(s),o=N(),r=w("button"),c=N(),this.h()},l(m){e=y(m,"DIV",{class:!0});var g=C(e);t=y(g,"SPAN",{class:!0});var D=C(t);n=M(D,l),i=M(D,": "),f=M(D,s),D.forEach(_),o=L(g),r=y(g,"BUTTON",{class:!0}),C(r).forEach(_),c=L(g),g.forEach(_),this.h()},h(){k(t,"class","svelte-4bq5sb"),k(r,"class","svelte-4bq5sb"),k(e,"class","chip svelte-4bq5sb")},m(m,g){E(m,e,g),v(e,t),v(t,n),v(t,i),v(t,f),v(e,o),v(e,r),v(e,c),h||(u=Ce(r,"click",d),h=!0)},p(m,g){a=m,g[0]&1&&l!==(l=ve(a[39].topic)+"")&&W(n,l),g[0]&1&&s!==(s=ve(a[39].label)+"")&&W(f,s)},d(m){m&&_(e),h=!1,u()}}}function Si(a){let e,t,l=ve(a[39].topic)+"",n,i,s=ve(a[39].label)+"",f,o,r,c;return{c(){e=w("div"),t=w("span"),n=K(l),i=K(": "),f=K(s),o=N(),r=w("div"),c=N(),this.h()},l(h){e=y(h,"DIV",{class:!0});var u=C(e);t=y(u,"SPAN",{class:!0});var d=C(t);n=M(d,l),i=M(d,": "),f=M(d,s),d.forEach(_),o=L(u),r=y(u,"DIV",{class:!0}),C(r).forEach(_),c=L(u),u.forEach(_),this.h()},h(){k(t,"class","svelte-4bq5sb"),k(r,"class","chip-loader svelte-4bq5sb"),k(e,"class","chip chip-pending svelte-4bq5sb")},m(h,u){E(h,e,u),v(e,t),v(t,n),v(t,i),v(t,f),v(e,o),v(e,r),v(e,c)},p(h,u){u[0]&1&&l!==(l=ve(h[39].topic)+"")&&W(n,l),u[0]&1&&s!==(s=ve(h[39].label)+"")&&W(f,s)},d(h){h&&_(e)}}}function dt(a){let e;function t(i,s){return i[3]=="loading"&&i[41]==i[0].length-1?Si:Di}let l=t(a),n=l(a);return{c(){n.c(),e=R()},l(i){n.l(i),e=R()},m(i,s){n.m(i,s),E(i,e,s)},p(i,s){l===(l=t(i))&&n?n.p(i,s):(n.d(1),n=l(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){n.d(i),i&&_(e)}}}function mt(a){let e,t,l,n=a[3]=="failed"&&gt(),i=a[4]==!0&&bt();return{c(){e=w("div"),t=K(`Some datasets not available for selected variables.
        `),n&&n.c(),l=N(),i&&i.c(),this.h()},l(s){e=y(s,"DIV",{class:!0});var f=C(e);t=M(f,`Some datasets not available for selected variables.
        `),n&&n.l(f),l=L(f),i&&i.l(f),f.forEach(_),this.h()},h(){k(e,"class","warning svelte-4bq5sb")},m(s,f){E(s,e,f),v(e,t),n&&n.m(e,null),v(e,l),i&&i.m(e,null)},p(s,f){s[3]=="failed"?n||(n=gt(),n.c(),n.m(e,l)):n&&(n.d(1),n=null),s[4]==!0?i||(i=bt(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(s){s&&_(e),n&&n.d(),i&&i.d()}}}function gt(a){let e;return{c(){e=K("Try removing a variable to see more datasets.")},l(t){e=M(t,"Try removing a variable to see more datasets.")},m(t,l){E(t,e,l)},d(t){t&&_(e)}}}function bt(a){let e;return{c(){e=K(`Economic indicators (employment, social status etc) not available for
          ages 0 to 15.`)},l(t){e=M(t,`Economic indicators (employment, social status etc) not available for
          ages 0 to 15.`)},m(t,l){E(t,e,l)},d(t){t&&_(e)}}}function Ii(a){let e,t,l,n,i,s=a[0][0]&&_t(a),f=(a[3]=="failed"||a[4]==!0)&&mt(a);return n=new wi({props:{options:Xt,clickCallback:a[7],removeCatCallback:a[8],globalSelectedCategories:a[0]}}),{c(){e=w("div"),s&&s.c(),t=N(),f&&f.c(),l=N(),J(n.$$.fragment),this.h()},l(o){e=y(o,"DIV",{slot:!0,class:!0});var r=C(e);s&&s.l(r),t=L(r),f&&f.l(r),l=L(r),x(n.$$.fragment,r),r.forEach(_),this.h()},h(){k(e,"slot","meta"),k(e,"class","wrapper")},m(o,r){E(o,e,r),s&&s.m(e,null),v(e,t),f&&f.m(e,null),v(e,l),Y(n,e,null),i=!0},p(o,r){o[0][0]?s?s.p(o,r):(s=_t(o),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o[3]=="failed"||o[4]==!0?f?f.p(o,r):(f=mt(o),f.c(),f.m(e,l)):f&&(f.d(1),f=null);const c={};r[0]&1&&(c.globalSelectedCategories=o[0]),n.$set(c)},i(o){i||(P(n.$$.fragment,o),i=!0)},o(o){A(n.$$.fragment,o),i=!1},d(o){o&&_(e),s&&s.d(),f&&f.d(),Q(n)}}}function zi(a){let e,t=a[6].selected.total_pop.toLocaleString()+"",l,n,i,s,f,o,r,c=(a[6].selected.total_pop===a[6].all.total_pop?100:(a[6].selected.total_pop/a[6].all.total_pop*100).toFixed(1)!=="0.0"?(a[6].selected.total_pop/a[6].all.total_pop*100).toFixed(1):"Less than 0.05")+"",h,u,d;return r=new hi({props:{color:"lightgrey"}}),{c(){e=w("div"),l=K(t),n=N(),i=w("div"),s=K("people (TODO: calculate this percentage in Python)"),f=N(),o=w("div"),J(r.$$.fragment),h=K(c),u=K("% of the total population of England and Wales"),this.h()},l(m){e=y(m,"DIV",{class:!0});var g=C(e);l=M(g,t),g.forEach(_),n=L(m),i=y(m,"DIV",{class:!0});var D=C(i);s=M(D,"people (TODO: calculate this percentage in Python)"),D.forEach(_),f=L(m),o=y(m,"DIV",{class:!0});var b=C(o);x(r.$$.fragment,b),h=M(b,c),u=M(b,"% of the total population of England and Wales"),b.forEach(_),this.h()},h(){k(e,"class","num-big svelte-4bq5sb"),k(i,"class","num-suffix svelte-4bq5sb"),k(o,"class","num-desc svelte-4bq5sb")},m(m,g){E(m,e,g),v(e,l),E(m,n,g),E(m,i,g),v(i,s),E(m,f,g),E(m,o,g),Y(r,o,null),v(o,h),v(o,u),d=!0},p(m,g){(!d||g[0]&64)&&t!==(t=m[6].selected.total_pop.toLocaleString()+"")&&W(l,t),(!d||g[0]&64)&&c!==(c=(m[6].selected.total_pop===m[6].all.total_pop?100:(m[6].selected.total_pop/m[6].all.total_pop*100).toFixed(1)!=="0.0"?(m[6].selected.total_pop/m[6].all.total_pop*100).toFixed(1):"Less than 0.05")+"")&&W(h,c)},i(m){d||(P(r.$$.fragment,m),d=!0)},o(m){A(r.$$.fragment,m),d=!1},d(m){m&&_(e),m&&_(n),m&&_(i),m&&_(f),m&&_(o),Q(r)}}}function Ti(a){let e,t=Ve.nodata+"",l;return{c(){e=w("div"),l=K(t),this.h()},l(n){e=y(n,"DIV",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-4bq5sb")},m(n,i){E(n,e,i),v(e,l)},p:G,i:G,o:G,d(n){n&&_(e)}}}function Vi(a){let e,t,l,n;const i=[Ti,zi],s=[];function f(o,r){return o[6].selected.total_pop==0?0:1}return e=f(a),t=s[e]=i[e](a),{c(){t.c(),l=R()},l(o){t.l(o),l=R()},m(o,r){s[e].m(o,r),E(o,l,r),n=!0},p(o,r){let c=e;e=f(o),e===c?s[e].p(o,r):(oe(),A(s[c],1,1,()=>{s[c]=null}),fe(),t=s[e],t?t.p(o,r):(t=s[e]=i[e](o),t.c()),P(t,1),t.m(l.parentNode,l))},i(o){n||(P(t),n=!0)},o(o){A(t),n=!1},d(o){s[e].d(o),o&&_(l)}}}function Pi(a){let e,t;return e=new Mn({props:{data:a[6].selected&&a[10](["residents","resident_age_23a"]),zKey:"group",maskRange:a[11](a[0])}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n[0]&64&&(i.data=l[6].selected&&l[10](["residents","resident_age_23a"])),n[0]&1&&(i.maskRange=l[11](l[0])),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Ni(a){let e,t=Ve.nodata+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-4bq5sb")},m(n,i){E(n,e,i),v(e,l)},p:G,i:G,o:G,d(n){n&&_(e)}}}function Li(a){let e,t=Ve.nodata+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-4bq5sb")},m(n,i){E(n,e,i),v(e,l)},p:G,i:G,o:G,d(n){n&&_(e)}}}function Ai(a){let e,t,l,n,i;const s=[Li,Ni,Pi],f=[];function o(r,c){return c[0]&64&&(e=null),r[6].selected.residents.resident_age_23a.values==="blocked"?0:(e==null&&(e=!!tn(r[6].selected.residents.resident_age_23a.values.percent)),e?1:2)}return t=o(a,[-1,-1]),l=f[t]=s[t](a),{c(){l.c(),n=R()},l(r){l.l(r),n=R()},m(r,c){f[t].m(r,c),E(r,n,c),i=!0},p(r,c){let h=t;t=o(r,c),t===h?f[t].p(r,c):(oe(),A(f[h],1,1,()=>{f[h]=null}),fe(),l=f[t],l?l.p(r,c):(l=f[t]=s[t](r),l.c()),P(l,1),l.m(n.parentNode,n))},i(r){i||(P(l),i=!0)},o(r){A(l),i=!1},d(r){f[t].d(r),r&&_(n)}}}function Ki(a){let e,t,l,n;return e=new pe({props:{title:"Population",$$slots:{default:[Vi]},$$scope:{ctx:a}}}),l=new pe({props:{title:"Age profile",$$slots:{default:[Ai]},$$scope:{ctx:a}}}),{c(){J(e.$$.fragment),t=N(),J(l.$$.fragment)},l(i){x(e.$$.fragment,i),t=L(i),x(l.$$.fragment,i)},m(i,s){Y(e,i,s),E(i,t,s),Y(l,i,s),n=!0},p(i,s){const f={};s[0]&64|s[1]&2048&&(f.$$scope={dirty:s,ctx:i}),e.$set(f);const o={};s[0]&65|s[1]&2048&&(o.$$scope={dirty:s,ctx:i}),l.$set(o)},i(i){n||(P(e.$$.fragment,i),P(l.$$.fragment,i),n=!0)},o(i){A(e.$$.fragment,i),A(l.$$.fragment,i),n=!1},d(i){Q(e,i),i&&_(t),Q(l,i)}}}function Mi(a){let e,t;return{c(){e=w("p"),t=K(`For each lower-tier local authority area in England and Wales, the map
        shows the count of people in the categories chosen above as a percentage
        of the area's total population.`),this.h()},l(l){e=y(l,"P",{class:!0});var n=C(e);t=M(n,`For each lower-tier local authority area in England and Wales, the map
        shows the count of people in the categories chosen above as a percentage
        of the area's total population.`),n.forEach(_),this.h()},h(){k(e,"class","subtitle svelte-4bq5sb")},m(l,n){E(l,e,n),v(e,t)},d(l){l&&_(e)}}}function vt(a){let e,t;return e=new ei({props:{id:"lad",type:"geojson",data:a[6].geojson,promoteId:we.code,$$slots:{default:[ji]},$$scope:{ctx:a}}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n[0]&64&&(i.data=l[6].geojson),n[0]&68|n[1]&2048&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function ji(a){let e,t,l,n,i;function s(o){a[18](o)}let f={id:"lad-fill",data:a[6].geoPerc,geoCode:"code",nameCode:"name",colorCode:"color",valueCode:"value",hover:!0,tooltip:!0,type:"fill",paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"],"fill-opacity":.8},order:"highway_name_other"};return a[2]!==void 0&&(f.hovered=a[2]),e=new Xl({props:f}),De.push(()=>ze(e,"hovered",s)),n=new Xl({props:{id:"lad-line",type:"line",paint:{"line-color":"orange","line-width":2,"line-opacity":["case",["==",["feature-state","hovered"],!0],1,0]},order:"highway_name_other"}}),{c(){J(e.$$.fragment),l=N(),J(n.$$.fragment)},l(o){x(e.$$.fragment,o),l=L(o),x(n.$$.fragment,o)},m(o,r){Y(e,o,r),E(o,l,r),Y(n,o,r),i=!0},p(o,r){const c={};r[0]&64&&(c.data=o[6].geoPerc),!t&&r[0]&4&&(t=!0,c.hovered=o[2],Te(()=>t=!1)),e.$set(c)},i(o){i||(P(e.$$.fragment,o),P(n.$$.fragment,o),i=!0)},o(o){A(e.$$.fragment,o),A(n.$$.fragment,o),i=!1},d(o){Q(e,o),o&&_(l),Q(n,o)}}}function Bi(a){let e,t,l=a[6].geojson&&a[6].geoPerc&&vt(a);return{c(){l&&l.c(),e=R()},l(n){l&&l.l(n),e=R()},m(n,i){l&&l.m(n,i),E(n,e,i),t=!0},p(n,i){n[6].geojson&&n[6].geoPerc?l?(l.p(n,i),i[0]&64&&P(l,1)):(l=vt(n),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(oe(),A(l,1,1,()=>{l=null}),fe())},i(n){t||(P(l),t=!0)},o(n){A(l),t=!1},d(n){l&&l.d(n),n&&_(e)}}}function kt(a){let e,t,l;return t=new qn({props:{breaks:a[6].geoBreaks,hovered:a[2]&&a[6].geoPerc.find(a[20])?a[6].geoPerc.find(a[21]).value:null,colors:a[6].geoBreaks[1]==100?[be.seq[4]]:be.seq}}),{c(){e=w("div"),J(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{});var i=C(e);x(t.$$.fragment,i),i.forEach(_),this.h()},h(){S(e,"height","38px",!1),S(e,"width","100%",!1)},m(n,i){E(n,e,i),Y(t,e,null),l=!0},p(n,i){const s={};i[0]&64&&(s.breaks=n[6].geoBreaks),i[0]&68&&(s.hovered=n[2]&&n[6].geoPerc.find(n[20])?n[6].geoPerc.find(n[21]).value:null),i[0]&64&&(s.colors=n[6].geoBreaks[1]==100?[be.seq[4]]:be.seq),t.$set(s)},i(n){l||(P(t.$$.fragment,n),l=!0)},o(n){A(t.$$.fragment,n),l=!1},d(n){n&&_(e),Q(t)}}}function qi(a){let e,t,l,n,i,s;function f(c){a[19](c)}let o={style:$t,$$slots:{default:[Bi]},$$scope:{ctx:a}};a[1]!==void 0&&(o.map=a[1]),t=new Qn({props:o}),De.push(()=>ze(t,"map",f));let r=a[6].geoBreaks&&a[6].geoPerc&&kt(a);return{c(){e=w("div"),J(t.$$.fragment),n=N(),r&&r.c(),i=R(),this.h()},l(c){e=y(c,"DIV",{});var h=C(e);x(t.$$.fragment,h),h.forEach(_),n=L(c),r&&r.l(c),i=R(),this.h()},h(){S(e,"height","450px",!1)},m(c,h){E(c,e,h),Y(t,e,null),E(c,n,h),r&&r.m(c,h),E(c,i,h),s=!0},p(c,h){const u={};h[0]&68|h[1]&2048&&(u.$$scope={dirty:h,ctx:c}),!l&&h[0]&2&&(l=!0,u.map=c[1],Te(()=>l=!1)),t.$set(u),c[6].geoBreaks&&c[6].geoPerc?r?(r.p(c,h),h[0]&64&&P(r,1)):(r=kt(c),r.c(),P(r,1),r.m(i.parentNode,i)):r&&(oe(),A(r,1,1,()=>{r=null}),fe())},i(c){s||(P(t.$$.fragment,c),P(r),s=!0)},o(c){A(t.$$.fragment,c),A(r),s=!1},d(c){c&&_(e),Q(t),c&&_(n),r&&r.d(c),c&&_(i)}}}function Fi(a){let e,t;return{c(){e=w("span"),t=K("Make a selection to see rankings."),this.h()},l(l){e=y(l,"SPAN",{class:!0});var n=C(e);t=M(n,"Make a selection to see rankings."),n.forEach(_),this.h()},h(){k(e,"class","muted svelte-4bq5sb")},m(l,n){E(l,e,n),v(e,t)},p:G,i:G,o:G,d(l){l&&_(e)}}}function Oi(a){let e,t;return e=new Nt({props:{data:[...a[6].geoPerc].filter(wt).sort(yt).slice(0,5)}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n[0]&64&&(i.data=[...l[6].geoPerc].filter(wt).sort(yt).slice(0,5)),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Hi(a){let e,t,l,n;const i=[Oi,Fi],s=[];function f(o,r){return o[6].geoPerc&&o[0][0]?0:1}return e=f(a),t=s[e]=i[e](a),{c(){t.c(),l=R()},l(o){t.l(o),l=R()},m(o,r){s[e].m(o,r),E(o,l,r),n=!0},p(o,r){let c=e;e=f(o),e===c?s[e].p(o,r):(oe(),A(s[c],1,1,()=>{s[c]=null}),fe(),t=s[e],t?t.p(o,r):(t=s[e]=i[e](o),t.c()),P(t,1),t.m(l.parentNode,l))},i(o){n||(P(t),n=!0)},o(o){A(t),n=!1},d(o){s[e].d(o),o&&_(l)}}}function Ri(a){let e,t;return{c(){e=w("span"),t=K("Make a selection to see rankings."),this.h()},l(l){e=y(l,"SPAN",{class:!0});var n=C(e);t=M(n,"Make a selection to see rankings."),n.forEach(_),this.h()},h(){k(e,"class","muted svelte-4bq5sb")},m(l,n){E(l,e,n),v(e,t)},p:G,i:G,o:G,d(l){l&&_(e)}}}function Wi(a){let e,t;return e=new Nt({props:{data:a[6].geoPerc.filter(Ct).sort(Dt).slice(-5),offset:a[6].geoPerc.filter(St).length-4}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n[0]&64&&(i.data=l[6].geoPerc.filter(Ct).sort(Dt).slice(-5)),n[0]&64&&(i.offset=l[6].geoPerc.filter(St).length-4),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Ui(a){let e,t,l,n;const i=[Wi,Ri],s=[];function f(o,r){return o[6].geoPerc&&o[0][0]?0:1}return e=f(a),t=s[e]=i[e](a),{c(){t.c(),l=R()},l(o){t.l(o),l=R()},m(o,r){s[e].m(o,r),E(o,l,r),n=!0},p(o,r){let c=e;e=f(o),e===c?s[e].p(o,r):(oe(),A(s[c],1,1,()=>{s[c]=null}),fe(),t=s[e],t?t.p(o,r):(t=s[e]=i[e](o),t.c()),P(t,1),t.m(l.parentNode,l))},i(o){n||(P(t),n=!0)},o(o){A(t),n=!1},d(o){s[e].d(o),o&&_(l)}}}function Gi(a){let e,t,l,n,i,s,f,o;return e=new pe({props:{colspan:3,rowspan:1,blank:!0,$$slots:{default:[Mi]},$$scope:{ctx:a}}}),l=new pe({props:{colspan:2,rowspan:2,blank:!0,$$slots:{default:[qi]},$$scope:{ctx:a}}}),i=new pe({props:{title:"Areas with high %",$$slots:{default:[Hi]},$$scope:{ctx:a}}}),f=new pe({props:{title:"Areas with low %",$$slots:{default:[Ui]},$$scope:{ctx:a}}}),{c(){J(e.$$.fragment),t=N(),J(l.$$.fragment),n=N(),J(i.$$.fragment),s=N(),J(f.$$.fragment)},l(r){x(e.$$.fragment,r),t=L(r),x(l.$$.fragment,r),n=L(r),x(i.$$.fragment,r),s=L(r),x(f.$$.fragment,r)},m(r,c){Y(e,r,c),E(r,t,c),Y(l,r,c),E(r,n,c),Y(i,r,c),E(r,s,c),Y(f,r,c),o=!0},p(r,c){const h={};c[1]&2048&&(h.$$scope={dirty:c,ctx:r}),e.$set(h);const u={};c[0]&70|c[1]&2048&&(u.$$scope={dirty:c,ctx:r}),l.$set(u);const d={};c[0]&65|c[1]&2048&&(d.$$scope={dirty:c,ctx:r}),i.$set(d);const m={};c[0]&65|c[1]&2048&&(m.$$scope={dirty:c,ctx:r}),f.$set(m)},i(r){o||(P(e.$$.fragment,r),P(l.$$.fragment,r),P(i.$$.fragment,r),P(f.$$.fragment,r),o=!0)},o(r){A(e.$$.fragment,r),A(l.$$.fragment,r),A(i.$$.fragment,r),A(f.$$.fragment,r),o=!1},d(r){Q(e,r),r&&_(t),Q(l,r),r&&_(n),Q(i,r),r&&_(s),Q(f,r)}}}function Zi(a){let e,t,l;var n=a[5];function i(s){return{props:{data:s[6].selected&&s[10](["residents",s[36].code])}}}return n&&(e=new n(i(a))),{c(){e&&J(e.$$.fragment),t=R()},l(s){e&&x(e.$$.fragment,s),t=R()},m(s,f){e&&Y(e,s,f),E(s,t,f),l=!0},p(s,f){const o={};if(f[0]&64&&(o.data=s[6].selected&&s[10](["residents",s[36].code])),n!==(n=s[5])){if(e){oe();const r=e;A(r.$$.fragment,1,0,()=>{Q(r,1)}),fe()}n?(e=new n(i(s)),J(e.$$.fragment),P(e.$$.fragment,1),Y(e,t.parentNode,t)):e=null}else n&&e.$set(o)},i(s){l||(e&&P(e.$$.fragment,s),l=!0)},o(s){e&&A(e.$$.fragment,s),l=!1},d(s){s&&_(t),e&&Q(e,s)}}}function Xi(a){let e,t=Ve.nodata+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-4bq5sb")},m(n,i){E(n,e,i),v(e,l)},p:G,i:G,o:G,d(n){n&&_(e)}}}function Ji(a){let e,t=Ve.blocked+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(n){e=y(n,"SPAN",{class:!0});var i=C(e);l=M(i,t),i.forEach(_),this.h()},h(){k(e,"class","num-desc svelte-4bq5sb")},m(n,i){E(n,e,i),v(e,l)},p:G,i:G,o:G,d(n){n&&_(e)}}}function Yi(a){let e,t,l,n,i,s=Xe[a[36].code]+"",f,o;const r=[Ji,Xi,Zi],c=[];function h(u,d){return u[6].selected.residents[u[36].code].values==="blocked"?0:u[6].selected.residents[u[36].code].values.percent[0]==null?1:2}return e=h(a),t=c[e]=r[e](a),{c(){t.c(),l=N(),n=w("span"),i=K("% of "),f=K(s),this.h()},l(u){t.l(u),l=L(u),n=y(u,"SPAN",{class:!0});var d=C(n);i=M(d,"% of "),f=M(d,s),d.forEach(_),this.h()},h(){k(n,"class","num-desc svelte-4bq5sb")},m(u,d){c[e].m(u,d),E(u,l,d),E(u,n,d),v(n,i),v(n,f),o=!0},p(u,d){let m=e;e=h(u),e===m?c[e].p(u,d):(oe(),A(c[m],1,1,()=>{c[m]=null}),fe(),t=c[e],t?t.p(u,d):(t=c[e]=r[e](u),t.c()),P(t,1),t.m(l.parentNode,l)),(!o||d[0]&64)&&s!==(s=Xe[u[36].code]+"")&&W(f,s)},i(u){o||(P(t),o=!0)},o(u){A(t),o=!1},d(u){c[e].d(u),u&&_(l),u&&_(n)}}}function pt(a){let e,t;return e=new pe({props:{title:Ye(a[36].key),$$slots:{default:[Yi]},$$scope:{ctx:a}}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n[0]&64&&(i.title=Ye(l[36].key)),n[0]&96|n[1]&2048&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Qi(a){let e,t,l=a[33].tables.filter(a[25]),n=[];for(let s=0;s<l.length;s+=1)n[s]=pt(ut(a,l,s));const i=s=>A(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=N()},l(s){for(let f=0;f<n.length;f+=1)n[f].l(s);e=L(s)},m(s,f){for(let o=0;o<n.length;o+=1)n[o].m(s,f);E(s,e,f),t=!0},p(s,f){if(f[0]&1120){l=s[33].tables.filter(s[25]);let o;for(o=0;o<l.length;o+=1){const r=ut(s,l,o);n[o]?(n[o].p(r,f),P(n[o],1)):(n[o]=pt(r),n[o].c(),P(n[o],1),n[o].m(e.parentNode,e))}for(oe(),o=l.length;o<n.length;o+=1)i(o);fe()}},i(s){if(!t){for(let f=0;f<l.length;f+=1)P(n[f]);t=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)A(n[f]);t=!1},d(s){le(n,s),s&&_(e)}}}function Et(a){let e,t;return e=new Be({props:{title:a[33].categoryName,$$slots:{default:[Qi]},$$scope:{ctx:a}}}),{c(){J(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const i={};n[0]&96|n[1]&2048&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function $i(a){let e,t,l,n,i,s,f,o,r,c,h,u,d,m,g,D,b,T,j,z;e=new Be({props:{title:"Demographics",$$slots:{default:[Ki]},$$scope:{ctx:a}}}),l=new Be({props:{title:"Population by area",$$slots:{default:[Gi]},$$scope:{ctx:a}}});let B=Ae[0].tablesCategorised,p=[];for(let I=0;I<B.length;I+=1)p[I]=Et(ct(a,B,I));const F=I=>A(p[I],1,1,()=>{p[I]=null});return{c(){J(e.$$.fragment),t=N(),J(l.$$.fragment),n=N(),i=w("span"),s=w("strong"),f=K("Chart type:"),o=N(),r=w("label"),c=w("input"),h=K("Comparison marker"),u=N(),d=w("label"),m=w("input"),g=K("Grouped bar"),D=N();for(let I=0;I<p.length;I+=1)p[I].c();b=R(),this.h()},l(I){x(e.$$.fragment,I),t=L(I),x(l.$$.fragment,I),n=L(I),i=y(I,"SPAN",{});var V=C(i);s=y(V,"STRONG",{});var H=C(s);f=M(H,"Chart type:"),H.forEach(_),o=L(V),r=y(V,"LABEL",{});var se=C(r);c=y(se,"INPUT",{type:!0,name:!0}),h=M(se,"Comparison marker"),se.forEach(_),u=L(V),d=y(V,"LABEL",{});var U=C(d);m=y(U,"INPUT",{type:!0,name:!0}),g=M(U,"Grouped bar"),U.forEach(_),V.forEach(_),D=L(I);for(let $=0;$<p.length;$+=1)p[$].l(I);b=R(),this.h()},h(){k(c,"type","radio"),k(c,"name","chart-type"),c.__value=Pt,c.value=c.__value,a[23][0].push(c),k(m,"type","radio"),k(m,"name","chart-type"),m.__value=Gn,m.value=m.__value,a[23][0].push(m)},m(I,V){Y(e,I,V),E(I,t,V),Y(l,I,V),E(I,n,V),E(I,i,V),v(i,s),v(s,f),v(i,o),v(i,r),v(r,c),c.checked=c.__value===a[5],v(r,h),v(i,u),v(i,d),v(d,m),m.checked=m.__value===a[5],v(d,g),E(I,D,V);for(let H=0;H<p.length;H+=1)p[H].m(I,V);E(I,b,V),T=!0,j||(z=[Ce(c,"change",a[22]),Ce(m,"change",a[24])],j=!0)},p(I,V){const H={};V[0]&65|V[1]&2048&&(H.$$scope={dirty:V,ctx:I}),e.$set(H);const se={};if(V[0]&71|V[1]&2048&&(se.$$scope={dirty:V,ctx:I}),l.$set(se),V[0]&32&&(c.checked=c.__value===I[5]),V[0]&32&&(m.checked=m.__value===I[5]),V[0]&1120){B=Ae[0].tablesCategorised;let U;for(U=0;U<B.length;U+=1){const $=ct(I,B,U);p[U]?(p[U].p($,V),P(p[U],1)):(p[U]=Et($),p[U].c(),P(p[U],1),p[U].m(b.parentNode,b))}for(oe(),U=B.length;U<p.length;U+=1)F(U);fe()}},i(I){if(!T){P(e.$$.fragment,I),P(l.$$.fragment,I);for(let V=0;V<B.length;V+=1)P(p[V]);T=!0}},o(I){A(e.$$.fragment,I),A(l.$$.fragment,I),p=p.filter(Boolean);for(let V=0;V<p.length;V+=1)A(p[V]);T=!1},d(I){Q(e,I),I&&_(t),Q(l,I),I&&_(n),I&&_(i),a[23][0].splice(a[23][0].indexOf(c),1),a[23][0].splice(a[23][0].indexOf(m),1),I&&_(D),le(p,I),I&&_(b),j=!1,Gt(z)}}}function xi(a){let e,t,l,n,i,s,f,o,r,c,h,u;return r=new Cn({props:{background:"none",breadcrumb:[{label:"Census",url:"/census"},{label:"Create a population group profile"}],$$slots:{meta:[Ii],default:[Ci]},$$scope:{ctx:a}}}),h=new ii({props:{$$slots:{default:[$i]},$$scope:{ctx:a}}}),{c(){e=w("meta"),t=w("meta"),l=w("meta"),n=w("meta"),i=w("meta"),s=w("meta"),f=w("meta"),o=N(),J(r.$$.fragment),c=N(),J(h.$$.fragment),this.h()},l(d){const m=Ut('[data-svelte="svelte-1yphpwa"]',document.head);e=y(m,"META",{name:!0,content:!0}),t=y(m,"META",{property:!0,content:!0}),l=y(m,"META",{property:!0,content:!0}),n=y(m,"META",{property:!0,content:!0}),i=y(m,"META",{property:!0,content:!0}),s=y(m,"META",{property:!0,content:!0}),f=y(m,"META",{name:!0,content:!0}),m.forEach(_),o=L(d),x(r.$$.fragment,d),c=L(d),x(h.$$.fragment,d),this.h()},h(){document.title="Create a population group profile",k(e,"name","description"),k(e,"content",""),k(t,"property","og:title"),k(t,"content","Create a population group profile"),k(l,"property","og:type"),k(l,"content","website"),k(n,"property","og:url"),k(n,"content",zt+"/"),k(i,"property","og:image:type"),k(i,"content","image/jpeg"),k(s,"property","og:description"),k(s,"content",""),k(f,"name","description"),k(f,"content","")},m(d,m){v(document.head,e),v(document.head,t),v(document.head,l),v(document.head,n),v(document.head,i),v(document.head,s),v(document.head,f),E(d,o,m),Y(r,d,m),E(d,c,m),Y(h,d,m),u=!0},p(d,m){const g={};m[0]&25|m[1]&2048&&(g.$$scope={dirty:m,ctx:d}),r.$set(g);const D={};m[0]&103|m[1]&2048&&(D.$$scope={dirty:m,ctx:d}),h.$set(D)},i(d){u||(P(r.$$.fragment,d),P(h.$$.fragment,d),u=!0)},o(d){A(r.$$.fragment,d),A(h.$$.fragment,d),u=!1},d(d){_(e),_(t),_(l),_(n),_(i),_(s),_(f),d&&_(o),Q(r,d),d&&_(c),Q(h,d)}}}const fa=!1;async function ra({fetch:a}){let e=await ln(zt+we.url,we.layer,a),t={};e.features.forEach(s=>t[s.properties[we.code]]=s.properties[we.name]);let l=(await Tt(Ae,[],a)).data;l.total_pop=Vt(l.residents.sex.values.count);let n=[],i=e.features.map(s=>s.properties[we.code]);return i.forEach(s=>{n.push({code:s,name:t[s],value:100})}),n.forEach(s=>s.color=be.seq[4]),{props:{geojson:e,geoLookup:t,dataAll:l,geoCodes:i,geoPerc:n}}}let ea="light";function la(a){let e=[];a.forEach(l=>e.push(l[0]));const t=a.flat().pop();return(a.length===1||t!=e[e.length-1])&&e.push(t),e}const wt=a=>a.value!=null,yt=(a,e)=>e.value-a.value,Ct=a=>a.value!=null,Dt=(a,e)=>e.value-a.value,St=a=>a.value!=null;function ta(a,e,t){let l;It(a,Qt,O=>t(28,l=O));let{geojson:n,geoLookup:i,dataAll:s,geoCodes:f,geoPerc:o}=e;ye("theme",Jt[ea]);let r=null,c=[],h=null,u="success",d=!1,m=Pt,g={all:s,selected:s,geojson:n,geoLookup:i,geoCodes:f,geoPerc:o,geoBreaks:[0,100]};function D(O,Z){console.log("doSelect2",O,Z),t(0,c=[...c.filter(X=>X.topic!==O.shortLabel),ke({topic:O.shortLabel,key:O.key},Z)]),je(`${Me}?${c.map(X=>`${X.key}=${X.code}`).join("&")}`,{noscroll:!0})}function b(O,Z){console.log("doDeselect",O,Z),t(0,c=c.filter(X=>X.label!==Z.label)),je(`${Me}?${c.map(X=>`${X.key}=${X.code}`).join("&")}`,{noscroll:!0})}function T(O){t(0,c=c.filter(Z=>Z.topic!=O)),je(`${Me}?${c.map(Z=>`${Z.key}=${Z.code}`).join("&")}`,{noscroll:!0})}function j(O){t(6,g.selected=O.data,g),t(6,g.selected.total_pop=c.length===0?Vt(s.residents.sex.values.count):O.total_pop,g),t(6,g.geoPerc=[],g);let Z=null;{g.geoCodes.forEach(ae=>{let q=c.length===0?100:O.mapData[ae]!=null?O.mapData[ae][1]:null;g.geoPerc.push({code:ae,name:g.geoLookup[ae],value:q})});let X=g.geoPerc.map(ae=>ae.value).filter(ae=>ae!=null);Z=X.length===0?null:Zt(X,Math.min(5,X.length))}if(Z==null)g.geoPerc.forEach(X=>X.color=be.nodata),t(6,g.geoBreaks=[0,100],g);else if(c.length===0)g.geoPerc.forEach(X=>X.color=be.seq[4]),t(6,g.geoBreaks=[100,100],g);else{let X=la(Z);g.geoPerc.forEach(ae=>ae.color=ae.value!=null?en(ae.value,X,be.seq):be.nodata),t(6,g.geoBreaks=X,g)}t(3,u="success")}function z(){t(3,u="loading"),t(4,d=c&&c.some(O=>["Aged 4 years and under","Aged 5 to 9 years","Aged 10 to 14 years","Aged 15 years and under"].includes(O.label))),Tt(Ae,c).then(j)}function B(O){let Z=O[0],X=O[1],ae=g.all[Z][X].values,q=g.selected[Z][X].values,ce=[];return Yt[X].forEach((Lt,He)=>{let Re=Lt.label,At=ae.percent[He],Kt=q.percent[He];g.selected.total_pop!=g.all.total_pop&&ce.push({group:"This group",category:Re,value:Kt}),ce.push({group:"Whole population",category:Re,value:At})}),ce}function p(){t(0,c=[]);for(let O of l.url.searchParams.entries()){let Z=Ge.find(ae=>ae.key==O[0]);if(!Z)continue;let X=Z.cats.find(ae=>ae.code==O[1]);!X||c.push(ke({topic:Z.shortLabel,key:Z.key},X))}z()}function F(O){for(const Z of O)if(Z.var in Ze)return Ze[Z.var][Z.code];return null}nn(p);const I=[[]],V=O=>T(O.topic);function H(O){h=O,t(2,h)}function se(O){r=O,t(1,r)}const U=O=>O.code==h,$=O=>O.code==h;function ue(){m=this.__value,t(5,m)}function ee(){m=this.__value,t(5,m)}const he=O=>!O.code.startsWith("resident_age")&&g.selected.residents[O.code].values!=="blocked"&&g.selected.residents[O.code].values!==void 0;return a.$$set=O=>{"geojson"in O&&t(12,n=O.geojson),"geoLookup"in O&&t(13,i=O.geoLookup),"dataAll"in O&&t(14,s=O.dataAll),"geoCodes"in O&&t(15,f=O.geoCodes),"geoPerc"in O&&t(16,o=O.geoPerc)},a.$$.update=()=>{a.$$.dirty[0]&1&&Ge.filter(O=>!c.map(Z=>Z.topic).includes(O.label))},[c,r,h,u,d,m,g,D,b,T,B,F,n,i,s,f,o,V,H,se,U,$,ue,I,ee,he]}class ca extends te{constructor(e){super();ne(this,e,ta,xi,ie,{geojson:12,geoLookup:13,dataAll:14,geoCodes:15,geoPerc:16},null,[-1,-1])}}export{ca as default,ra as load,fa as prerender};
